(()=>{var no=Object.create;var ei=Object.defineProperty;var io=Object.getOwnPropertyDescriptor;var ro=Object.getOwnPropertyNames;var so=Object.getPrototypeOf,oo=Object.prototype.hasOwnProperty;var Ce=(t,e)=>()=>(t&&(e=t(t=0)),e);var vr=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),yr=(t,e)=>{for(var n in e)ei(t,n,{get:e[n],enumerable:!0})},ao=(t,e,n,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of ro(e))!oo.call(t,s)&&s!==n&&ei(t,s,{get:()=>e[s],enumerable:!(r=io(e,s))||r.enumerable});return t};var _r=(t,e,n)=>(n=t!=null?no(so(t)):{},ao(e||!t||!t.__esModule?ei(n,"default",{value:t,enumerable:!0}):n,t));var Sr=vr(wr=>{(function(){var t,e,n,r,s=function(l,a){return function(){return l.apply(a,arguments)}},o=function(l,a){for(var c in a)u.call(a,c)&&(l[c]=a[c]);function d(){this.constructor=l}return d.prototype=a.prototype,l.prototype=new d,l.__super__=a.prototype,l},u={}.hasOwnProperty;r=function(){function l(){this.options_index=0,this.parsed=[]}return l.prototype.add_node=function(a){return a.nodeName.toUpperCase()==="OPTGROUP"?this.add_group(a):this.add_option(a)},l.prototype.add_group=function(a){var c,d,f,b,y,w;for(c=this.parsed.length,this.parsed.push({array_index:c,group:!0,label:a.label,title:a.title?a.title:void 0,children:0,disabled:a.disabled,classes:a.className}),y=a.childNodes,w=[],d=0,f=y.length;d<f;d++)b=y[d],w.push(this.add_option(b,c,a.disabled));return w},l.prototype.add_option=function(a,c,d){if(a.nodeName.toUpperCase()==="OPTION")return a.text!==""?(c!=null&&(this.parsed[c].children+=1),this.parsed.push({array_index:this.parsed.length,options_index:this.options_index,value:a.value,text:a.text,html:a.innerHTML,title:a.title?a.title:void 0,selected:a.selected,disabled:d===!0?d:a.disabled,group_array_index:c,group_label:c!=null?this.parsed[c].label:null,classes:a.className,style:a.style.cssText})):this.parsed.push({array_index:this.parsed.length,options_index:this.options_index,empty:!0}),this.options_index+=1},l}(),r.select_to_array=function(l){var a,c,d,f,b;for(f=new r,b=l.childNodes,c=0,d=b.length;c<d;c++)a=b[c],f.add_node(a);return f.parsed},e=function(){function l(a,c){this.form_field=a,this.options=c??{},this.label_click_handler=s(this.label_click_handler,this),l.browser_is_supported()&&(this.is_multiple=this.form_field.multiple,this.set_default_text(),this.set_default_values(),this.setup(),this.set_up_html(),this.register_observers(),this.on_ready())}return l.prototype.set_default_values=function(){return this.click_test_action=function(a){return function(c){return a.test_active_click(c)}}(this),this.activate_action=function(a){return function(c){return a.activate_field(c)}}(this),this.active_field=!1,this.mouse_on_container=!1,this.results_showing=!1,this.result_highlighted=null,this.is_rtl=this.options.rtl||/\bchosen-rtl\b/.test(this.form_field.className),this.allow_single_deselect=this.options.allow_single_deselect!=null&&this.form_field.options[0]!=null&&this.form_field.options[0].text===""?this.options.allow_single_deselect:!1,this.disable_search_threshold=this.options.disable_search_threshold||0,this.disable_search=this.options.disable_search||!1,this.enable_split_word_search=this.options.enable_split_word_search!=null?this.options.enable_split_word_search:!0,this.group_search=this.options.group_search!=null?this.options.group_search:!0,this.search_contains=this.options.search_contains||!1,this.single_backstroke_delete=this.options.single_backstroke_delete!=null?this.options.single_backstroke_delete:!0,this.max_selected_options=this.options.max_selected_options||1/0,this.inherit_select_classes=this.options.inherit_select_classes||!1,this.display_selected_options=this.options.display_selected_options!=null?this.options.display_selected_options:!0,this.display_disabled_options=this.options.display_disabled_options!=null?this.options.display_disabled_options:!0,this.include_group_label_in_selected=this.options.include_group_label_in_selected||!1,this.max_shown_results=this.options.max_shown_results||Number.POSITIVE_INFINITY,this.case_sensitive_search=this.options.case_sensitive_search||!1,this.hide_results_on_select=this.options.hide_results_on_select!=null?this.options.hide_results_on_select:!0},l.prototype.set_default_text=function(){return this.form_field.getAttribute("data-placeholder")?this.default_text=this.form_field.getAttribute("data-placeholder"):this.is_multiple?this.default_text=this.options.placeholder_text_multiple||this.options.placeholder_text||l.default_multiple_text:this.default_text=this.options.placeholder_text_single||this.options.placeholder_text||l.default_single_text,this.default_text=this.escape_html(this.default_text),this.results_none_found=this.form_field.getAttribute("data-no_results_text")||this.options.no_results_text||l.default_no_result_text},l.prototype.choice_label=function(a){return this.include_group_label_in_selected&&a.group_label!=null?"<b class='group-name'>"+this.escape_html(a.group_label)+"</b>"+a.html:a.html},l.prototype.mouse_enter=function(){return this.mouse_on_container=!0},l.prototype.mouse_leave=function(){return this.mouse_on_container=!1},l.prototype.input_focus=function(a){if(this.is_multiple){if(!this.active_field)return setTimeout(function(c){return function(){return c.container_mousedown()}}(this),50)}else if(!this.active_field)return this.activate_field()},l.prototype.input_blur=function(a){if(!this.mouse_on_container)return this.active_field=!1,setTimeout(function(c){return function(){return c.blur_test()}}(this),100)},l.prototype.label_click_handler=function(a){return this.is_multiple?this.container_mousedown(a):this.activate_field()},l.prototype.results_option_build=function(a){var c,d,f,b,y,w,k;for(c="",k=0,w=this.results_data,b=0,y=w.length;b<y&&(d=w[b],f="",d.group?f=this.result_add_group(d):f=this.result_add_option(d),f!==""&&(k++,c+=f),a?.first&&(d.selected&&this.is_multiple?this.choice_build(d):d.selected&&!this.is_multiple&&this.single_set_selected_text(this.choice_label(d))),!(k>=this.max_shown_results));b++);return c},l.prototype.result_add_option=function(a){var c,d;return!a.search_match||!this.include_option_in_results(a)?"":(c=[],!a.disabled&&!(a.selected&&this.is_multiple)&&c.push("active-result"),a.disabled&&!(a.selected&&this.is_multiple)&&c.push("disabled-result"),a.selected&&c.push("result-selected"),a.group_array_index!=null&&c.push("group-option"),a.classes!==""&&c.push(a.classes),d=document.createElement("li"),d.className=c.join(" "),a.style&&(d.style.cssText=a.style),d.setAttribute("data-option-array-index",a.array_index),d.innerHTML=a.highlighted_html||a.html,a.title&&(d.title=a.title),this.outerHTML(d))},l.prototype.result_add_group=function(a){var c,d;return!(a.search_match||a.group_match)||!(a.active_options>0)?"":(c=[],c.push("group-result"),a.classes&&c.push(a.classes),d=document.createElement("li"),d.className=c.join(" "),d.innerHTML=a.highlighted_html||this.escape_html(a.label),a.title&&(d.title=a.title),this.outerHTML(d))},l.prototype.results_update_field=function(){if(this.set_default_text(),this.is_multiple||this.results_reset_cleanup(),this.result_clear_highlight(),this.results_build(),this.results_showing)return this.winnow_results()},l.prototype.reset_single_select_options=function(){var a,c,d,f,b;for(d=this.results_data,b=[],a=0,c=d.length;a<c;a++)f=d[a],f.selected?b.push(f.selected=!1):b.push(void 0);return b},l.prototype.results_toggle=function(){return this.results_showing?this.results_hide():this.results_show()},l.prototype.results_search=function(a){return this.results_showing?this.winnow_results():this.results_show()},l.prototype.winnow_results=function(a){var c,d,f,b,y,w,k,C,j,B,M,p,D,q,T;for(this.no_results_clear(),B=0,k=this.get_search_text(),c=k.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),j=this.get_search_regex(c),C=this.results_data,f=0,b=C.length;f<b;f++)y=C[f],y.search_match=!1,M=null,p=null,y.highlighted_html="",this.include_option_in_results(y)&&(y.group&&(y.group_match=!1,y.active_options=0),y.group_array_index!=null&&this.results_data[y.group_array_index]&&(M=this.results_data[y.group_array_index],M.active_options===0&&M.search_match&&(B+=1),M.active_options+=1),T=y.group?y.label:y.text,y.group&&!this.group_search||(p=this.search_string_match(T,j),y.search_match=p!=null,y.search_match&&!y.group&&(B+=1),y.search_match?(k.length&&(D=p.index,w=T.slice(0,D),d=T.slice(D,D+k.length),q=T.slice(D+k.length),y.highlighted_html=this.escape_html(w)+"<em>"+this.escape_html(d)+"</em>"+this.escape_html(q)),M!=null&&(M.group_match=!0)):y.group_array_index!=null&&this.results_data[y.group_array_index].search_match&&(y.search_match=!0)));if(this.result_clear_highlight(),B<1&&k.length)return this.update_results_content(""),this.no_results(k);if(this.update_results_content(this.results_option_build()),!a?.skip_highlight)return this.winnow_results_set_highlight()},l.prototype.get_search_regex=function(a){var c,d;return d=this.search_contains?a:"(^|\\s|\\b)"+a+"[^\\s]*",this.enable_split_word_search||this.search_contains||(d="^"+d),c=this.case_sensitive_search?"":"i",new RegExp(d,c)},l.prototype.search_string_match=function(a,c){var d;return d=c.exec(a),!this.search_contains&&d?.[1]&&(d.index+=1),d},l.prototype.choices_count=function(){var a,c,d,f;if(this.selected_option_count!=null)return this.selected_option_count;for(this.selected_option_count=0,f=this.form_field.options,a=0,c=f.length;a<c;a++)d=f[a],d.selected&&(this.selected_option_count+=1);return this.selected_option_count},l.prototype.choices_click=function(a){if(a.preventDefault(),this.activate_field(),!(this.results_showing||this.is_disabled))return this.results_show()},l.prototype.keydown_checker=function(a){var c,d;switch(d=(c=a.which)!=null?c:a.keyCode,this.search_field_scale(),d!==8&&this.pending_backstroke&&this.clear_backstroke(),d){case 8:this.backstroke_length=this.get_search_field_value().length;break;case 9:this.results_showing&&!this.is_multiple&&this.result_select(a),this.mouse_on_container=!1;break;case 13:this.results_showing&&a.preventDefault();break;case 27:this.results_showing&&a.preventDefault();break;case 32:this.disable_search&&a.preventDefault();break;case 38:a.preventDefault(),this.keyup_arrow();break;case 40:a.preventDefault(),this.keydown_arrow();break}},l.prototype.keyup_checker=function(a){var c,d;switch(d=(c=a.which)!=null?c:a.keyCode,this.search_field_scale(),d){case 8:this.is_multiple&&this.backstroke_length<1&&this.choices_count()>0?this.keydown_backstroke():this.pending_backstroke||(this.result_clear_highlight(),this.results_search());break;case 13:a.preventDefault(),this.results_showing&&this.result_select(a);break;case 27:this.results_showing&&this.results_hide();break;case 9:case 16:case 17:case 18:case 38:case 40:case 91:break;default:this.results_search();break}},l.prototype.clipboard_event_checker=function(a){if(!this.is_disabled)return setTimeout(function(c){return function(){return c.results_search()}}(this),50)},l.prototype.container_width=function(){return this.options.width!=null?this.options.width:this.form_field.offsetWidth+"px"},l.prototype.include_option_in_results=function(a){return!(this.is_multiple&&!this.display_selected_options&&a.selected||!this.display_disabled_options&&a.disabled||a.empty)},l.prototype.search_results_touchstart=function(a){return this.touch_started=!0,this.search_results_mouseover(a)},l.prototype.search_results_touchmove=function(a){return this.touch_started=!1,this.search_results_mouseout(a)},l.prototype.search_results_touchend=function(a){if(this.touch_started)return this.search_results_mouseup(a)},l.prototype.outerHTML=function(a){var c;return a.outerHTML?a.outerHTML:(c=document.createElement("div"),c.appendChild(a),c.innerHTML)},l.prototype.get_single_html=function(){return`<a class="chosen-single chosen-default">
  <span>`+this.default_text+`</span>
  <div><b></b></div>
</a>
<div class="chosen-drop">
  <div class="chosen-search">
    <input class="chosen-search-input" type="text" autocomplete="off" />
  </div>
  <ul class="chosen-results"></ul>
</div>`},l.prototype.get_multi_html=function(){return`<ul class="chosen-choices">
  <li class="search-field">
    <input class="chosen-search-input" type="text" autocomplete="off" value="`+this.default_text+`" />
  </li>
</ul>
<div class="chosen-drop">
  <ul class="chosen-results"></ul>
</div>`},l.prototype.get_no_results_html=function(a){return`<li class="no-results">
  `+this.results_none_found+" <span>"+this.escape_html(a)+`</span>
</li>`},l.browser_is_supported=function(){return window.navigator.appName==="Microsoft Internet Explorer"?document.documentMode>=8:!(/iP(od|hone)/i.test(window.navigator.userAgent)||/IEMobile/i.test(window.navigator.userAgent)||/Windows Phone/i.test(window.navigator.userAgent)||/BlackBerry/i.test(window.navigator.userAgent)||/BB10/i.test(window.navigator.userAgent)||/Android.*Mobile/i.test(window.navigator.userAgent))},l.default_multiple_text="Select Some Options",l.default_single_text="Select an Option",l.default_no_result_text="No results match",l}(),t=jQuery,t.fn.extend({chosen:function(l){return e.browser_is_supported()?this.each(function(a){var c,d;if(c=t(this),d=c.data("chosen"),l==="destroy"){d instanceof n&&d.destroy();return}d instanceof n||c.data("chosen",new n(this,l))}):this}}),n=function(l){o(a,l);function a(){return a.__super__.constructor.apply(this,arguments)}return a.prototype.setup=function(){return this.form_field_jq=t(this.form_field),this.current_selectedIndex=this.form_field.selectedIndex},a.prototype.set_up_html=function(){var c,d;return c=["chosen-container"],c.push("chosen-container-"+(this.is_multiple?"multi":"single")),this.inherit_select_classes&&this.form_field.className&&c.push(this.form_field.className),this.is_rtl&&c.push("chosen-rtl"),d={class:c.join(" "),title:this.form_field.title},this.form_field.id.length&&(d.id=this.form_field.id.replace(/[^\w]/g,"_")+"_chosen"),this.container=t("<div />",d),this.container.width(this.container_width()),this.is_multiple?this.container.html(this.get_multi_html()):this.container.html(this.get_single_html()),this.form_field_jq.hide().after(this.container),this.dropdown=this.container.find("div.chosen-drop").first(),this.search_field=this.container.find("input").first(),this.search_results=this.container.find("ul.chosen-results").first(),this.search_field_scale(),this.search_no_results=this.container.find("li.no-results").first(),this.is_multiple?(this.search_choices=this.container.find("ul.chosen-choices").first(),this.search_container=this.container.find("li.search-field").first()):(this.search_container=this.container.find("div.chosen-search").first(),this.selected_item=this.container.find(".chosen-single").first()),this.results_build(),this.set_tab_index(),this.set_label_behavior()},a.prototype.on_ready=function(){return this.form_field_jq.trigger("chosen:ready",{chosen:this})},a.prototype.register_observers=function(){return this.container.on("touchstart.chosen",function(c){return function(d){c.container_mousedown(d)}}(this)),this.container.on("touchend.chosen",function(c){return function(d){c.container_mouseup(d)}}(this)),this.container.on("mousedown.chosen",function(c){return function(d){c.container_mousedown(d)}}(this)),this.container.on("mouseup.chosen",function(c){return function(d){c.container_mouseup(d)}}(this)),this.container.on("mouseenter.chosen",function(c){return function(d){c.mouse_enter(d)}}(this)),this.container.on("mouseleave.chosen",function(c){return function(d){c.mouse_leave(d)}}(this)),this.search_results.on("mouseup.chosen",function(c){return function(d){c.search_results_mouseup(d)}}(this)),this.search_results.on("mouseover.chosen",function(c){return function(d){c.search_results_mouseover(d)}}(this)),this.search_results.on("mouseout.chosen",function(c){return function(d){c.search_results_mouseout(d)}}(this)),this.search_results.on("mousewheel.chosen DOMMouseScroll.chosen",function(c){return function(d){c.search_results_mousewheel(d)}}(this)),this.search_results.on("touchstart.chosen",function(c){return function(d){c.search_results_touchstart(d)}}(this)),this.search_results.on("touchmove.chosen",function(c){return function(d){c.search_results_touchmove(d)}}(this)),this.search_results.on("touchend.chosen",function(c){return function(d){c.search_results_touchend(d)}}(this)),this.form_field_jq.on("chosen:updated.chosen",function(c){return function(d){c.results_update_field(d)}}(this)),this.form_field_jq.on("chosen:activate.chosen",function(c){return function(d){c.activate_field(d)}}(this)),this.form_field_jq.on("chosen:open.chosen",function(c){return function(d){c.container_mousedown(d)}}(this)),this.form_field_jq.on("chosen:close.chosen",function(c){return function(d){c.close_field(d)}}(this)),this.search_field.on("blur.chosen",function(c){return function(d){c.input_blur(d)}}(this)),this.search_field.on("keyup.chosen",function(c){return function(d){c.keyup_checker(d)}}(this)),this.search_field.on("keydown.chosen",function(c){return function(d){c.keydown_checker(d)}}(this)),this.search_field.on("focus.chosen",function(c){return function(d){c.input_focus(d)}}(this)),this.search_field.on("cut.chosen",function(c){return function(d){c.clipboard_event_checker(d)}}(this)),this.search_field.on("paste.chosen",function(c){return function(d){c.clipboard_event_checker(d)}}(this)),this.is_multiple?this.search_choices.on("click.chosen",function(c){return function(d){c.choices_click(d)}}(this)):this.container.on("click.chosen",function(c){c.preventDefault()})},a.prototype.destroy=function(){return t(this.container[0].ownerDocument).off("click.chosen",this.click_test_action),this.form_field_label.length>0&&this.form_field_label.off("click.chosen"),this.search_field[0].tabIndex&&(this.form_field_jq[0].tabIndex=this.search_field[0].tabIndex),this.container.remove(),this.form_field_jq.removeData("chosen"),this.form_field_jq.show()},a.prototype.search_field_disabled=function(){if(this.is_disabled=this.form_field.disabled||this.form_field_jq.parents("fieldset").is(":disabled"),this.container.toggleClass("chosen-disabled",this.is_disabled),this.search_field[0].disabled=this.is_disabled,this.is_multiple||this.selected_item.off("focus.chosen",this.activate_field),this.is_disabled)return this.close_field();if(!this.is_multiple)return this.selected_item.on("focus.chosen",this.activate_field)},a.prototype.container_mousedown=function(c){var d;if(!this.is_disabled&&(c&&((d=c.type)==="mousedown"||d==="touchstart")&&!this.results_showing&&c.preventDefault(),!(c!=null&&t(c.target).hasClass("search-choice-close"))))return this.active_field?!this.is_multiple&&c&&(t(c.target)[0]===this.selected_item[0]||t(c.target).parents("a.chosen-single").length)&&(c.preventDefault(),this.results_toggle()):(this.is_multiple&&this.search_field.val(""),t(this.container[0].ownerDocument).on("click.chosen",this.click_test_action),this.results_show()),this.activate_field()},a.prototype.container_mouseup=function(c){if(c.target.nodeName==="ABBR"&&!this.is_disabled)return this.results_reset(c)},a.prototype.search_results_mousewheel=function(c){var d;if(c.originalEvent&&(d=c.originalEvent.deltaY||-c.originalEvent.wheelDelta||c.originalEvent.detail),d!=null)return c.preventDefault(),c.type==="DOMMouseScroll"&&(d=d*40),this.search_results.scrollTop(d+this.search_results.scrollTop())},a.prototype.blur_test=function(c){if(!this.active_field&&this.container.hasClass("chosen-container-active"))return this.close_field()},a.prototype.close_field=function(){return t(this.container[0].ownerDocument).off("click.chosen",this.click_test_action),this.active_field=!1,this.results_hide(),this.container.removeClass("chosen-container-active"),this.clear_backstroke(),this.show_search_field_default(),this.search_field_scale(),this.search_field.blur()},a.prototype.activate_field=function(){if(!this.is_disabled)return this.container.addClass("chosen-container-active"),this.active_field=!0,this.search_field.val(this.search_field.val()),this.search_field.focus()},a.prototype.test_active_click=function(c){var d;return d=t(c.target).closest(".chosen-container"),d.length&&this.container[0]===d[0]?this.active_field=!0:this.close_field()},a.prototype.results_build=function(){return this.parsing=!0,this.selected_option_count=null,this.results_data=r.select_to_array(this.form_field),this.is_multiple?this.search_choices.find("li.search-choice").remove():(this.single_set_selected_text(),this.disable_search||this.form_field.options.length<=this.disable_search_threshold?(this.search_field[0].readOnly=!0,this.container.addClass("chosen-container-single-nosearch")):(this.search_field[0].readOnly=!1,this.container.removeClass("chosen-container-single-nosearch"))),this.update_results_content(this.results_option_build({first:!0})),this.search_field_disabled(),this.show_search_field_default(),this.search_field_scale(),this.parsing=!1},a.prototype.result_do_highlight=function(c){var d,f,b,y,w;if(c.length){if(this.result_clear_highlight(),this.result_highlight=c,this.result_highlight.addClass("highlighted"),b=parseInt(this.search_results.css("maxHeight"),10),w=this.search_results.scrollTop(),y=b+w,f=this.result_highlight.position().top+this.search_results.scrollTop(),d=f+this.result_highlight.outerHeight(),d>=y)return this.search_results.scrollTop(d-b>0?d-b:0);if(f<w)return this.search_results.scrollTop(f)}},a.prototype.result_clear_highlight=function(){return this.result_highlight&&this.result_highlight.removeClass("highlighted"),this.result_highlight=null},a.prototype.results_show=function(){return this.is_multiple&&this.max_selected_options<=this.choices_count()?(this.form_field_jq.trigger("chosen:maxselected",{chosen:this}),!1):(this.container.addClass("chosen-with-drop"),this.results_showing=!0,this.search_field.focus(),this.search_field.val(this.get_search_field_value()),this.winnow_results(),this.form_field_jq.trigger("chosen:showing_dropdown",{chosen:this}))},a.prototype.update_results_content=function(c){return this.search_results.html(c)},a.prototype.results_hide=function(){return this.results_showing&&(this.result_clear_highlight(),this.container.removeClass("chosen-with-drop"),this.form_field_jq.trigger("chosen:hiding_dropdown",{chosen:this})),this.results_showing=!1},a.prototype.set_tab_index=function(c){var d;if(this.form_field.tabIndex)return d=this.form_field.tabIndex,this.form_field.tabIndex=-1,this.search_field[0].tabIndex=d},a.prototype.set_label_behavior=function(){if(this.form_field_label=this.form_field_jq.parents("label"),!this.form_field_label.length&&this.form_field.id.length&&(this.form_field_label=t("label[for='"+this.form_field.id+"']")),this.form_field_label.length>0)return this.form_field_label.on("click.chosen",this.label_click_handler)},a.prototype.show_search_field_default=function(){return this.is_multiple&&this.choices_count()<1&&!this.active_field?(this.search_field.val(this.default_text),this.search_field.addClass("default")):(this.search_field.val(""),this.search_field.removeClass("default"))},a.prototype.search_results_mouseup=function(c){var d;if(d=t(c.target).hasClass("active-result")?t(c.target):t(c.target).parents(".active-result").first(),d.length)return this.result_highlight=d,this.result_select(c),this.search_field.focus()},a.prototype.search_results_mouseover=function(c){var d;if(d=t(c.target).hasClass("active-result")?t(c.target):t(c.target).parents(".active-result").first(),d)return this.result_do_highlight(d)},a.prototype.search_results_mouseout=function(c){if(t(c.target).hasClass("active-result")||t(c.target).parents(".active-result").first())return this.result_clear_highlight()},a.prototype.choice_build=function(c){var d,f;return d=t("<li />",{class:"search-choice"}).html("<span>"+this.choice_label(c)+"</span>"),c.disabled?d.addClass("search-choice-disabled"):(f=t("<a />",{class:"search-choice-close","data-option-array-index":c.array_index}),f.on("click.chosen",function(b){return function(y){return b.choice_destroy_link_click(y)}}(this)),d.append(f)),this.search_container.before(d)},a.prototype.choice_destroy_link_click=function(c){if(c.preventDefault(),c.stopPropagation(),!this.is_disabled)return this.choice_destroy(t(c.target))},a.prototype.choice_destroy=function(c){if(this.result_deselect(c[0].getAttribute("data-option-array-index")))return this.active_field?this.search_field.focus():this.show_search_field_default(),this.is_multiple&&this.choices_count()>0&&this.get_search_field_value().length<1&&this.results_hide(),c.parents("li").first().remove(),this.search_field_scale()},a.prototype.results_reset=function(){if(this.reset_single_select_options(),this.form_field.options[0].selected=!0,this.single_set_selected_text(),this.show_search_field_default(),this.results_reset_cleanup(),this.trigger_form_field_change(),this.active_field)return this.results_hide()},a.prototype.results_reset_cleanup=function(){return this.current_selectedIndex=this.form_field.selectedIndex,this.selected_item.find("abbr").remove()},a.prototype.result_select=function(c){var d,f;if(this.result_highlight)return d=this.result_highlight,this.result_clear_highlight(),this.is_multiple&&this.max_selected_options<=this.choices_count()?(this.form_field_jq.trigger("chosen:maxselected",{chosen:this}),!1):(this.is_multiple?d.removeClass("active-result"):this.reset_single_select_options(),d.addClass("result-selected"),f=this.results_data[d[0].getAttribute("data-option-array-index")],f.selected=!0,this.form_field.options[f.options_index].selected=!0,this.selected_option_count=null,this.is_multiple?this.choice_build(f):this.single_set_selected_text(this.choice_label(f)),this.is_multiple&&(!this.hide_results_on_select||c.metaKey||c.ctrlKey)?c.metaKey||c.ctrlKey?this.winnow_results({skip_highlight:!0}):(this.search_field.val(""),this.winnow_results()):(this.results_hide(),this.show_search_field_default()),(this.is_multiple||this.form_field.selectedIndex!==this.current_selectedIndex)&&this.trigger_form_field_change({selected:this.form_field.options[f.options_index].value}),this.current_selectedIndex=this.form_field.selectedIndex,c.preventDefault(),this.search_field_scale())},a.prototype.single_set_selected_text=function(c){return c==null&&(c=this.default_text),c===this.default_text?this.selected_item.addClass("chosen-default"):(this.single_deselect_control_build(),this.selected_item.removeClass("chosen-default")),this.selected_item.find("span").html(c)},a.prototype.result_deselect=function(c){var d;return d=this.results_data[c],this.form_field.options[d.options_index].disabled?!1:(d.selected=!1,this.form_field.options[d.options_index].selected=!1,this.selected_option_count=null,this.result_clear_highlight(),this.results_showing&&this.winnow_results(),this.trigger_form_field_change({deselected:this.form_field.options[d.options_index].value}),this.search_field_scale(),!0)},a.prototype.single_deselect_control_build=function(){if(this.allow_single_deselect)return this.selected_item.find("abbr").length||this.selected_item.find("span").first().after('<abbr class="search-choice-close"></abbr>'),this.selected_item.addClass("chosen-single-with-deselect")},a.prototype.get_search_field_value=function(){return this.search_field.val()},a.prototype.get_search_text=function(){return t.trim(this.get_search_field_value())},a.prototype.escape_html=function(c){return t("<div/>").text(c).html()},a.prototype.winnow_results_set_highlight=function(){var c,d;if(d=this.is_multiple?[]:this.search_results.find(".result-selected.active-result"),c=d.length?d.first():this.search_results.find(".active-result").first(),c!=null)return this.result_do_highlight(c)},a.prototype.no_results=function(c){var d;return d=this.get_no_results_html(c),this.search_results.append(d),this.form_field_jq.trigger("chosen:no_results",{chosen:this})},a.prototype.no_results_clear=function(){return this.search_results.find(".no-results").remove()},a.prototype.keydown_arrow=function(){var c;if(this.results_showing&&this.result_highlight){if(c=this.result_highlight.nextAll("li.active-result").first(),c)return this.result_do_highlight(c)}else return this.results_show()},a.prototype.keyup_arrow=function(){var c;if(!this.results_showing&&!this.is_multiple)return this.results_show();if(this.result_highlight)return c=this.result_highlight.prevAll("li.active-result"),c.length?this.result_do_highlight(c.first()):(this.choices_count()>0&&this.results_hide(),this.result_clear_highlight())},a.prototype.keydown_backstroke=function(){var c;if(this.pending_backstroke)return this.choice_destroy(this.pending_backstroke.find("a").first()),this.clear_backstroke();if(c=this.search_container.siblings("li.search-choice").last(),c.length&&!c.hasClass("search-choice-disabled"))return this.pending_backstroke=c,this.single_backstroke_delete?this.keydown_backstroke():this.pending_backstroke.addClass("search-choice-focus")},a.prototype.clear_backstroke=function(){return this.pending_backstroke&&this.pending_backstroke.removeClass("search-choice-focus"),this.pending_backstroke=null},a.prototype.search_field_scale=function(){var c,d,f,b,y,w,k;if(this.is_multiple){for(y={position:"absolute",left:"-1000px",top:"-1000px",display:"none",whiteSpace:"pre"},w=["fontSize","fontStyle","fontWeight","fontFamily","lineHeight","textTransform","letterSpacing"],d=0,f=w.length;d<f;d++)b=w[d],y[b]=this.search_field.css(b);return c=t("<div />").css(y),c.text(this.get_search_field_value()),t("body").append(c),k=c.width()+25,c.remove(),this.container.is(":visible")&&(k=Math.min(this.container.outerWidth()-10,k)),this.search_field.width(k)}},a.prototype.trigger_form_field_change=function(c){return this.form_field_jq.trigger("input",c),this.form_field_jq.trigger("change",c)},a}(e)}).call(wr)});var Ve,Bn=Ce(()=>{Ve={logger:typeof console<"u"?console:void 0,WebSocket:typeof WebSocket<"u"?WebSocket:void 0}});var G,St=Ce(()=>{Bn();G={log(...t){this.enabled&&(t.push(Date.now()),Ve.logger.log("[ActionCable]",...t))}}});var Ut,Dn,zt,On,Oi=Ce(()=>{St();Ut=()=>new Date().getTime(),Dn=t=>(Ut()-t)/1e3,zt=class{constructor(e){this.visibilityDidChange=this.visibilityDidChange.bind(this),this.connection=e,this.reconnectAttempts=0}start(){this.isRunning()||(this.startedAt=Ut(),delete this.stoppedAt,this.startPolling(),addEventListener("visibilitychange",this.visibilityDidChange),G.log(`ConnectionMonitor started. stale threshold = ${this.constructor.staleThreshold} s`))}stop(){this.isRunning()&&(this.stoppedAt=Ut(),this.stopPolling(),removeEventListener("visibilitychange",this.visibilityDidChange),G.log("ConnectionMonitor stopped"))}isRunning(){return this.startedAt&&!this.stoppedAt}recordPing(){this.pingedAt=Ut()}recordConnect(){this.reconnectAttempts=0,this.recordPing(),delete this.disconnectedAt,G.log("ConnectionMonitor recorded connect")}recordDisconnect(){this.disconnectedAt=Ut(),G.log("ConnectionMonitor recorded disconnect")}startPolling(){this.stopPolling(),this.poll()}stopPolling(){clearTimeout(this.pollTimeout)}poll(){this.pollTimeout=setTimeout(()=>{this.reconnectIfStale(),this.poll()},this.getPollInterval())}getPollInterval(){let{staleThreshold:e,reconnectionBackoffRate:n}=this.constructor,r=Math.pow(1+n,Math.min(this.reconnectAttempts,10)),o=(this.reconnectAttempts===0?1:n)*Math.random();return e*1e3*r*(1+o)}reconnectIfStale(){this.connectionIsStale()&&(G.log(`ConnectionMonitor detected stale connection. reconnectAttempts = ${this.reconnectAttempts}, time stale = ${Dn(this.refreshedAt)} s, stale threshold = ${this.constructor.staleThreshold} s`),this.reconnectAttempts++,this.disconnectedRecently()?G.log(`ConnectionMonitor skipping reopening recent disconnect. time disconnected = ${Dn(this.disconnectedAt)} s`):(G.log("ConnectionMonitor reopening"),this.connection.reopen()))}get refreshedAt(){return this.pingedAt?this.pingedAt:this.startedAt}connectionIsStale(){return Dn(this.refreshedAt)>this.constructor.staleThreshold}disconnectedRecently(){return this.disconnectedAt&&Dn(this.disconnectedAt)<this.constructor.staleThreshold}visibilityDidChange(){document.visibilityState==="visible"&&setTimeout(()=>{(this.connectionIsStale()||!this.connection.isOpen())&&(G.log(`ConnectionMonitor reopening stale connection on visibilitychange. visibilityState = ${document.visibilityState}`),this.connection.reopen())},200)}};zt.staleThreshold=6;zt.reconnectionBackoffRate=.15;On=zt});var Jt,Fi=Ce(()=>{Jt={message_types:{welcome:"welcome",disconnect:"disconnect",ping:"ping",confirmation:"confirm_subscription",rejection:"reject_subscription"},disconnect_reasons:{unauthorized:"unauthorized",invalid_request:"invalid_request",server_restart:"server_restart",remote:"remote"},default_mount_path:"/cable",protocols:["actioncable-v1-json","actioncable-unsupported"]}});var Yt,Hi,qa,es,Xt,Fn,Ni=Ce(()=>{Bn();Oi();Fi();St();({message_types:Yt,protocols:Hi}=Jt),qa=Hi.slice(0,Hi.length-1),es=[].indexOf,Xt=class{constructor(e){this.open=this.open.bind(this),this.consumer=e,this.subscriptions=this.consumer.subscriptions,this.monitor=new On(this),this.disconnected=!0}send(e){return this.isOpen()?(this.webSocket.send(JSON.stringify(e)),!0):!1}open(){if(this.isActive())return G.log(`Attempted to open WebSocket, but existing socket is ${this.getState()}`),!1;{let e=[...Hi,...this.consumer.subprotocols||[]];return G.log(`Opening WebSocket, current state is ${this.getState()}, subprotocols: ${e}`),this.webSocket&&this.uninstallEventHandlers(),this.webSocket=new Ve.WebSocket(this.consumer.url,e),this.installEventHandlers(),this.monitor.start(),!0}}close({allowReconnect:e}={allowReconnect:!0}){if(e||this.monitor.stop(),this.isOpen())return this.webSocket.close()}reopen(){if(G.log(`Reopening WebSocket, current state is ${this.getState()}`),this.isActive())try{return this.close()}catch(e){G.log("Failed to reopen WebSocket",e)}finally{G.log(`Reopening WebSocket in ${this.constructor.reopenDelay}ms`),setTimeout(this.open,this.constructor.reopenDelay)}else return this.open()}getProtocol(){if(this.webSocket)return this.webSocket.protocol}isOpen(){return this.isState("open")}isActive(){return this.isState("open","connecting")}triedToReconnect(){return this.monitor.reconnectAttempts>0}isProtocolSupported(){return es.call(qa,this.getProtocol())>=0}isState(...e){return es.call(e,this.getState())>=0}getState(){if(this.webSocket){for(let e in Ve.WebSocket)if(Ve.WebSocket[e]===this.webSocket.readyState)return e.toLowerCase()}return null}installEventHandlers(){for(let e in this.events){let n=this.events[e].bind(this);this.webSocket[`on${e}`]=n}}uninstallEventHandlers(){for(let e in this.events)this.webSocket[`on${e}`]=function(){}}};Xt.reopenDelay=500;Xt.prototype.events={message(t){if(!this.isProtocolSupported())return;let{identifier:e,message:n,reason:r,reconnect:s,type:o}=JSON.parse(t.data);switch(o){case Yt.welcome:return this.triedToReconnect()&&(this.reconnectAttempted=!0),this.monitor.recordConnect(),this.subscriptions.reload();case Yt.disconnect:return G.log(`Disconnecting. Reason: ${r}`),this.close({allowReconnect:s});case Yt.ping:return this.monitor.recordPing();case Yt.confirmation:return this.subscriptions.confirmSubscription(e),this.reconnectAttempted?(this.reconnectAttempted=!1,this.subscriptions.notify(e,"connected",{reconnected:!0})):this.subscriptions.notify(e,"connected",{reconnected:!1});case Yt.rejection:return this.subscriptions.reject(e);default:return this.subscriptions.notify(e,"received",n)}},open(){if(G.log(`WebSocket onopen event, using '${this.getProtocol()}' subprotocol`),this.disconnected=!1,!this.isProtocolSupported())return G.log("Protocol is unsupported. Stopping monitor and disconnecting."),this.close({allowReconnect:!1})},close(t){if(G.log("WebSocket onclose event"),!this.disconnected)return this.disconnected=!0,this.monitor.recordDisconnect(),this.subscriptions.notifyAll("disconnected",{willAttemptReconnect:this.monitor.isRunning()})},error(){G.log("WebSocket onerror event")}};Fn=Xt});var La,Ze,Vi=Ce(()=>{La=function(t,e){if(e!=null)for(let n in e){let r=e[n];t[n]=r}return t},Ze=class{constructor(e,n={},r){this.consumer=e,this.identifier=JSON.stringify(n),La(this,r)}perform(e,n={}){return n.action=e,this.send(n)}send(e){return this.consumer.send({command:"message",identifier:this.identifier,data:JSON.stringify(e)})}unsubscribe(){return this.consumer.subscriptions.remove(this)}}});var Wi,Hn,Ui=Ce(()=>{St();Wi=class{constructor(e){this.subscriptions=e,this.pendingSubscriptions=[]}guarantee(e){this.pendingSubscriptions.indexOf(e)==-1?(G.log(`SubscriptionGuarantor guaranteeing ${e.identifier}`),this.pendingSubscriptions.push(e)):G.log(`SubscriptionGuarantor already guaranteeing ${e.identifier}`),this.startGuaranteeing()}forget(e){G.log(`SubscriptionGuarantor forgetting ${e.identifier}`),this.pendingSubscriptions=this.pendingSubscriptions.filter(n=>n!==e)}startGuaranteeing(){this.stopGuaranteeing(),this.retrySubscribing()}stopGuaranteeing(){clearTimeout(this.retryTimeout)}retrySubscribing(){this.retryTimeout=setTimeout(()=>{this.subscriptions&&typeof this.subscriptions.subscribe=="function"&&this.pendingSubscriptions.map(e=>{G.log(`SubscriptionGuarantor resubscribing ${e.identifier}`),this.subscriptions.subscribe(e)})},500)}},Hn=Wi});var et,zi=Ce(()=>{Vi();Ui();St();et=class{constructor(e){this.consumer=e,this.guarantor=new Hn(this),this.subscriptions=[]}create(e,n){let r=e,s=typeof r=="object"?r:{channel:r},o=new Ze(this.consumer,s,n);return this.add(o)}add(e){return this.subscriptions.push(e),this.consumer.ensureActiveConnection(),this.notify(e,"initialized"),this.subscribe(e),e}remove(e){return this.forget(e),this.findAll(e.identifier).length||this.sendCommand(e,"unsubscribe"),e}reject(e){return this.findAll(e).map(n=>(this.forget(n),this.notify(n,"rejected"),n))}forget(e){return this.guarantor.forget(e),this.subscriptions=this.subscriptions.filter(n=>n!==e),e}findAll(e){return this.subscriptions.filter(n=>n.identifier===e)}reload(){return this.subscriptions.map(e=>this.subscribe(e))}notifyAll(e,...n){return this.subscriptions.map(r=>this.notify(r,e,...n))}notify(e,n,...r){let s;return typeof e=="string"?s=this.findAll(e):s=[e],s.map(o=>typeof o[n]=="function"?o[n](...r):void 0)}subscribe(e){this.sendCommand(e,"subscribe")&&this.guarantor.guarantee(e)}confirmSubscription(e){G.log(`Subscription confirmed ${e}`),this.findAll(e).map(n=>this.guarantor.forget(n))}sendCommand(e,n){let{identifier:r}=e;return this.consumer.send({command:n,identifier:r})}}});function Ji(t){if(typeof t=="function"&&(t=t()),t&&!/^wss?:/i.test(t)){let e=document.createElement("a");return e.href=t,e.href=e.href,e.protocol=e.protocol.replace("http","ws"),e.href}else return t}var Et,ts=Ce(()=>{Ni();zi();Et=class{constructor(e){this._url=e,this.subscriptions=new et(this),this.connection=new Fn(this),this.subprotocols=[]}get url(){return Ji(this._url)}send(e){return this.connection.send(e)}connect(){return this.connection.open()}disconnect(){return this.connection.close({allowReconnect:!1})}ensureActiveConnection(){if(!this.connection.isActive())return this.connection.open()}addSubProtocol(e){this.subprotocols=[...this.subprotocols,e]}}});var is={};yr(is,{Connection:()=>Fn,ConnectionMonitor:()=>On,Consumer:()=>Et,INTERNAL:()=>Jt,Subscription:()=>Ze,SubscriptionGuarantor:()=>Hn,Subscriptions:()=>et,adapters:()=>Ve,createConsumer:()=>Aa,createWebSocketURL:()=>Ji,getConfig:()=>ns,logger:()=>G});function Aa(t=ns("url")||Jt.default_mount_path){return new Et(t)}function ns(t){let e=document.head.querySelector(`meta[name='action-cable-${t}']`);if(e)return e.getAttribute("content")}var rs=Ce(()=>{Ni();Oi();ts();Fi();Vi();zi();Ui();Bn();St()});var cs=vr((Kt,Xi)=>{(function(e,n){typeof Kt=="object"&&typeof Xi=="object"?Xi.exports=n():typeof define=="function"&&define.amd?define([],n):typeof Kt=="object"?Kt.ClipboardJS=n():e.ClipboardJS=n()})(Kt,function(){return function(){var t={686:function(r,s,o){"use strict";o.d(s,{default:function(){return A}});var u=o(279),l=o.n(u),a=o(370),c=o.n(a),d=o(817),f=o.n(d);function b(E){try{return document.execCommand(E)}catch{return!1}}var y=function(_){var L=f()(_);return b("cut"),L},w=y;function k(E){var _=document.documentElement.getAttribute("dir")==="rtl",L=document.createElement("textarea");L.style.fontSize="12pt",L.style.border="0",L.style.padding="0",L.style.margin="0",L.style.position="absolute",L.style[_?"right":"left"]="-9999px";var x=window.pageYOffset||document.documentElement.scrollTop;return L.style.top="".concat(x,"px"),L.setAttribute("readonly",""),L.value=E,L}var C=function(_,L){var x=k(_);L.container.appendChild(x);var P=f()(x);return b("copy"),x.remove(),P},j=function(_){var L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{container:document.body},x="";return typeof _=="string"?x=C(_,L):_ instanceof HTMLInputElement&&!["text","search","url","tel","password"].includes(_?.type)?x=C(_.value,L):(x=f()(_),b("copy")),x},B=j;function M(E){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?M=function(L){return typeof L}:M=function(L){return L&&typeof Symbol=="function"&&L.constructor===Symbol&&L!==Symbol.prototype?"symbol":typeof L},M(E)}var p=function(){var _=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},L=_.action,x=L===void 0?"copy":L,P=_.container,O=_.target,U=_.text;if(x!=="copy"&&x!=="cut")throw new Error('Invalid "action" value, use either "copy" or "cut"');if(O!==void 0)if(O&&M(O)==="object"&&O.nodeType===1){if(x==="copy"&&O.hasAttribute("disabled"))throw new Error('Invalid "target" attribute. Please use "readonly" instead of "disabled" attribute');if(x==="cut"&&(O.hasAttribute("readonly")||O.hasAttribute("disabled")))throw new Error(`Invalid "target" attribute. You can't cut text from elements with "readonly" or "disabled" attributes`)}else throw new Error('Invalid "target" value, use a valid Element');if(U)return B(U,{container:P});if(O)return x==="cut"?w(O):B(O,{container:P})},D=p;function q(E){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?q=function(L){return typeof L}:q=function(L){return L&&typeof Symbol=="function"&&L.constructor===Symbol&&L!==Symbol.prototype?"symbol":typeof L},q(E)}function T(E,_){if(!(E instanceof _))throw new TypeError("Cannot call a class as a function")}function F(E,_){for(var L=0;L<_.length;L++){var x=_[L];x.enumerable=x.enumerable||!1,x.configurable=!0,"value"in x&&(x.writable=!0),Object.defineProperty(E,x.key,x)}}function N(E,_,L){return _&&F(E.prototype,_),L&&F(E,L),E}function V(E,_){if(typeof _!="function"&&_!==null)throw new TypeError("Super expression must either be null or a function");E.prototype=Object.create(_&&_.prototype,{constructor:{value:E,writable:!0,configurable:!0}}),_&&J(E,_)}function J(E,_){return J=Object.setPrototypeOf||function(x,P){return x.__proto__=P,x},J(E,_)}function z(E){var _=I();return function(){var x=m(E),P;if(_){var O=m(this).constructor;P=Reflect.construct(x,arguments,O)}else P=x.apply(this,arguments);return W(this,P)}}function W(E,_){return _&&(q(_)==="object"||typeof _=="function")?_:K(E)}function K(E){if(E===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return E}function I(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function m(E){return m=Object.setPrototypeOf?Object.getPrototypeOf:function(L){return L.__proto__||Object.getPrototypeOf(L)},m(E)}function g(E,_){var L="data-clipboard-".concat(E);if(_.hasAttribute(L))return _.getAttribute(L)}var v=function(E){V(L,E);var _=z(L);function L(x,P){var O;return T(this,L),O=_.call(this),O.resolveOptions(P),O.listenClick(x),O}return N(L,[{key:"resolveOptions",value:function(){var P=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.action=typeof P.action=="function"?P.action:this.defaultAction,this.target=typeof P.target=="function"?P.target:this.defaultTarget,this.text=typeof P.text=="function"?P.text:this.defaultText,this.container=q(P.container)==="object"?P.container:document.body}},{key:"listenClick",value:function(P){var O=this;this.listener=c()(P,"click",function(U){return O.onClick(U)})}},{key:"onClick",value:function(P){var O=P.delegateTarget||P.currentTarget,U=this.action(O)||"copy",ie=D({action:U,container:this.container,target:this.target(O),text:this.text(O)});this.emit(ie?"success":"error",{action:U,text:ie,trigger:O,clearSelection:function(){O&&O.focus(),window.getSelection().removeAllRanges()}})}},{key:"defaultAction",value:function(P){return g("action",P)}},{key:"defaultTarget",value:function(P){var O=g("target",P);if(O)return document.querySelector(O)}},{key:"defaultText",value:function(P){return g("text",P)}},{key:"destroy",value:function(){this.listener.destroy()}}],[{key:"copy",value:function(P){var O=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{container:document.body};return B(P,O)}},{key:"cut",value:function(P){return w(P)}},{key:"isSupported",value:function(){var P=arguments.length>0&&arguments[0]!==void 0?arguments[0]:["copy","cut"],O=typeof P=="string"?[P]:P,U=!!document.queryCommandSupported;return O.forEach(function(ie){U=U&&!!document.queryCommandSupported(ie)}),U}}]),L}(l()),A=v},828:function(r){var s=9;if(typeof Element<"u"&&!Element.prototype.matches){var o=Element.prototype;o.matches=o.matchesSelector||o.mozMatchesSelector||o.msMatchesSelector||o.oMatchesSelector||o.webkitMatchesSelector}function u(l,a){for(;l&&l.nodeType!==s;){if(typeof l.matches=="function"&&l.matches(a))return l;l=l.parentNode}}r.exports=u},438:function(r,s,o){var u=o(828);function l(d,f,b,y,w){var k=c.apply(this,arguments);return d.addEventListener(b,k,w),{destroy:function(){d.removeEventListener(b,k,w)}}}function a(d,f,b,y,w){return typeof d.addEventListener=="function"?l.apply(null,arguments):typeof b=="function"?l.bind(null,document).apply(null,arguments):(typeof d=="string"&&(d=document.querySelectorAll(d)),Array.prototype.map.call(d,function(k){return l(k,f,b,y,w)}))}function c(d,f,b,y){return function(w){w.delegateTarget=u(w.target,f),w.delegateTarget&&y.call(d,w)}}r.exports=a},879:function(r,s){s.node=function(o){return o!==void 0&&o instanceof HTMLElement&&o.nodeType===1},s.nodeList=function(o){var u=Object.prototype.toString.call(o);return o!==void 0&&(u==="[object NodeList]"||u==="[object HTMLCollection]")&&"length"in o&&(o.length===0||s.node(o[0]))},s.string=function(o){return typeof o=="string"||o instanceof String},s.fn=function(o){var u=Object.prototype.toString.call(o);return u==="[object Function]"}},370:function(r,s,o){var u=o(879),l=o(438);function a(b,y,w){if(!b&&!y&&!w)throw new Error("Missing required arguments");if(!u.string(y))throw new TypeError("Second argument must be a String");if(!u.fn(w))throw new TypeError("Third argument must be a Function");if(u.node(b))return c(b,y,w);if(u.nodeList(b))return d(b,y,w);if(u.string(b))return f(b,y,w);throw new TypeError("First argument must be a String, HTMLElement, HTMLCollection, or NodeList")}function c(b,y,w){return b.addEventListener(y,w),{destroy:function(){b.removeEventListener(y,w)}}}function d(b,y,w){return Array.prototype.forEach.call(b,function(k){k.addEventListener(y,w)}),{destroy:function(){Array.prototype.forEach.call(b,function(k){k.removeEventListener(y,w)})}}}function f(b,y,w){return l(document.body,b,y,w)}r.exports=a},817:function(r){function s(o){var u;if(o.nodeName==="SELECT")o.focus(),u=o.value;else if(o.nodeName==="INPUT"||o.nodeName==="TEXTAREA"){var l=o.hasAttribute("readonly");l||o.setAttribute("readonly",""),o.select(),o.setSelectionRange(0,o.value.length),l||o.removeAttribute("readonly"),u=o.value}else{o.hasAttribute("contenteditable")&&o.focus();var a=window.getSelection(),c=document.createRange();c.selectNodeContents(o),a.removeAllRanges(),a.addRange(c),u=a.toString()}return u}r.exports=s},279:function(r){function s(){}s.prototype={on:function(o,u,l){var a=this.e||(this.e={});return(a[o]||(a[o]=[])).push({fn:u,ctx:l}),this},once:function(o,u,l){var a=this;function c(){a.off(o,c),u.apply(l,arguments)}return c._=u,this.on(o,c,l)},emit:function(o){var u=[].slice.call(arguments,1),l=((this.e||(this.e={}))[o]||[]).slice(),a=0,c=l.length;for(a;a<c;a++)l[a].fn.apply(l[a].ctx,u);return this},off:function(o,u){var l=this.e||(this.e={}),a=l[o],c=[];if(a&&u)for(var d=0,f=a.length;d<f;d++)a[d].fn!==u&&a[d].fn._!==u&&c.push(a[d]);return c.length?l[o]=c:delete l[o],this}},r.exports=s,r.exports.TinyEmitter=s}},e={};function n(r){if(e[r])return e[r].exports;var s=e[r]={exports:{}};return t[r](s,s.exports,n),s.exports}return function(){n.n=function(r){var s=r&&r.__esModule?function(){return r.default}:function(){return r};return n.d(s,{a:s}),s}}(),function(){n.d=function(r,s){for(var o in s)n.o(s,o)&&!n.o(r,o)&&Object.defineProperty(r,o,{enumerable:!0,get:s[o]})}}(),function(){n.o=function(r,s){return Object.prototype.hasOwnProperty.call(r,s)}}(),n(686)}().default})});window.ql={};function pe(t){return t.status>=200&&t.status<300?Promise.resolve(t):Promise.reject(t)}function ge(t){return t.json()}function lo(t){return t.text()}ql.getJson=function(t){return fetch(t,{credentials:"include"}).then(pe).then(ge)};ql.getHtml=function(t){return fetch(t,{credentials:"include"}).then(pe).then(lo)};ql.Poller=function(t,e,n,r){this.continuePolling=!0,this.path=t,this.timeout=e,this.success=n,this.failure=r||this.defaultFailure,this.start=function s(){this.continuePolling&&ql.getJson(this.path).then(this.success).then(()=>setTimeout(s.bind(this),this.timeout)).catch(o=>{console.log(o),this.stop(),this.failure(o)})},this.once=function(){ql.getJson(this.path).then(this.success).catch(this.failure)},this.stop=function(){this.continuePolling=!1},this.defaultFailure=function(s){console.log("Request failed",s)}};ql.events={};ql.subscribe=function(t,e){ql.events[t]=ql.events[t]||[];function n(){ql.events[t]=ql.events[t].filter(r=>r!==e)}return n(),ql.events[t].push(e),{unsubscribe:n}};ql.publish=function(t,e){ql.events[t]&&ql.events[t].forEach(function(n){n.call(this,e)})};ql.debounce=function(t,e=20,n=!0){let r;return function(){let s=this,o=arguments,u=function(){r=null,n||t.apply(s,o)},l=n&&!r;clearTimeout(r),r=setTimeout(u,e),l&&t.apply(s,o)}};ql.showFlash=function(t,e){let n=$("#flash-sibling-before"),r=$('<div id="flash-alert" class="alert" role="alert"></div>');t==="notice"?r.addClass("alert-success"):r.addClass("alert-error");let s=$('<a class="alert__close" data-dismiss="alert" aria-labelledby="flash-alert"><ql-icon icon="close" /></a>'),o=$('<iframe class="l-ie-iframe-fix" tabindex="-1"></iframe>');r.text(e),r.append(s),r.append(o),$(".alert").remove(),r.insertAfter(n)};ql.moveFlash=function(t){$(()=>$("#flash-sibling-before").insertAfter(t))};$.widget("custom.userAutocomplete",$.ui.autocomplete,{_renderItem:function(t,e){return $("<li>").attr("data-value",e.value).append(ql.renderAutocompleteUser(e)).appendTo(t)}});ql.renderAutocompleteUser=function(t){return t.value==="newUser"?`<div class="add-new-user js-add-new-user">
      <i class="material-icons">add</i> Add New User
    </div>`:`<div class='autocomplete--user'>
      <img src='https://secure.gravatar.com/avatar/${t.label.gravatar_hash}.jpg?s=80&d=mm'/>
      <div>
        ${t.label.email}
        <span>${t.label.first_name} ${t.label.last_name}</span>
      </div>
    </div>`};ql.autocomplete=function(){function t(){$(".js-user-autocomplete").userAutocomplete({source:e}),$(document).on("nested:fieldAdded",n=>{n.field.find(".js-user-autocomplete").userAutocomplete({source:e})})}function e(n,r){let s=`?q[${this.element[0].dataset.query}]=${n.term}`;ql.getJson(this.element[0].dataset.autocomplete+s).then(o=>{r(o.map(u=>({label:u,value:u.email})))})}return{init:t,source:e}}();ql.setCookie=function(t,e,n){let r=new Date;r.setTime(r.getTime()+n*24*60*60*1e3);let s="expires="+r.toUTCString();document.cookie=t+"="+e+";"+s+";path=/"};ql.track=function(t,e={}){typeof gtag<"u"&&gtag("event",t,e)};var Nf=_r(Sr());var wn={logger:typeof console<"u"?console:void 0,WebSocket:typeof WebSocket<"u"?WebSocket:void 0},ee={log(...t){this.enabled&&(t.push(Date.now()),wn.logger.log("[ActionCable]",...t))}},jt=()=>new Date().getTime(),_n=t=>(jt()-t)/1e3,Bt=class{constructor(e){this.visibilityDidChange=this.visibilityDidChange.bind(this),this.connection=e,this.reconnectAttempts=0}start(){this.isRunning()||(this.startedAt=jt(),delete this.stoppedAt,this.startPolling(),addEventListener("visibilitychange",this.visibilityDidChange),ee.log(`ConnectionMonitor started. stale threshold = ${this.constructor.staleThreshold} s`))}stop(){this.isRunning()&&(this.stoppedAt=jt(),this.stopPolling(),removeEventListener("visibilitychange",this.visibilityDidChange),ee.log("ConnectionMonitor stopped"))}isRunning(){return this.startedAt&&!this.stoppedAt}recordPing(){this.pingedAt=jt()}recordConnect(){this.reconnectAttempts=0,this.recordPing(),delete this.disconnectedAt,ee.log("ConnectionMonitor recorded connect")}recordDisconnect(){this.disconnectedAt=jt(),ee.log("ConnectionMonitor recorded disconnect")}startPolling(){this.stopPolling(),this.poll()}stopPolling(){clearTimeout(this.pollTimeout)}poll(){this.pollTimeout=setTimeout(()=>{this.reconnectIfStale(),this.poll()},this.getPollInterval())}getPollInterval(){let{staleThreshold:e,reconnectionBackoffRate:n}=this.constructor,r=Math.pow(1+n,Math.min(this.reconnectAttempts,10)),o=(this.reconnectAttempts===0?1:n)*Math.random();return e*1e3*r*(1+o)}reconnectIfStale(){this.connectionIsStale()&&(ee.log(`ConnectionMonitor detected stale connection. reconnectAttempts = ${this.reconnectAttempts}, time stale = ${_n(this.refreshedAt)} s, stale threshold = ${this.constructor.staleThreshold} s`),this.reconnectAttempts++,this.disconnectedRecently()?ee.log(`ConnectionMonitor skipping reopening recent disconnect. time disconnected = ${_n(this.disconnectedAt)} s`):(ee.log("ConnectionMonitor reopening"),this.connection.reopen()))}get refreshedAt(){return this.pingedAt?this.pingedAt:this.startedAt}connectionIsStale(){return _n(this.refreshedAt)>this.constructor.staleThreshold}disconnectedRecently(){return this.disconnectedAt&&_n(this.disconnectedAt)<this.constructor.staleThreshold}visibilityDidChange(){document.visibilityState==="visible"&&setTimeout(()=>{(this.connectionIsStale()||!this.connection.isOpen())&&(ee.log(`ConnectionMonitor reopening stale connection on visibilitychange. visibilityState = ${document.visibilityState}`),this.connection.reopen())},200)}};Bt.staleThreshold=6;Bt.reconnectionBackoffRate=.15;var qr={message_types:{welcome:"welcome",disconnect:"disconnect",ping:"ping",confirmation:"confirm_subscription",rejection:"reject_subscription"},disconnect_reasons:{unauthorized:"unauthorized",invalid_request:"invalid_request",server_restart:"server_restart",remote:"remote"},default_mount_path:"/cable",protocols:["actioncable-v1-json","actioncable-unsupported"]},{message_types:Mt,protocols:ti}=qr,co=ti.slice(0,ti.length-1),Er=[].indexOf,Dt=class{constructor(e){this.open=this.open.bind(this),this.consumer=e,this.subscriptions=this.consumer.subscriptions,this.monitor=new Bt(this),this.disconnected=!0}send(e){return this.isOpen()?(this.webSocket.send(JSON.stringify(e)),!0):!1}open(){if(this.isActive())return ee.log(`Attempted to open WebSocket, but existing socket is ${this.getState()}`),!1;{let e=[...ti,...this.consumer.subprotocols||[]];return ee.log(`Opening WebSocket, current state is ${this.getState()}, subprotocols: ${e}`),this.webSocket&&this.uninstallEventHandlers(),this.webSocket=new wn.WebSocket(this.consumer.url,e),this.installEventHandlers(),this.monitor.start(),!0}}close({allowReconnect:e}={allowReconnect:!0}){if(e||this.monitor.stop(),this.isOpen())return this.webSocket.close()}reopen(){if(ee.log(`Reopening WebSocket, current state is ${this.getState()}`),this.isActive())try{return this.close()}catch(e){ee.log("Failed to reopen WebSocket",e)}finally{ee.log(`Reopening WebSocket in ${this.constructor.reopenDelay}ms`),setTimeout(this.open,this.constructor.reopenDelay)}else return this.open()}getProtocol(){if(this.webSocket)return this.webSocket.protocol}isOpen(){return this.isState("open")}isActive(){return this.isState("open","connecting")}triedToReconnect(){return this.monitor.reconnectAttempts>0}isProtocolSupported(){return Er.call(co,this.getProtocol())>=0}isState(...e){return Er.call(e,this.getState())>=0}getState(){if(this.webSocket){for(let e in wn.WebSocket)if(wn.WebSocket[e]===this.webSocket.readyState)return e.toLowerCase()}return null}installEventHandlers(){for(let e in this.events){let n=this.events[e].bind(this);this.webSocket[`on${e}`]=n}}uninstallEventHandlers(){for(let e in this.events)this.webSocket[`on${e}`]=function(){}}};Dt.reopenDelay=500;Dt.prototype.events={message(t){if(!this.isProtocolSupported())return;let{identifier:e,message:n,reason:r,reconnect:s,type:o}=JSON.parse(t.data);switch(o){case Mt.welcome:return this.triedToReconnect()&&(this.reconnectAttempted=!0),this.monitor.recordConnect(),this.subscriptions.reload();case Mt.disconnect:return ee.log(`Disconnecting. Reason: ${r}`),this.close({allowReconnect:s});case Mt.ping:return this.monitor.recordPing();case Mt.confirmation:return this.subscriptions.confirmSubscription(e),this.reconnectAttempted?(this.reconnectAttempted=!1,this.subscriptions.notify(e,"connected",{reconnected:!0})):this.subscriptions.notify(e,"connected",{reconnected:!1});case Mt.rejection:return this.subscriptions.reject(e);default:return this.subscriptions.notify(e,"received",n)}},open(){if(ee.log(`WebSocket onopen event, using '${this.getProtocol()}' subprotocol`),this.disconnected=!1,!this.isProtocolSupported())return ee.log("Protocol is unsupported. Stopping monitor and disconnecting."),this.close({allowReconnect:!1})},close(t){if(ee.log("WebSocket onclose event"),!this.disconnected)return this.disconnected=!0,this.monitor.recordDisconnect(),this.subscriptions.notifyAll("disconnected",{willAttemptReconnect:this.monitor.isRunning()})},error(){ee.log("WebSocket onerror event")}};var uo=function(t,e){if(e!=null)for(let n in e){let r=e[n];t[n]=r}return t},ni=class{constructor(e,n={},r){this.consumer=e,this.identifier=JSON.stringify(n),uo(this,r)}perform(e,n={}){return n.action=e,this.send(n)}send(e){return this.consumer.send({command:"message",identifier:this.identifier,data:JSON.stringify(e)})}unsubscribe(){return this.consumer.subscriptions.remove(this)}},ii=class{constructor(e){this.subscriptions=e,this.pendingSubscriptions=[]}guarantee(e){this.pendingSubscriptions.indexOf(e)==-1?(ee.log(`SubscriptionGuarantor guaranteeing ${e.identifier}`),this.pendingSubscriptions.push(e)):ee.log(`SubscriptionGuarantor already guaranteeing ${e.identifier}`),this.startGuaranteeing()}forget(e){ee.log(`SubscriptionGuarantor forgetting ${e.identifier}`),this.pendingSubscriptions=this.pendingSubscriptions.filter(n=>n!==e)}startGuaranteeing(){this.stopGuaranteeing(),this.retrySubscribing()}stopGuaranteeing(){clearTimeout(this.retryTimeout)}retrySubscribing(){this.retryTimeout=setTimeout(()=>{this.subscriptions&&typeof this.subscriptions.subscribe=="function"&&this.pendingSubscriptions.map(e=>{ee.log(`SubscriptionGuarantor resubscribing ${e.identifier}`),this.subscriptions.subscribe(e)})},500)}},ri=class{constructor(e){this.consumer=e,this.guarantor=new ii(this),this.subscriptions=[]}create(e,n){let r=e,s=typeof r=="object"?r:{channel:r},o=new ni(this.consumer,s,n);return this.add(o)}add(e){return this.subscriptions.push(e),this.consumer.ensureActiveConnection(),this.notify(e,"initialized"),this.subscribe(e),e}remove(e){return this.forget(e),this.findAll(e.identifier).length||this.sendCommand(e,"unsubscribe"),e}reject(e){return this.findAll(e).map(n=>(this.forget(n),this.notify(n,"rejected"),n))}forget(e){return this.guarantor.forget(e),this.subscriptions=this.subscriptions.filter(n=>n!==e),e}findAll(e){return this.subscriptions.filter(n=>n.identifier===e)}reload(){return this.subscriptions.map(e=>this.subscribe(e))}notifyAll(e,...n){return this.subscriptions.map(r=>this.notify(r,e,...n))}notify(e,n,...r){let s;return typeof e=="string"?s=this.findAll(e):s=[e],s.map(o=>typeof o[n]=="function"?o[n](...r):void 0)}subscribe(e){this.sendCommand(e,"subscribe")&&this.guarantor.guarantee(e)}confirmSubscription(e){ee.log(`Subscription confirmed ${e}`),this.findAll(e).map(n=>this.guarantor.forget(n))}sendCommand(e,n){let{identifier:r}=e;return this.consumer.send({command:n,identifier:r})}},si=class{constructor(e){this._url=e,this.subscriptions=new ri(this),this.connection=new Dt(this),this.subprotocols=[]}get url(){return ho(this._url)}send(e){return this.connection.send(e)}connect(){return this.connection.open()}disconnect(){return this.connection.close({allowReconnect:!1})}ensureActiveConnection(){if(!this.connection.isActive())return this.connection.open()}addSubProtocol(e){this.subprotocols=[...this.subprotocols,e]}};function ho(t){if(typeof t=="function"&&(t=t()),t&&!/^wss?:/i.test(t)){let e=document.createElement("a");return e.href=t,e.href=e.href,e.protocol=e.protocol.replace("http","ws"),e.href}else return t}function Lr(t=fo("url")||qr.default_mount_path){return new si(t)}function fo(t){let e=document.head.querySelector(`meta[name='action-cable-${t}']`);if(e)return e.getAttribute("content")}window.App=window.App||{};App.cable=Lr();App.cable.subscriptions.create("PresenceChannel");var Di={};yr(Di,{FetchEnctype:()=>Oe,FetchMethod:()=>be,FetchRequest:()=>He,FetchResponse:()=>vt,FrameElement:()=>Ee,FrameLoadingStyle:()=>Xe,FrameRenderer:()=>wt,PageRenderer:()=>Qe,PageSnapshot:()=>ye,StreamActions:()=>Bi,StreamElement:()=>Pn,StreamSourceElement:()=>In,cache:()=>Ur,clearCache:()=>Gr,connectStreamSource:()=>Vt,disconnectStreamSource:()=>Wt,fetch:()=>Mi,fetchEnctypeFromString:()=>Hr,fetchMethodFromString:()=>Mn,isSafe:()=>jn,navigator:()=>zr,registerAdapter:()=>Jr,renderStreamMessage:()=>Xr,session:()=>Q,setConfirmMethod:()=>Qr,setFormMode:()=>Zr,setProgressBarDelay:()=>Kr,start:()=>ji,visit:()=>Yr});(function(t){if(typeof t.requestSubmit=="function")return;t.requestSubmit=function(r){r?(e(r,this),r.click()):(r=document.createElement("input"),r.type="submit",r.hidden=!0,this.appendChild(r),r.click(),this.removeChild(r))};function e(r,s){r instanceof HTMLElement||n(TypeError,"parameter 1 is not of type 'HTMLElement'"),r.type=="submit"||n(TypeError,"The specified element is not a submit button"),r.form==s||n(DOMException,"The specified element is not owned by this form element","NotFoundError")}function n(r,s,o){throw new r("Failed to execute 'requestSubmit' on 'HTMLFormElement': "+s+".",o)}})(HTMLFormElement.prototype);var $r=new WeakMap;function po(t){let e=t instanceof Element?t:t instanceof Node?t.parentElement:null,n=e?e.closest("input, button"):null;return n?.type=="submit"?n:null}function mo(t){let e=po(t.target);e&&e.form&&$r.set(e.form,e)}(function(){if("submitter"in Event.prototype)return;let t=window.Event.prototype;if("SubmitEvent"in window){let e=window.SubmitEvent.prototype;if(/Apple Computer/.test(navigator.vendor)&&!("submitter"in e))t=e;else return}addEventListener("click",mo,!0),Object.defineProperty(t,"submitter",{get(){if(this.type=="submit"&&this.target instanceof HTMLFormElement)return $r.get(this.target)}})})();var Xe={eager:"eager",lazy:"lazy"},Ee=class t extends HTMLElement{static delegateConstructor=void 0;loaded=Promise.resolve();static get observedAttributes(){return["disabled","loading","src"]}constructor(){super(),this.delegate=new t.delegateConstructor(this)}connectedCallback(){this.delegate.connect()}disconnectedCallback(){this.delegate.disconnect()}reload(){return this.delegate.sourceURLReloaded()}attributeChangedCallback(e){e=="loading"?this.delegate.loadingStyleChanged():e=="src"?this.delegate.sourceURLChanged():e=="disabled"&&this.delegate.disabledChanged()}get src(){return this.getAttribute("src")}set src(e){e?this.setAttribute("src",e):this.removeAttribute("src")}get refresh(){return this.getAttribute("refresh")}set refresh(e){e?this.setAttribute("refresh",e):this.removeAttribute("refresh")}get loading(){return go(this.getAttribute("loading")||"")}set loading(e){e?this.setAttribute("loading",e):this.removeAttribute("loading")}get disabled(){return this.hasAttribute("disabled")}set disabled(e){e?this.setAttribute("disabled",""):this.removeAttribute("disabled")}get autoscroll(){return this.hasAttribute("autoscroll")}set autoscroll(e){e?this.setAttribute("autoscroll",""):this.removeAttribute("autoscroll")}get complete(){return!this.delegate.isLoading}get isActive(){return this.ownerDocument===document&&!this.isPreview}get isPreview(){return this.ownerDocument?.documentElement?.hasAttribute("data-turbo-preview")}};function go(t){switch(t.toLowerCase()){case"lazy":return Xe.lazy;default:return Xe.eager}}function le(t){return new URL(t.toString(),document.baseURI)}function Ge(t){let e;if(t.hash)return t.hash.slice(1);if(e=t.href.match(/#(.*)$/))return e[1]}function Pi(t,e){let n=e?.getAttribute("formaction")||t.getAttribute("action")||t.action;return le(n)}function bo(t){return(So(t).match(/\.[^.]*$/)||[])[0]||""}function vo(t){return!!bo(t).match(/^(?:|\.(?:htm|html|xhtml|php))$/)}function yo(t,e){let n=Eo(e);return t.href===le(n).href||t.href.startsWith(n)}function De(t,e){return yo(t,e)&&vo(t)}function oi(t){let e=Ge(t);return e!=null?t.href.slice(0,-(e.length+1)):t.href}function Sn(t){return oi(t)}function _o(t,e){return le(t).href==le(e).href}function wo(t){return t.pathname.split("/").slice(1)}function So(t){return wo(t).slice(-1)[0]}function Eo(t){return qo(t.origin+t.pathname)}function qo(t){return t.endsWith("/")?t:t+"/"}var vt=class{constructor(e){this.response=e}get succeeded(){return this.response.ok}get failed(){return!this.succeeded}get clientError(){return this.statusCode>=400&&this.statusCode<=499}get serverError(){return this.statusCode>=500&&this.statusCode<=599}get redirected(){return this.response.redirected}get location(){return le(this.response.url)}get isHTML(){return this.contentType&&this.contentType.match(/^(?:text\/([^\s;,]+\b)?html|application\/xhtml\+xml)\b/)}get statusCode(){return this.response.status}get contentType(){return this.header("Content-Type")}get responseText(){return this.response.clone().text()}get responseHTML(){return this.isHTML?this.response.clone().text():Promise.resolve(void 0)}header(e){return this.response.headers.get(e)}};function Ot(t){if(t.getAttribute("data-turbo-eval")=="false")return t;{let e=document.createElement("script"),n=yt("csp-nonce");return n&&(e.nonce=n),e.textContent=t.textContent,e.async=!1,Lo(e,t),e}}function Lo(t,e){for(let{name:n,value:r}of e.attributes)t.setAttribute(n,r)}function Ao(t){let e=document.createElement("template");return e.innerHTML=t,e.content}function te(t,{target:e,cancelable:n,detail:r}={}){let s=new CustomEvent(t,{cancelable:n,bubbles:!0,composed:!0,detail:r});return e&&e.isConnected?e.dispatchEvent(s):document.documentElement.dispatchEvent(s),s}function mt(){return document.visibilityState==="hidden"?Pr():Rr()}function Rr(){return new Promise(t=>requestAnimationFrame(()=>t()))}function Pr(){return new Promise(t=>setTimeout(()=>t(),0))}function ko(){return Promise.resolve()}function Ir(t=""){return new DOMParser().parseFromString(t,"text/html")}function Mr(t,...e){let n=To(t,e).replace(/^\n/,"").split(`
`),r=n[0].match(/^\s+/),s=r?r[0].length:0;return n.map(o=>o.slice(s)).join(`
`)}function To(t,e){return t.reduce((n,r,s)=>{let o=e[s]==null?"":e[s];return n+r+o},"")}function Fe(){return Array.from({length:36}).map((t,e)=>e==8||e==13||e==18||e==23?"-":e==14?"4":e==19?(Math.floor(Math.random()*4)+8).toString(16):Math.floor(Math.random()*15).toString(16)).join("")}function qn(t,...e){for(let n of e.map(r=>r?.getAttribute(t)))if(typeof n=="string")return n;return null}function xo(t,...e){return e.some(n=>n&&n.hasAttribute(t))}function Ln(...t){for(let e of t)e.localName=="turbo-frame"&&e.setAttribute("busy",""),e.setAttribute("aria-busy","true")}function An(...t){for(let e of t)e.localName=="turbo-frame"&&e.removeAttribute("busy"),e.removeAttribute("aria-busy")}function Co(t,e=2e3){return new Promise(n=>{let r=()=>{t.removeEventListener("error",r),t.removeEventListener("load",r),n()};t.addEventListener("load",r,{once:!0}),t.addEventListener("error",r,{once:!0}),setTimeout(n,e)})}function jr(t){switch(t){case"replace":return history.replaceState;case"advance":case"restore":return history.pushState}}function $o(t){return t=="advance"||t=="replace"||t=="restore"}function Ke(...t){let e=qn("data-turbo-action",...t);return $o(e)?e:null}function Br(t){return document.querySelector(`meta[name="${t}"]`)}function yt(t){let e=Br(t);return e&&e.content}function Ro(t,e){let n=Br(t);return n||(n=document.createElement("meta"),n.setAttribute("name",t),document.head.appendChild(n)),n.setAttribute("content",e),n}function gt(t,e){if(t instanceof Element)return t.closest(e)||gt(t.assignedSlot||t.getRootNode()?.host,e)}function Ii(t){return!!t&&t.closest("[inert], :disabled, [hidden], details:not([open]), dialog:not([open])")==null&&typeof t.focus=="function"}function Dr(t){return Array.from(t.querySelectorAll("[autofocus]")).find(Ii)}async function Po(t,e){let n=e();t(),await Rr();let r=e();return[n,r]}function Io(t){if(t.hasAttribute("target")){for(let e of document.getElementsByName(t.target))if(e instanceof HTMLIFrameElement)return!1}return!0}function Mo(t){return gt(t,"a[href]:not([target^=_]):not([download])")}function Or(t){return le(t.getAttribute("href")||"")}function jo(t,e){let n=null;return(...r)=>{let s=()=>t.apply(this,r);clearTimeout(n),n=setTimeout(s,e)}}var ai=class extends Set{constructor(e){super(),this.maxSize=e}add(e){if(this.size>=this.maxSize){let r=this.values().next().value;this.delete(r)}super.add(e)}},Fr=new ai(20),Bo=window.fetch;function Mi(t,e={}){let n=new Headers(e.headers||{}),r=Fe();return Fr.add(r),n.append("X-Turbo-Request-Id",r),Bo(t,{...e,headers:n})}function Mn(t){switch(t.toLowerCase()){case"get":return be.get;case"post":return be.post;case"put":return be.put;case"patch":return be.patch;case"delete":return be.delete}}var be={get:"get",post:"post",put:"put",patch:"patch",delete:"delete"};function Hr(t){switch(t.toLowerCase()){case Oe.multipart:return Oe.multipart;case Oe.plain:return Oe.plain;default:return Oe.urlEncoded}}var Oe={urlEncoded:"application/x-www-form-urlencoded",multipart:"multipart/form-data",plain:"text/plain"},He=class{abortController=new AbortController;#e=e=>{};constructor(e,n,r,s=new URLSearchParams,o=null,u=Oe.urlEncoded){let[l,a]=Ar(le(r),n,s,u);this.delegate=e,this.url=l,this.target=o,this.fetchOptions={credentials:"same-origin",redirect:"follow",method:n,headers:{...this.defaultHeaders},body:a,signal:this.abortSignal,referrer:this.delegate.referrer?.href},this.enctype=u}get method(){return this.fetchOptions.method}set method(e){let n=this.isSafe?this.url.searchParams:this.fetchOptions.body||new FormData,r=Mn(e)||be.get;this.url.search="";let[s,o]=Ar(this.url,r,n,this.enctype);this.url=s,this.fetchOptions.body=o,this.fetchOptions.method=r}get headers(){return this.fetchOptions.headers}set headers(e){this.fetchOptions.headers=e}get body(){return this.isSafe?this.url.searchParams:this.fetchOptions.body}set body(e){this.fetchOptions.body=e}get location(){return this.url}get params(){return this.url.searchParams}get entries(){return this.body?Array.from(this.body.entries()):[]}cancel(){this.abortController.abort()}async perform(){let{fetchOptions:e}=this;this.delegate.prepareRequest(this);let n=await this.#t(e);try{this.delegate.requestStarted(this),n.detail.fetchRequest?this.response=n.detail.fetchRequest.response:this.response=Mi(this.url.href,e);let r=await this.response;return await this.receive(r)}catch(r){if(r.name!=="AbortError")throw this.#n(r)&&this.delegate.requestErrored(this,r),r}finally{this.delegate.requestFinished(this)}}async receive(e){let n=new vt(e);return te("turbo:before-fetch-response",{cancelable:!0,detail:{fetchResponse:n},target:this.target}).defaultPrevented?this.delegate.requestPreventedHandlingResponse(this,n):n.succeeded?this.delegate.requestSucceededWithResponse(this,n):this.delegate.requestFailedWithResponse(this,n),n}get defaultHeaders(){return{Accept:"text/html, application/xhtml+xml"}}get isSafe(){return jn(this.method)}get abortSignal(){return this.abortController.signal}acceptResponseType(e){this.headers.Accept=[e,this.headers.Accept].join(", ")}async#t(e){let n=new Promise(s=>this.#e=s),r=te("turbo:before-fetch-request",{cancelable:!0,detail:{fetchOptions:e,url:this.url,resume:this.#e},target:this.target});return this.url=r.detail.url,r.defaultPrevented&&await n,r}#n(e){return!te("turbo:fetch-request-error",{target:this.target,cancelable:!0,detail:{request:this,error:e}}).defaultPrevented}};function jn(t){return Mn(t)==be.get}function Ar(t,e,n,r){let s=Array.from(n).length>0?new URLSearchParams(Nr(n)):t.searchParams;return jn(e)?[Do(t,s),null]:r==Oe.urlEncoded?[t,s]:[t,n]}function Nr(t){let e=[];for(let[n,r]of t)r instanceof File||e.push([n,r]);return e}function Do(t,e){let n=new URLSearchParams(Nr(e));return t.search=n.toString(),t}var li=class{started=!1;constructor(e,n){this.delegate=e,this.element=n,this.intersectionObserver=new IntersectionObserver(this.intersect)}start(){this.started||(this.started=!0,this.intersectionObserver.observe(this.element))}stop(){this.started&&(this.started=!1,this.intersectionObserver.unobserve(this.element))}intersect=e=>{e.slice(-1)[0]?.isIntersecting&&this.delegate.elementAppearedInViewport(this.element)}},Ne=class{static contentType="text/vnd.turbo-stream.html";static wrap(e){return typeof e=="string"?new this(Ao(e)):e}constructor(e){this.fragment=Oo(e)}};function Oo(t){for(let e of t.querySelectorAll("turbo-stream")){let n=document.importNode(e,!0);for(let r of n.templateElement.content.querySelectorAll("script"))r.replaceWith(Ot(r));e.replaceWith(n)}return t}var Fo=100,ci=class{#e=null;#t=null;get(e){if(this.#t&&this.#t.url===e&&this.#t.expire>Date.now())return this.#t.request}setLater(e,n,r){this.clear(),this.#e=setTimeout(()=>{n.perform(),this.set(e,n,r),this.#e=null},Fo)}set(e,n,r){this.#t={url:e,request:n,expire:new Date(new Date().getTime()+r)}}clear(){this.#e&&clearTimeout(this.#e),this.#t=null}},Ho=10*1e3,pt=new ci,ft={initialized:"initialized",requesting:"requesting",waiting:"waiting",receiving:"receiving",stopping:"stopping",stopped:"stopped"},Ft=class t{state=ft.initialized;static confirmMethod(e,n,r){return Promise.resolve(confirm(e))}constructor(e,n,r,s=!1){let o=Jo(n,r),u=zo(Uo(n,r),o),l=No(n,r),a=Yo(n,r);this.delegate=e,this.formElement=n,this.submitter=r,this.fetchRequest=new He(this,o,u,l,n,a),this.mustRedirect=s}get method(){return this.fetchRequest.method}set method(e){this.fetchRequest.method=e}get action(){return this.fetchRequest.url.toString()}set action(e){this.fetchRequest.url=le(e)}get body(){return this.fetchRequest.body}get enctype(){return this.fetchRequest.enctype}get isSafe(){return this.fetchRequest.isSafe}get location(){return this.fetchRequest.url}async start(){let{initialized:e,requesting:n}=ft,r=qn("data-turbo-confirm",this.submitter,this.formElement);if(!(typeof r=="string"&&!await t.confirmMethod(r,this.formElement,this.submitter))&&this.state==e)return this.state=n,this.fetchRequest.perform()}stop(){let{stopping:e,stopped:n}=ft;if(this.state!=e&&this.state!=n)return this.state=e,this.fetchRequest.cancel(),!0}prepareRequest(e){if(!e.isSafe){let n=Vo(yt("csrf-param"))||yt("csrf-token");n&&(e.headers["X-CSRF-Token"]=n)}this.requestAcceptsTurboStreamResponse(e)&&e.acceptResponseType(Ne.contentType)}requestStarted(e){this.state=ft.waiting,this.submitter?.setAttribute("disabled",""),this.setSubmitsWith(),Ln(this.formElement),te("turbo:submit-start",{target:this.formElement,detail:{formSubmission:this}}),this.delegate.formSubmissionStarted(this)}requestPreventedHandlingResponse(e,n){pt.clear(),this.result={success:n.succeeded,fetchResponse:n}}requestSucceededWithResponse(e,n){if(n.clientError||n.serverError){this.delegate.formSubmissionFailedWithResponse(this,n);return}if(pt.clear(),this.requestMustRedirect(e)&&Wo(n)){let r=new Error("Form responses must redirect to another location");this.delegate.formSubmissionErrored(this,r)}else this.state=ft.receiving,this.result={success:!0,fetchResponse:n},this.delegate.formSubmissionSucceededWithResponse(this,n)}requestFailedWithResponse(e,n){this.result={success:!1,fetchResponse:n},this.delegate.formSubmissionFailedWithResponse(this,n)}requestErrored(e,n){this.result={success:!1,error:n},this.delegate.formSubmissionErrored(this,n)}requestFinished(e){this.state=ft.stopped,this.submitter?.removeAttribute("disabled"),this.resetSubmitterText(),An(this.formElement),te("turbo:submit-end",{target:this.formElement,detail:{formSubmission:this,...this.result}}),this.delegate.formSubmissionFinished(this)}setSubmitsWith(){if(!(!this.submitter||!this.submitsWith)){if(this.submitter.matches("button"))this.originalSubmitText=this.submitter.innerHTML,this.submitter.innerHTML=this.submitsWith;else if(this.submitter.matches("input")){let e=this.submitter;this.originalSubmitText=e.value,e.value=this.submitsWith}}}resetSubmitterText(){if(!(!this.submitter||!this.originalSubmitText)){if(this.submitter.matches("button"))this.submitter.innerHTML=this.originalSubmitText;else if(this.submitter.matches("input")){let e=this.submitter;e.value=this.originalSubmitText}}}requestMustRedirect(e){return!e.isSafe&&this.mustRedirect}requestAcceptsTurboStreamResponse(e){return!e.isSafe||xo("data-turbo-stream",this.submitter,this.formElement)}get submitsWith(){return this.submitter?.getAttribute("data-turbo-submits-with")}};function No(t,e){let n=new FormData(t),r=e?.getAttribute("name"),s=e?.getAttribute("value");return r&&n.append(r,s||""),n}function Vo(t){if(t!=null){let n=(document.cookie?document.cookie.split("; "):[]).find(r=>r.startsWith(t));if(n){let r=n.split("=").slice(1).join("=");return r?decodeURIComponent(r):void 0}}}function Wo(t){return t.statusCode==200&&!t.redirected}function Uo(t,e){let n=typeof t.action=="string"?t.action:null;return e?.hasAttribute("formaction")?e.getAttribute("formaction")||"":t.getAttribute("action")||n||""}function zo(t,e){let n=le(t);return jn(e)&&(n.search=""),n}function Jo(t,e){let n=e?.getAttribute("formmethod")||t.getAttribute("method")||"";return Mn(n.toLowerCase())||be.get}function Yo(t,e){return Hr(e?.getAttribute("formenctype")||t.enctype)}var _t=class{constructor(e){this.element=e}get activeElement(){return this.element.ownerDocument.activeElement}get children(){return[...this.element.children]}hasAnchor(e){return this.getElementForAnchor(e)!=null}getElementForAnchor(e){return e?this.element.querySelector(`[id='${e}'], a[name='${e}']`):null}get isConnected(){return this.element.isConnected}get firstAutofocusableElement(){return Dr(this.element)}get permanentElements(){return Wr(this.element)}getPermanentElementById(e){return Vr(this.element,e)}getPermanentElementMapForSnapshot(e){let n={};for(let r of this.permanentElements){let{id:s}=r,o=e.getPermanentElementById(s);o&&(n[s]=[r,o])}return n}};function Vr(t,e){return t.querySelector(`#${e}[data-turbo-permanent]`)}function Wr(t){return t.querySelectorAll("[id][data-turbo-permanent]")}var Ht=class{started=!1;constructor(e,n){this.delegate=e,this.eventTarget=n}start(){this.started||(this.eventTarget.addEventListener("submit",this.submitCaptured,!0),this.started=!0)}stop(){this.started&&(this.eventTarget.removeEventListener("submit",this.submitCaptured,!0),this.started=!1)}submitCaptured=()=>{this.eventTarget.removeEventListener("submit",this.submitBubbled,!1),this.eventTarget.addEventListener("submit",this.submitBubbled,!1)};submitBubbled=e=>{if(!e.defaultPrevented){let n=e.target instanceof HTMLFormElement?e.target:void 0,r=e.submitter||void 0;n&&Xo(n,r)&&Go(n,r)&&this.delegate.willSubmitForm(n,r)&&(e.preventDefault(),e.stopImmediatePropagation(),this.delegate.formSubmitted(n,r))}}};function Xo(t,e){return(e?.getAttribute("formmethod")||t.getAttribute("method"))!="dialog"}function Go(t,e){if(e?.hasAttribute("formtarget")||t.hasAttribute("target")){let n=e?.getAttribute("formtarget")||t.target;for(let r of document.getElementsByName(n))if(r instanceof HTMLIFrameElement)return!1;return!0}else return!0}var kn=class{#e=e=>{};#t=e=>{};constructor(e,n){this.delegate=e,this.element=n}scrollToAnchor(e){let n=this.snapshot.getElementForAnchor(e);n?(this.scrollToElement(n),this.focusElement(n)):this.scrollToPosition({x:0,y:0})}scrollToAnchorFromLocation(e){this.scrollToAnchor(Ge(e))}scrollToElement(e){e.scrollIntoView()}focusElement(e){e instanceof HTMLElement&&(e.hasAttribute("tabindex")?e.focus():(e.setAttribute("tabindex","-1"),e.focus(),e.removeAttribute("tabindex")))}scrollToPosition({x:e,y:n}){this.scrollRoot.scrollTo(e,n)}scrollToTop(){this.scrollToPosition({x:0,y:0})}get scrollRoot(){return window}async render(e){let{isPreview:n,shouldRender:r,willRender:s,newSnapshot:o}=e,u=s;if(r)try{this.renderPromise=new Promise(d=>this.#e=d),this.renderer=e,await this.prepareToRenderSnapshot(e);let l=new Promise(d=>this.#t=d),a={resume:this.#t,render:this.renderer.renderElement,renderMethod:this.renderer.renderMethod};this.delegate.allowsImmediateRender(o,a)||await l,await this.renderSnapshot(e),this.delegate.viewRenderedSnapshot(o,n,this.renderer.renderMethod),this.delegate.preloadOnLoadLinksForView(this.element),this.finishRenderingSnapshot(e)}finally{delete this.renderer,this.#e(void 0),delete this.renderPromise}else u&&this.invalidate(e.reloadReason)}invalidate(e){this.delegate.viewInvalidated(e)}async prepareToRenderSnapshot(e){this.markAsPreview(e.isPreview),await e.prepareToRender()}markAsPreview(e){e?this.element.setAttribute("data-turbo-preview",""):this.element.removeAttribute("data-turbo-preview")}markVisitDirection(e){this.element.setAttribute("data-turbo-visit-direction",e)}unmarkVisitDirection(){this.element.removeAttribute("data-turbo-visit-direction")}async renderSnapshot(e){await e.render()}finishRenderingSnapshot(e){e.finishRendering()}},ui=class extends kn{missing(){this.element.innerHTML='<strong class="turbo-frame-error">Content missing</strong>'}get snapshot(){return new _t(this.element)}},Tn=class{constructor(e,n){this.delegate=e,this.element=n}start(){this.element.addEventListener("click",this.clickBubbled),document.addEventListener("turbo:click",this.linkClicked),document.addEventListener("turbo:before-visit",this.willVisit)}stop(){this.element.removeEventListener("click",this.clickBubbled),document.removeEventListener("turbo:click",this.linkClicked),document.removeEventListener("turbo:before-visit",this.willVisit)}clickBubbled=e=>{this.respondsToEventTarget(e.target)?this.clickEvent=e:delete this.clickEvent};linkClicked=e=>{this.clickEvent&&this.respondsToEventTarget(e.target)&&e.target instanceof Element&&this.delegate.shouldInterceptLinkClick(e.target,e.detail.url,e.detail.originalEvent)&&(this.clickEvent.preventDefault(),e.preventDefault(),this.delegate.linkClickIntercepted(e.target,e.detail.url,e.detail.originalEvent)),delete this.clickEvent};willVisit=e=>{delete this.clickEvent};respondsToEventTarget(e){let n=e instanceof Element?e:e instanceof Node?e.parentElement:null;return n&&n.closest("turbo-frame, html")==this.element}},xn=class{started=!1;constructor(e,n){this.delegate=e,this.eventTarget=n}start(){this.started||(this.eventTarget.addEventListener("click",this.clickCaptured,!0),this.started=!0)}stop(){this.started&&(this.eventTarget.removeEventListener("click",this.clickCaptured,!0),this.started=!1)}clickCaptured=()=>{this.eventTarget.removeEventListener("click",this.clickBubbled,!1),this.eventTarget.addEventListener("click",this.clickBubbled,!1)};clickBubbled=e=>{if(e instanceof MouseEvent&&this.clickEventIsSignificant(e)){let n=e.composedPath&&e.composedPath()[0]||e.target,r=Mo(n);if(r&&Io(r)){let s=Or(r);this.delegate.willFollowLinkToLocation(r,s,e)&&(e.preventDefault(),this.delegate.followedLinkToLocation(r,s))}}};clickEventIsSignificant(e){return!(e.target&&e.target.isContentEditable||e.defaultPrevented||e.which>1||e.altKey||e.ctrlKey||e.metaKey||e.shiftKey)}},Cn=class{constructor(e,n){this.delegate=e,this.linkInterceptor=new xn(this,n)}start(){this.linkInterceptor.start()}stop(){this.linkInterceptor.stop()}canPrefetchRequestToLocation(e,n){return!1}prefetchAndCacheRequestToLocation(e,n){}willFollowLinkToLocation(e,n,r){return this.delegate.willSubmitFormLinkToLocation(e,n,r)&&(e.hasAttribute("data-turbo-method")||e.hasAttribute("data-turbo-stream"))}followedLinkToLocation(e,n){let r=document.createElement("form"),s="hidden";for(let[f,b]of n.searchParams)r.append(Object.assign(document.createElement("input"),{type:s,name:f,value:b}));let o=Object.assign(n,{search:""});r.setAttribute("data-turbo","true"),r.setAttribute("action",o.href),r.setAttribute("hidden","");let u=e.getAttribute("data-turbo-method");u&&r.setAttribute("method",u);let l=e.getAttribute("data-turbo-frame");l&&r.setAttribute("data-turbo-frame",l);let a=Ke(e);a&&r.setAttribute("data-turbo-action",a);let c=e.getAttribute("data-turbo-confirm");c&&r.setAttribute("data-turbo-confirm",c),e.hasAttribute("data-turbo-stream")&&r.setAttribute("data-turbo-stream",""),this.delegate.submittedFormLinkToLocation(e,n,r),document.body.appendChild(r),r.addEventListener("turbo:submit-end",()=>r.remove(),{once:!0}),requestAnimationFrame(()=>r.requestSubmit())}},$n=class{static async preservingPermanentElements(e,n,r){let s=new this(e,n);s.enter(),await r(),s.leave()}constructor(e,n){this.delegate=e,this.permanentElementMap=n}enter(){for(let e in this.permanentElementMap){let[n,r]=this.permanentElementMap[e];this.delegate.enteringBardo(n,r),this.replaceNewPermanentElementWithPlaceholder(r)}}leave(){for(let e in this.permanentElementMap){let[n]=this.permanentElementMap[e];this.replaceCurrentPermanentElementWithClone(n),this.replacePlaceholderWithPermanentElement(n),this.delegate.leavingBardo(n)}}replaceNewPermanentElementWithPlaceholder(e){let n=Ko(e);e.replaceWith(n)}replaceCurrentPermanentElementWithClone(e){let n=e.cloneNode(!0);e.replaceWith(n)}replacePlaceholderWithPermanentElement(e){this.getPlaceholderById(e.id)?.replaceWith(e)}getPlaceholderById(e){return this.placeholders.find(n=>n.content==e)}get placeholders(){return[...document.querySelectorAll("meta[name=turbo-permanent-placeholder][content]")]}};function Ko(t){let e=document.createElement("meta");return e.setAttribute("name","turbo-permanent-placeholder"),e.setAttribute("content",t.id),e}var Nt=class{#e=null;constructor(e,n,r,s,o=!0){this.currentSnapshot=e,this.newSnapshot=n,this.isPreview=s,this.willRender=o,this.renderElement=r,this.promise=new Promise((u,l)=>this.resolvingFunctions={resolve:u,reject:l})}get shouldRender(){return!0}get reloadReason(){}prepareToRender(){}render(){}finishRendering(){this.resolvingFunctions&&(this.resolvingFunctions.resolve(),delete this.resolvingFunctions)}async preservingPermanentElements(e){await $n.preservingPermanentElements(this,this.permanentElementMap,e)}focusFirstAutofocusableElement(){let e=this.connectedSnapshot.firstAutofocusableElement;e&&e.focus()}enteringBardo(e){this.#e||e.contains(this.currentSnapshot.activeElement)&&(this.#e=this.currentSnapshot.activeElement)}leavingBardo(e){e.contains(this.#e)&&this.#e instanceof HTMLElement&&(this.#e.focus(),this.#e=null)}get connectedSnapshot(){return this.newSnapshot.isConnected?this.newSnapshot:this.currentSnapshot}get currentElement(){return this.currentSnapshot.element}get newElement(){return this.newSnapshot.element}get permanentElementMap(){return this.currentSnapshot.getPermanentElementMapForSnapshot(this.newSnapshot)}get renderMethod(){return"replace"}},wt=class extends Nt{static renderElement(e,n){let r=document.createRange();r.selectNodeContents(e),r.deleteContents();let s=n,o=s.ownerDocument?.createRange();o&&(o.selectNodeContents(s),e.appendChild(o.extractContents()))}constructor(e,n,r,s,o,u=!0){super(n,r,s,o,u),this.delegate=e}get shouldRender(){return!0}async render(){await mt(),this.preservingPermanentElements(()=>{this.loadFrameElement()}),this.scrollFrameIntoView(),await mt(),this.focusFirstAutofocusableElement(),await mt(),this.activateScriptElements()}loadFrameElement(){this.delegate.willRenderFrame(this.currentElement,this.newElement),this.renderElement(this.currentElement,this.newElement)}scrollFrameIntoView(){if(this.currentElement.autoscroll||this.newElement.autoscroll){let e=this.currentElement.firstElementChild,n=Qo(this.currentElement.getAttribute("data-autoscroll-block"),"end"),r=Zo(this.currentElement.getAttribute("data-autoscroll-behavior"),"auto");if(e)return e.scrollIntoView({block:n,behavior:r}),!0}return!1}activateScriptElements(){for(let e of this.newScriptElements){let n=Ot(e);e.replaceWith(n)}}get newScriptElements(){return this.currentElement.querySelectorAll("script")}};function Qo(t,e){return t=="end"||t=="start"||t=="center"||t=="nearest"?t:e}function Zo(t,e){return t=="auto"||t=="smooth"?t:e}var di=class t{static animationDuration=300;static get defaultCSS(){return Mr`
      .turbo-progress-bar {
        position: fixed;
        display: block;
        top: 0;
        left: 0;
        height: 3px;
        background: #0076ff;
        z-index: 2147483647;
        transition:
          width ${t.animationDuration}ms ease-out,
          opacity ${t.animationDuration/2}ms ${t.animationDuration/2}ms ease-in;
        transform: translate3d(0, 0, 0);
      }
    `}hiding=!1;value=0;visible=!1;constructor(){this.stylesheetElement=this.createStylesheetElement(),this.progressElement=this.createProgressElement(),this.installStylesheetElement(),this.setValue(0)}show(){this.visible||(this.visible=!0,this.installProgressElement(),this.startTrickling())}hide(){this.visible&&!this.hiding&&(this.hiding=!0,this.fadeProgressElement(()=>{this.uninstallProgressElement(),this.stopTrickling(),this.visible=!1,this.hiding=!1}))}setValue(e){this.value=e,this.refresh()}installStylesheetElement(){document.head.insertBefore(this.stylesheetElement,document.head.firstChild)}installProgressElement(){this.progressElement.style.width="0",this.progressElement.style.opacity="1",document.documentElement.insertBefore(this.progressElement,document.body),this.refresh()}fadeProgressElement(e){this.progressElement.style.opacity="0",setTimeout(e,t.animationDuration*1.5)}uninstallProgressElement(){this.progressElement.parentNode&&document.documentElement.removeChild(this.progressElement)}startTrickling(){this.trickleInterval||(this.trickleInterval=window.setInterval(this.trickle,t.animationDuration))}stopTrickling(){window.clearInterval(this.trickleInterval),delete this.trickleInterval}trickle=()=>{this.setValue(this.value+Math.random()/100)};refresh(){requestAnimationFrame(()=>{this.progressElement.style.width=`${10+this.value*90}%`})}createStylesheetElement(){let e=document.createElement("style");return e.type="text/css",e.textContent=t.defaultCSS,this.cspNonce&&(e.nonce=this.cspNonce),e}createProgressElement(){let e=document.createElement("div");return e.className="turbo-progress-bar",e}get cspNonce(){return yt("csp-nonce")}},hi=class extends _t{detailsByOuterHTML=this.children.filter(e=>!ia(e)).map(e=>oa(e)).reduce((e,n)=>{let{outerHTML:r}=n,s=r in e?e[r]:{type:ea(n),tracked:ta(n),elements:[]};return{...e,[r]:{...s,elements:[...s.elements,n]}}},{});get trackedElementSignature(){return Object.keys(this.detailsByOuterHTML).filter(e=>this.detailsByOuterHTML[e].tracked).join("")}getScriptElementsNotInSnapshot(e){return this.getElementsMatchingTypeNotInSnapshot("script",e)}getStylesheetElementsNotInSnapshot(e){return this.getElementsMatchingTypeNotInSnapshot("stylesheet",e)}getElementsMatchingTypeNotInSnapshot(e,n){return Object.keys(this.detailsByOuterHTML).filter(r=>!(r in n.detailsByOuterHTML)).map(r=>this.detailsByOuterHTML[r]).filter(({type:r})=>r==e).map(({elements:[r]})=>r)}get provisionalElements(){return Object.keys(this.detailsByOuterHTML).reduce((e,n)=>{let{type:r,tracked:s,elements:o}=this.detailsByOuterHTML[n];return r==null&&!s?[...e,...o]:o.length>1?[...e,...o.slice(1)]:e},[])}getMetaValue(e){let n=this.findMetaElementByName(e);return n?n.getAttribute("content"):null}findMetaElementByName(e){return Object.keys(this.detailsByOuterHTML).reduce((n,r)=>{let{elements:[s]}=this.detailsByOuterHTML[r];return sa(s,e)?s:n},void 0|void 0)}};function ea(t){if(na(t))return"script";if(ra(t))return"stylesheet"}function ta(t){return t.getAttribute("data-turbo-track")=="reload"}function na(t){return t.localName=="script"}function ia(t){return t.localName=="noscript"}function ra(t){let e=t.localName;return e=="style"||e=="link"&&t.getAttribute("rel")=="stylesheet"}function sa(t,e){return t.localName=="meta"&&t.getAttribute("name")==e}function oa(t){return t.hasAttribute("nonce")&&t.setAttribute("nonce",""),t}var ye=class t extends _t{static fromHTMLString(e=""){return this.fromDocument(Ir(e))}static fromElement(e){return this.fromDocument(e.ownerDocument)}static fromDocument({documentElement:e,body:n,head:r}){return new this(e,n,new hi(r))}constructor(e,n,r){super(n),this.documentElement=e,this.headSnapshot=r}clone(){let e=this.element.cloneNode(!0),n=this.element.querySelectorAll("select"),r=e.querySelectorAll("select");for(let[s,o]of n.entries()){let u=r[s];for(let l of u.selectedOptions)l.selected=!1;for(let l of o.selectedOptions)u.options[l.index].selected=!0}for(let s of e.querySelectorAll('input[type="password"]'))s.value="";return new t(this.documentElement,e,this.headSnapshot)}get lang(){return this.documentElement.getAttribute("lang")}get headElement(){return this.headSnapshot.element}get rootLocation(){let e=this.getSetting("root")??"/";return le(e)}get cacheControlValue(){return this.getSetting("cache-control")}get isPreviewable(){return this.cacheControlValue!="no-preview"}get isCacheable(){return this.cacheControlValue!="no-cache"}get isVisitable(){return this.getSetting("visit-control")!="reload"}get prefersViewTransitions(){return this.headSnapshot.getMetaValue("view-transition")==="same-origin"}get shouldMorphPage(){return this.getSetting("refresh-method")==="morph"}get shouldPreserveScrollPosition(){return this.getSetting("refresh-scroll")==="preserve"}getSetting(e){return this.headSnapshot.getMetaValue(`turbo-${e}`)}},fi=class{#e=!1;#t=Promise.resolve();renderChange(e,n){return e&&this.viewTransitionsAvailable&&!this.#e?(this.#e=!0,this.#t=this.#t.then(async()=>{await document.startViewTransition(n).finished})):this.#t=this.#t.then(n),this.#t}get viewTransitionsAvailable(){return document.startViewTransition}},aa={action:"advance",historyChanged:!1,visitCachedSnapshot:()=>{},willRender:!0,updateHistory:!0,shouldCacheSnapshot:!0,acceptsStreamResponse:!1},En={visitStart:"visitStart",requestStart:"requestStart",requestEnd:"requestEnd",visitEnd:"visitEnd"},Pe={initialized:"initialized",started:"started",canceled:"canceled",failed:"failed",completed:"completed"},bt={networkFailure:0,timeoutFailure:-1,contentTypeMismatch:-2},la={advance:"forward",restore:"back",replace:"none"},pi=class{identifier=Fe();timingMetrics={};followedRedirect=!1;historyChanged=!1;scrolled=!1;shouldCacheSnapshot=!0;acceptsStreamResponse=!1;snapshotCached=!1;state=Pe.initialized;viewTransitioner=new fi;constructor(e,n,r,s={}){this.delegate=e,this.location=n,this.restorationIdentifier=r||Fe();let{action:o,historyChanged:u,referrer:l,snapshot:a,snapshotHTML:c,response:d,visitCachedSnapshot:f,willRender:b,updateHistory:y,shouldCacheSnapshot:w,acceptsStreamResponse:k,direction:C}={...aa,...s};this.action=o,this.historyChanged=u,this.referrer=l,this.snapshot=a,this.snapshotHTML=c,this.response=d,this.isSamePage=this.delegate.locationWithActionIsSamePage(this.location,this.action),this.isPageRefresh=this.view.isPageRefresh(this),this.visitCachedSnapshot=f,this.willRender=b,this.updateHistory=y,this.scrolled=!b,this.shouldCacheSnapshot=w,this.acceptsStreamResponse=k,this.direction=C||la[o]}get adapter(){return this.delegate.adapter}get view(){return this.delegate.view}get history(){return this.delegate.history}get restorationData(){return this.history.getRestorationDataForIdentifier(this.restorationIdentifier)}get silent(){return this.isSamePage}start(){this.state==Pe.initialized&&(this.recordTimingMetric(En.visitStart),this.state=Pe.started,this.adapter.visitStarted(this),this.delegate.visitStarted(this))}cancel(){this.state==Pe.started&&(this.request&&this.request.cancel(),this.cancelRender(),this.state=Pe.canceled)}complete(){this.state==Pe.started&&(this.recordTimingMetric(En.visitEnd),this.adapter.visitCompleted(this),this.state=Pe.completed,this.followRedirect(),this.followedRedirect||this.delegate.visitCompleted(this))}fail(){this.state==Pe.started&&(this.state=Pe.failed,this.adapter.visitFailed(this),this.delegate.visitCompleted(this))}changeHistory(){if(!this.historyChanged&&this.updateHistory){let e=this.location.href===this.referrer?.href?"replace":this.action,n=jr(e);this.history.update(n,this.location,this.restorationIdentifier),this.historyChanged=!0}}issueRequest(){this.hasPreloadedResponse()?this.simulateRequest():this.shouldIssueRequest()&&!this.request&&(this.request=new He(this,be.get,this.location),this.request.perform())}simulateRequest(){this.response&&(this.startRequest(),this.recordResponse(),this.finishRequest())}startRequest(){this.recordTimingMetric(En.requestStart),this.adapter.visitRequestStarted(this)}recordResponse(e=this.response){if(this.response=e,e){let{statusCode:n}=e;kr(n)?this.adapter.visitRequestCompleted(this):this.adapter.visitRequestFailedWithStatusCode(this,n)}}finishRequest(){this.recordTimingMetric(En.requestEnd),this.adapter.visitRequestFinished(this)}loadResponse(){if(this.response){let{statusCode:e,responseHTML:n}=this.response;this.render(async()=>{if(this.shouldCacheSnapshot&&this.cacheSnapshot(),this.view.renderPromise&&await this.view.renderPromise,kr(e)&&n!=null){let r=ye.fromHTMLString(n);await this.renderPageSnapshot(r,!1),this.adapter.visitRendered(this),this.complete()}else await this.view.renderError(ye.fromHTMLString(n),this),this.adapter.visitRendered(this),this.fail()})}}getCachedSnapshot(){let e=this.view.getCachedSnapshotForLocation(this.location)||this.getPreloadedSnapshot();if(e&&(!Ge(this.location)||e.hasAnchor(Ge(this.location)))&&(this.action=="restore"||e.isPreviewable))return e}getPreloadedSnapshot(){if(this.snapshotHTML)return ye.fromHTMLString(this.snapshotHTML)}hasCachedSnapshot(){return this.getCachedSnapshot()!=null}loadCachedSnapshot(){let e=this.getCachedSnapshot();if(e){let n=this.shouldIssueRequest();this.render(async()=>{this.cacheSnapshot(),this.isSamePage||this.isPageRefresh?this.adapter.visitRendered(this):(this.view.renderPromise&&await this.view.renderPromise,await this.renderPageSnapshot(e,n),this.adapter.visitRendered(this),n||this.complete())})}}followRedirect(){this.redirectedToLocation&&!this.followedRedirect&&this.response?.redirected&&(this.adapter.visitProposedToLocation(this.redirectedToLocation,{action:"replace",response:this.response,shouldCacheSnapshot:!1,willRender:!1}),this.followedRedirect=!0)}goToSamePageAnchor(){this.isSamePage&&this.render(async()=>{this.cacheSnapshot(),this.performScroll(),this.changeHistory(),this.adapter.visitRendered(this)})}prepareRequest(e){this.acceptsStreamResponse&&e.acceptResponseType(Ne.contentType)}requestStarted(){this.startRequest()}requestPreventedHandlingResponse(e,n){}async requestSucceededWithResponse(e,n){let r=await n.responseHTML,{redirected:s,statusCode:o}=n;r==null?this.recordResponse({statusCode:bt.contentTypeMismatch,redirected:s}):(this.redirectedToLocation=n.redirected?n.location:void 0,this.recordResponse({statusCode:o,responseHTML:r,redirected:s}))}async requestFailedWithResponse(e,n){let r=await n.responseHTML,{redirected:s,statusCode:o}=n;r==null?this.recordResponse({statusCode:bt.contentTypeMismatch,redirected:s}):this.recordResponse({statusCode:o,responseHTML:r,redirected:s})}requestErrored(e,n){this.recordResponse({statusCode:bt.networkFailure,redirected:!1})}requestFinished(){this.finishRequest()}performScroll(){!this.scrolled&&!this.view.forceReloaded&&!this.view.shouldPreserveScrollPosition(this)&&(this.action=="restore"?this.scrollToRestoredPosition()||this.scrollToAnchor()||this.view.scrollToTop():this.scrollToAnchor()||this.view.scrollToTop(),this.isSamePage&&this.delegate.visitScrolledToSamePageLocation(this.view.lastRenderedLocation,this.location),this.scrolled=!0)}scrollToRestoredPosition(){let{scrollPosition:e}=this.restorationData;if(e)return this.view.scrollToPosition(e),!0}scrollToAnchor(){let e=Ge(this.location);if(e!=null)return this.view.scrollToAnchor(e),!0}recordTimingMetric(e){this.timingMetrics[e]=new Date().getTime()}getTimingMetrics(){return{...this.timingMetrics}}getHistoryMethodForAction(e){switch(e){case"replace":return history.replaceState;case"advance":case"restore":return history.pushState}}hasPreloadedResponse(){return typeof this.response=="object"}shouldIssueRequest(){return this.isSamePage?!1:this.action=="restore"?!this.hasCachedSnapshot():this.willRender}cacheSnapshot(){this.snapshotCached||(this.view.cacheSnapshot(this.snapshot).then(e=>e&&this.visitCachedSnapshot(e)),this.snapshotCached=!0)}async render(e){this.cancelRender(),this.frame=await mt(),await e(),delete this.frame}async renderPageSnapshot(e,n){await this.viewTransitioner.renderChange(this.view.shouldTransitionTo(e),async()=>{await this.view.renderPage(e,n,this.willRender,this),this.performScroll()})}cancelRender(){this.frame&&(cancelAnimationFrame(this.frame),delete this.frame)}};function kr(t){return t>=200&&t<300}var mi=class{progressBar=new di;constructor(e){this.session=e}visitProposedToLocation(e,n){De(e,this.navigator.rootLocation)?this.navigator.startVisit(e,n?.restorationIdentifier||Fe(),n):window.location.href=e.toString()}visitStarted(e){this.location=e.location,e.loadCachedSnapshot(),e.issueRequest(),e.goToSamePageAnchor()}visitRequestStarted(e){this.progressBar.setValue(0),e.hasCachedSnapshot()||e.action!="restore"?this.showVisitProgressBarAfterDelay():this.showProgressBar()}visitRequestCompleted(e){e.loadResponse()}visitRequestFailedWithStatusCode(e,n){switch(n){case bt.networkFailure:case bt.timeoutFailure:case bt.contentTypeMismatch:return this.reload({reason:"request_failed",context:{statusCode:n}});default:return e.loadResponse()}}visitRequestFinished(e){}visitCompleted(e){this.progressBar.setValue(1),this.hideVisitProgressBar()}pageInvalidated(e){this.reload(e)}visitFailed(e){this.progressBar.setValue(1),this.hideVisitProgressBar()}visitRendered(e){}formSubmissionStarted(e){this.progressBar.setValue(0),this.showFormProgressBarAfterDelay()}formSubmissionFinished(e){this.progressBar.setValue(1),this.hideFormProgressBar()}showVisitProgressBarAfterDelay(){this.visitProgressBarTimeout=window.setTimeout(this.showProgressBar,this.session.progressBarDelay)}hideVisitProgressBar(){this.progressBar.hide(),this.visitProgressBarTimeout!=null&&(window.clearTimeout(this.visitProgressBarTimeout),delete this.visitProgressBarTimeout)}showFormProgressBarAfterDelay(){this.formProgressBarTimeout==null&&(this.formProgressBarTimeout=window.setTimeout(this.showProgressBar,this.session.progressBarDelay))}hideFormProgressBar(){this.progressBar.hide(),this.formProgressBarTimeout!=null&&(window.clearTimeout(this.formProgressBarTimeout),delete this.formProgressBarTimeout)}showProgressBar=()=>{this.progressBar.show()};reload(e){te("turbo:reload",{detail:e}),window.location.href=this.location?.toString()||window.location.href}get navigator(){return this.session.navigator}},gi=class{selector="[data-turbo-temporary]";deprecatedSelector="[data-turbo-cache=false]";started=!1;start(){this.started||(this.started=!0,addEventListener("turbo:before-cache",this.removeTemporaryElements,!1))}stop(){this.started&&(this.started=!1,removeEventListener("turbo:before-cache",this.removeTemporaryElements,!1))}removeTemporaryElements=e=>{for(let n of this.temporaryElements)n.remove()};get temporaryElements(){return[...document.querySelectorAll(this.selector),...this.temporaryElementsWithDeprecation]}get temporaryElementsWithDeprecation(){let e=document.querySelectorAll(this.deprecatedSelector);return e.length&&console.warn(`The ${this.deprecatedSelector} selector is deprecated and will be removed in a future version. Use ${this.selector} instead.`),[...e]}},bi=class{constructor(e,n){this.session=e,this.element=n,this.linkInterceptor=new Tn(this,n),this.formSubmitObserver=new Ht(this,n)}start(){this.linkInterceptor.start(),this.formSubmitObserver.start()}stop(){this.linkInterceptor.stop(),this.formSubmitObserver.stop()}shouldInterceptLinkClick(e,n,r){return this.#t(e)}linkClickIntercepted(e,n,r){let s=this.#n(e);s&&s.delegate.linkClickIntercepted(e,n,r)}willSubmitForm(e,n){return e.closest("turbo-frame")==null&&this.#e(e,n)&&this.#t(e,n)}formSubmitted(e,n){let r=this.#n(e,n);r&&r.delegate.formSubmitted(e,n)}#e(e,n){let r=Pi(e,n),s=this.element.ownerDocument.querySelector('meta[name="turbo-root"]'),o=le(s?.content??"/");return this.#t(e,n)&&De(r,o)}#t(e,n){if(e instanceof HTMLFormElement?this.session.submissionIsNavigatable(e,n):this.session.elementIsNavigatable(e)){let s=this.#n(e,n);return s?s!=e.closest("turbo-frame"):!1}else return!1}#n(e,n){let r=n?.getAttribute("data-turbo-frame")||e.getAttribute("data-turbo-frame");if(r&&r!="_top"){let s=this.element.querySelector(`#${r}:not([disabled])`);if(s instanceof Ee)return s}}},vi=class{location;restorationIdentifier=Fe();restorationData={};started=!1;pageLoaded=!1;currentIndex=0;constructor(e){this.delegate=e}start(){this.started||(addEventListener("popstate",this.onPopState,!1),addEventListener("load",this.onPageLoad,!1),this.currentIndex=history.state?.turbo?.restorationIndex||0,this.started=!0,this.replace(new URL(window.location.href)))}stop(){this.started&&(removeEventListener("popstate",this.onPopState,!1),removeEventListener("load",this.onPageLoad,!1),this.started=!1)}push(e,n){this.update(history.pushState,e,n)}replace(e,n){this.update(history.replaceState,e,n)}update(e,n,r=Fe()){e===history.pushState&&++this.currentIndex;let s={turbo:{restorationIdentifier:r,restorationIndex:this.currentIndex}};e.call(history,s,"",n.href),this.location=n,this.restorationIdentifier=r}getRestorationDataForIdentifier(e){return this.restorationData[e]||{}}updateRestorationData(e){let{restorationIdentifier:n}=this,r=this.restorationData[n];this.restorationData[n]={...r,...e}}assumeControlOfScrollRestoration(){this.previousScrollRestoration||(this.previousScrollRestoration=history.scrollRestoration??"auto",history.scrollRestoration="manual")}relinquishControlOfScrollRestoration(){this.previousScrollRestoration&&(history.scrollRestoration=this.previousScrollRestoration,delete this.previousScrollRestoration)}onPopState=e=>{if(this.shouldHandlePopState()){let{turbo:n}=e.state||{};if(n){this.location=new URL(window.location.href);let{restorationIdentifier:r,restorationIndex:s}=n;this.restorationIdentifier=r;let o=s>this.currentIndex?"forward":"back";this.delegate.historyPoppedToLocationWithRestorationIdentifierAndDirection(this.location,r,o),this.currentIndex=s}}};onPageLoad=async e=>{await ko(),this.pageLoaded=!0};shouldHandlePopState(){return this.pageIsLoaded()}pageIsLoaded(){return this.pageLoaded||document.readyState=="complete"}},yi=class{started=!1;#e=null;constructor(e,n){this.delegate=e,this.eventTarget=n}start(){this.started||(this.eventTarget.readyState==="loading"?this.eventTarget.addEventListener("DOMContentLoaded",this.#t,{once:!0}):this.#t())}stop(){this.started&&(this.eventTarget.removeEventListener("mouseenter",this.#n,{capture:!0,passive:!0}),this.eventTarget.removeEventListener("mouseleave",this.#r,{capture:!0,passive:!0}),this.eventTarget.removeEventListener("turbo:before-fetch-request",this.#i,!0),this.started=!1)}#t=()=>{this.eventTarget.addEventListener("mouseenter",this.#n,{capture:!0,passive:!0}),this.eventTarget.addEventListener("mouseleave",this.#r,{capture:!0,passive:!0}),this.eventTarget.addEventListener("turbo:before-fetch-request",this.#i,!0),this.started=!0};#n=e=>{if(yt("turbo-prefetch")==="false")return;let n=e.target;if(n.matches&&n.matches("a[href]:not([target^=_]):not([download])")&&this.#a(n)){let s=n,o=Or(s);if(this.delegate.canPrefetchRequestToLocation(s,o)){this.#e=s;let u=new He(this,be.get,o,new URLSearchParams,n);pt.setLater(o.toString(),u,this.#o)}}};#r=e=>{e.target===this.#e&&this.#s()};#s=()=>{pt.clear(),this.#e=null};#i=e=>{if(e.target.tagName!=="FORM"&&e.detail.fetchOptions.method==="get"){let n=pt.get(e.detail.url.toString());n&&(e.detail.fetchRequest=n),pt.clear()}};prepareRequest(e){let n=e.target;e.headers["X-Sec-Purpose"]="prefetch";let r=n.closest("turbo-frame"),s=n.getAttribute("data-turbo-frame")||r?.getAttribute("target")||r?.id;s&&s!=="_top"&&(e.headers["Turbo-Frame"]=s)}requestSucceededWithResponse(){}requestStarted(e){}requestErrored(e){}requestFinished(e){}requestPreventedHandlingResponse(e,n){}requestFailedWithResponse(e,n){}get#o(){return Number(yt("turbo-prefetch-cache-time"))||Ho}#a(e){return!(!e.getAttribute("href")||ca(e)||ua(e)||da(e)||ha(e)||pa(e))}},ca=t=>t.origin!==document.location.origin||!["http:","https:"].includes(t.protocol)||t.hasAttribute("target"),ua=t=>t.pathname+t.search===document.location.pathname+document.location.search||t.href.startsWith("#"),da=t=>{if(t.getAttribute("data-turbo-prefetch")==="false"||t.getAttribute("data-turbo")==="false")return!0;let e=gt(t,"[data-turbo-prefetch]");return!!(e&&e.getAttribute("data-turbo-prefetch")==="false")},ha=t=>{let e=t.getAttribute("data-turbo-method");return!!(e&&e.toLowerCase()!=="get"||fa(t)||t.hasAttribute("data-turbo-confirm")||t.hasAttribute("data-turbo-stream"))},fa=t=>t.hasAttribute("data-remote")||t.hasAttribute("data-behavior")||t.hasAttribute("data-confirm")||t.hasAttribute("data-method"),pa=t=>te("turbo:before-prefetch",{target:t,cancelable:!0}).defaultPrevented,_i=class{constructor(e){this.delegate=e}proposeVisit(e,n={}){this.delegate.allowsVisitingLocationWithAction(e,n.action)&&this.delegate.visitProposedToLocation(e,n)}startVisit(e,n,r={}){this.stop(),this.currentVisit=new pi(this,le(e),n,{referrer:this.location,...r}),this.currentVisit.start()}submitForm(e,n){this.stop(),this.formSubmission=new Ft(this,e,n,!0),this.formSubmission.start()}stop(){this.formSubmission&&(this.formSubmission.stop(),delete this.formSubmission),this.currentVisit&&(this.currentVisit.cancel(),delete this.currentVisit)}get adapter(){return this.delegate.adapter}get view(){return this.delegate.view}get rootLocation(){return this.view.snapshot.rootLocation}get history(){return this.delegate.history}formSubmissionStarted(e){typeof this.adapter.formSubmissionStarted=="function"&&this.adapter.formSubmissionStarted(e)}async formSubmissionSucceededWithResponse(e,n){if(e==this.formSubmission){let r=await n.responseHTML;if(r){let s=e.isSafe;s||this.view.clearSnapshotCache();let{statusCode:o,redirected:u}=n,a={action:this.#e(e,n),shouldCacheSnapshot:s,response:{statusCode:o,responseHTML:r,redirected:u}};this.proposeVisit(n.location,a)}}}async formSubmissionFailedWithResponse(e,n){let r=await n.responseHTML;if(r){let s=ye.fromHTMLString(r);n.serverError?await this.view.renderError(s,this.currentVisit):await this.view.renderPage(s,!1,!0,this.currentVisit),s.shouldPreserveScrollPosition||this.view.scrollToTop(),this.view.clearSnapshotCache()}}formSubmissionErrored(e,n){console.error(n)}formSubmissionFinished(e){typeof this.adapter.formSubmissionFinished=="function"&&this.adapter.formSubmissionFinished(e)}visitStarted(e){this.delegate.visitStarted(e)}visitCompleted(e){this.delegate.visitCompleted(e)}locationWithActionIsSamePage(e,n){let r=Ge(e),s=Ge(this.view.lastRenderedLocation),o=n==="restore"&&typeof r>"u";return n!=="replace"&&oi(e)===oi(this.view.lastRenderedLocation)&&(o||r!=null&&r!==s)}visitScrolledToSamePageLocation(e,n){this.delegate.visitScrolledToSamePageLocation(e,n)}get location(){return this.history.location}get restorationIdentifier(){return this.history.restorationIdentifier}#e(e,n){let{submitter:r,formElement:s}=e;return Ke(r,s)||this.#t(n)}#t(e){return e.redirected&&e.location.href===this.location?.href?"replace":"advance"}},Ye={initial:0,loading:1,interactive:2,complete:3},wi=class{stage=Ye.initial;started=!1;constructor(e){this.delegate=e}start(){this.started||(this.stage==Ye.initial&&(this.stage=Ye.loading),document.addEventListener("readystatechange",this.interpretReadyState,!1),addEventListener("pagehide",this.pageWillUnload,!1),this.started=!0)}stop(){this.started&&(document.removeEventListener("readystatechange",this.interpretReadyState,!1),removeEventListener("pagehide",this.pageWillUnload,!1),this.started=!1)}interpretReadyState=()=>{let{readyState:e}=this;e=="interactive"?this.pageIsInteractive():e=="complete"&&this.pageIsComplete()};pageIsInteractive(){this.stage==Ye.loading&&(this.stage=Ye.interactive,this.delegate.pageBecameInteractive())}pageIsComplete(){this.pageIsInteractive(),this.stage==Ye.interactive&&(this.stage=Ye.complete,this.delegate.pageLoaded())}pageWillUnload=()=>{this.delegate.pageWillUnload()};get readyState(){return document.readyState}},Si=class{started=!1;constructor(e){this.delegate=e}start(){this.started||(addEventListener("scroll",this.onScroll,!1),this.onScroll(),this.started=!0)}stop(){this.started&&(removeEventListener("scroll",this.onScroll,!1),this.started=!1)}onScroll=()=>{this.updatePosition({x:window.pageXOffset,y:window.pageYOffset})};updatePosition(e){this.delegate.scrollPositionChanged(e)}},Ei=class{render({fragment:e}){$n.preservingPermanentElements(this,ma(e),()=>{ga(e,()=>{ba(()=>{document.documentElement.appendChild(e)})})})}enteringBardo(e,n){n.replaceWith(e.cloneNode(!0))}leavingBardo(){}};function ma(t){let e=Wr(document.documentElement),n={};for(let r of e){let{id:s}=r;for(let o of t.querySelectorAll("turbo-stream")){let u=Vr(o.templateElement.content,s);u&&(n[s]=[r,u])}}return n}async function ga(t,e){let n=`turbo-stream-autofocus-${Fe()}`,r=t.querySelectorAll("turbo-stream"),s=va(r),o=null;if(s&&(s.id?o=s.id:o=n,s.id=o),e(),await mt(),(document.activeElement==null||document.activeElement==document.body)&&o){let l=document.getElementById(o);Ii(l)&&l.focus(),l&&l.id==n&&l.removeAttribute("id")}}async function ba(t){let[e,n]=await Po(t,()=>document.activeElement),r=e&&e.id;if(r){let s=document.getElementById(r);Ii(s)&&s!=n&&s.focus()}}function va(t){for(let e of t){let n=Dr(e.templateElement.content);if(n)return n}return null}var qi=class{sources=new Set;#e=!1;constructor(e){this.delegate=e}start(){this.#e||(this.#e=!0,addEventListener("turbo:before-fetch-response",this.inspectFetchResponse,!1))}stop(){this.#e&&(this.#e=!1,removeEventListener("turbo:before-fetch-response",this.inspectFetchResponse,!1))}connectStreamSource(e){this.streamSourceIsConnected(e)||(this.sources.add(e),e.addEventListener("message",this.receiveMessageEvent,!1))}disconnectStreamSource(e){this.streamSourceIsConnected(e)&&(this.sources.delete(e),e.removeEventListener("message",this.receiveMessageEvent,!1))}streamSourceIsConnected(e){return this.sources.has(e)}inspectFetchResponse=e=>{let n=ya(e);n&&_a(n)&&(e.preventDefault(),this.receiveMessageResponse(n))};receiveMessageEvent=e=>{this.#e&&typeof e.data=="string"&&this.receiveMessageHTML(e.data)};async receiveMessageResponse(e){let n=await e.responseHTML;n&&this.receiveMessageHTML(n)}receiveMessageHTML(e){this.delegate.receivedMessageFromStream(Ne.wrap(e))}};function ya(t){let e=t.detail?.fetchResponse;if(e instanceof vt)return e}function _a(t){return(t.contentType??"").startsWith(Ne.contentType)}var Rn=class extends Nt{static renderElement(e,n){let{documentElement:r,body:s}=document;r.replaceChild(n,s)}async render(){this.replaceHeadAndBody(),this.activateScriptElements()}replaceHeadAndBody(){let{documentElement:e,head:n}=document;e.replaceChild(this.newHead,n),this.renderElement(this.currentElement,this.newElement)}activateScriptElements(){for(let e of this.scriptElements){let n=e.parentNode;if(n){let r=Ot(e);n.replaceChild(r,e)}}}get newHead(){return this.newSnapshot.headSnapshot.element}get scriptElements(){return document.documentElement.querySelectorAll("script")}},wa=function(){let t=new Set,e={morphStyle:"outerHTML",callbacks:{beforeNodeAdded:b,afterNodeAdded:b,beforeNodeMorphed:b,afterNodeMorphed:b,beforeNodeRemoved:b,afterNodeRemoved:b,beforeAttributeUpdated:b},head:{style:"merge",shouldPreserve:function(m){return m.getAttribute("im-preserve")==="true"},shouldReAppend:function(m){return m.getAttribute("im-re-append")==="true"},shouldRemove:b,afterHeadMorphed:b}};function n(m,g,v={}){m instanceof Document&&(m=m.documentElement),typeof g=="string"&&(g=p(g));let A=D(g),E=w(m,A,v);return r(m,A,E)}function r(m,g,v){if(v.head.block){let A=m.querySelector("head"),E=g.querySelector("head");if(A&&E){let _=f(E,A,v);Promise.all(_).then(function(){r(m,g,Object.assign(v,{head:{block:!1,ignore:!0}}))});return}}if(v.morphStyle==="innerHTML")return u(g,m,v),m.children;if(v.morphStyle==="outerHTML"||v.morphStyle==null){let A=T(g,m,v),E=A?.previousSibling,_=A?.nextSibling,L=o(m,A,v);return A?q(E,L,_):[]}else throw"Do not understand how to morph style "+v.morphStyle}function s(m,g){return g.ignoreActiveValue&&m===document.activeElement&&m!==document.body}function o(m,g,v){if(!(v.ignoreActive&&m===document.activeElement))return g==null?v.callbacks.beforeNodeRemoved(m)===!1?m:(m.remove(),v.callbacks.afterNodeRemoved(m),null):C(m,g)?(v.callbacks.beforeNodeMorphed(m,g)===!1||(m instanceof HTMLHeadElement&&v.head.ignore||(m instanceof HTMLHeadElement&&v.head.style!=="morph"?f(g,m,v):(a(g,m,v),s(m,v)||u(g,m,v))),v.callbacks.afterNodeMorphed(m,g)),m):v.callbacks.beforeNodeRemoved(m)===!1||v.callbacks.beforeNodeAdded(g)===!1?m:(m.parentElement.replaceChild(g,m),v.callbacks.afterNodeAdded(g),v.callbacks.afterNodeRemoved(m),g)}function u(m,g,v){let A=m.firstChild,E=g.firstChild,_;for(;A;){if(_=A,A=_.nextSibling,E==null){if(v.callbacks.beforeNodeAdded(_)===!1)return;g.appendChild(_),v.callbacks.afterNodeAdded(_),z(v,_);continue}if(k(_,E,v)){o(E,_,v),E=E.nextSibling,z(v,_);continue}let L=B(m,g,_,E,v);if(L){E=j(E,L,v),o(L,_,v),z(v,_);continue}let x=M(m,g,_,E,v);if(x){E=j(E,x,v),o(x,_,v),z(v,_);continue}if(v.callbacks.beforeNodeAdded(_)===!1)return;g.insertBefore(_,E),v.callbacks.afterNodeAdded(_),z(v,_)}for(;E!==null;){let L=E;E=E.nextSibling,N(L,v)}}function l(m,g,v,A){return m==="value"&&A.ignoreActiveValue&&g===document.activeElement?!0:A.callbacks.beforeAttributeUpdated(m,g,v)===!1}function a(m,g,v){let A=m.nodeType;if(A===1){let E=m.attributes,_=g.attributes;for(let L of E)l(L.name,g,"update",v)||g.getAttribute(L.name)!==L.value&&g.setAttribute(L.name,L.value);for(let L=_.length-1;0<=L;L--){let x=_[L];l(x.name,g,"remove",v)||m.hasAttribute(x.name)||g.removeAttribute(x.name)}}(A===8||A===3)&&g.nodeValue!==m.nodeValue&&(g.nodeValue=m.nodeValue),s(g,v)||d(m,g,v)}function c(m,g,v,A){if(m[v]!==g[v]){let E=l(v,g,"update",A);E||(g[v]=m[v]),m[v]?E||g.setAttribute(v,m[v]):l(v,g,"remove",A)||g.removeAttribute(v)}}function d(m,g,v){if(m instanceof HTMLInputElement&&g instanceof HTMLInputElement&&m.type!=="file"){let A=m.value,E=g.value;c(m,g,"checked",v),c(m,g,"disabled",v),m.hasAttribute("value")?A!==E&&(l("value",g,"update",v)||(g.setAttribute("value",A),g.value=A)):l("value",g,"remove",v)||(g.value="",g.removeAttribute("value"))}else if(m instanceof HTMLOptionElement)c(m,g,"selected",v);else if(m instanceof HTMLTextAreaElement&&g instanceof HTMLTextAreaElement){let A=m.value,E=g.value;if(l("value",g,"update",v))return;A!==E&&(g.value=A),g.firstChild&&g.firstChild.nodeValue!==A&&(g.firstChild.nodeValue=A)}}function f(m,g,v){let A=[],E=[],_=[],L=[],x=v.head.style,P=new Map;for(let U of m.children)P.set(U.outerHTML,U);for(let U of g.children){let ie=P.has(U.outerHTML),he=v.head.shouldReAppend(U),Te=v.head.shouldPreserve(U);ie||Te?he?E.push(U):(P.delete(U.outerHTML),_.push(U)):x==="append"?he&&(E.push(U),L.push(U)):v.head.shouldRemove(U)!==!1&&E.push(U)}L.push(...P.values());let O=[];for(let U of L){let ie=document.createRange().createContextualFragment(U.outerHTML).firstChild;if(v.callbacks.beforeNodeAdded(ie)!==!1){if(ie.href||ie.src){let he=null,Te=new Promise(function(xe){he=xe});ie.addEventListener("load",function(){he()}),O.push(Te)}g.appendChild(ie),v.callbacks.afterNodeAdded(ie),A.push(ie)}}for(let U of E)v.callbacks.beforeNodeRemoved(U)!==!1&&(g.removeChild(U),v.callbacks.afterNodeRemoved(U));return v.head.afterHeadMorphed(g,{added:A,kept:_,removed:E}),O}function b(){}function y(m){let g={};return Object.assign(g,e),Object.assign(g,m),g.callbacks={},Object.assign(g.callbacks,e.callbacks),Object.assign(g.callbacks,m.callbacks),g.head={},Object.assign(g.head,e.head),Object.assign(g.head,m.head),g}function w(m,g,v){return v=y(v),{target:m,newContent:g,config:v,morphStyle:v.morphStyle,ignoreActive:v.ignoreActive,ignoreActiveValue:v.ignoreActiveValue,idMap:I(m,g),deadIds:new Set,callbacks:v.callbacks,head:v.head}}function k(m,g,v){return m==null||g==null?!1:m.nodeType===g.nodeType&&m.tagName===g.tagName?m.id!==""&&m.id===g.id?!0:W(v,m,g)>0:!1}function C(m,g){return m==null||g==null?!1:m.nodeType===g.nodeType&&m.tagName===g.tagName}function j(m,g,v){for(;m!==g;){let A=m;m=m.nextSibling,N(A,v)}return z(v,g),g.nextSibling}function B(m,g,v,A,E){let _=W(E,v,g),L=null;if(_>0){let x=A,P=0;for(;x!=null;){if(k(v,x,E))return x;if(P+=W(E,x,m),P>_)return null;x=x.nextSibling}}return L}function M(m,g,v,A,E){let _=A,L=v.nextSibling,x=0;for(;_!=null;){if(W(E,_,m)>0)return null;if(C(v,_))return _;if(C(L,_)&&(x++,L=L.nextSibling,x>=2))return null;_=_.nextSibling}return _}function p(m){let g=new DOMParser,v=m.replace(/<svg(\s[^>]*>|>)([\s\S]*?)<\/svg>/gim,"");if(v.match(/<\/html>/)||v.match(/<\/head>/)||v.match(/<\/body>/)){let A=g.parseFromString(m,"text/html");if(v.match(/<\/html>/))return A.generatedByIdiomorph=!0,A;{let E=A.firstChild;return E?(E.generatedByIdiomorph=!0,E):null}}else{let E=g.parseFromString("<body><template>"+m+"</template></body>","text/html").body.querySelector("template").content;return E.generatedByIdiomorph=!0,E}}function D(m){if(m==null)return document.createElement("div");if(m.generatedByIdiomorph)return m;if(m instanceof Node){let g=document.createElement("div");return g.append(m),g}else{let g=document.createElement("div");for(let v of[...m])g.append(v);return g}}function q(m,g,v){let A=[],E=[];for(;m!=null;)A.push(m),m=m.previousSibling;for(;A.length>0;){let _=A.pop();E.push(_),g.parentElement.insertBefore(_,g)}for(E.push(g);v!=null;)A.push(v),E.push(v),v=v.nextSibling;for(;A.length>0;)g.parentElement.insertBefore(A.pop(),g.nextSibling);return E}function T(m,g,v){let A;A=m.firstChild;let E=A,_=0;for(;A;){let L=F(A,g,v);L>_&&(E=A,_=L),A=A.nextSibling}return E}function F(m,g,v){return C(m,g)?.5+W(v,m,g):0}function N(m,g){z(g,m),g.callbacks.beforeNodeRemoved(m)!==!1&&(m.remove(),g.callbacks.afterNodeRemoved(m))}function V(m,g){return!m.deadIds.has(g)}function J(m,g,v){return(m.idMap.get(v)||t).has(g)}function z(m,g){let v=m.idMap.get(g)||t;for(let A of v)m.deadIds.add(A)}function W(m,g,v){let A=m.idMap.get(g)||t,E=0;for(let _ of A)V(m,_)&&J(m,_,v)&&++E;return E}function K(m,g){let v=m.parentElement,A=m.querySelectorAll("[id]");for(let E of A){let _=E;for(;_!==v&&_!=null;){let L=g.get(_);L==null&&(L=new Set,g.set(_,L)),L.add(E.id),_=_.parentElement}}}function I(m,g){let v=new Map;return K(m,v),K(g,v),v}return{morph:n,defaults:e}}(),Qe=class extends Nt{static renderElement(e,n){document.body&&n instanceof HTMLBodyElement?document.body.replaceWith(n):document.documentElement.appendChild(n)}get shouldRender(){return this.newSnapshot.isVisitable&&this.trackedElementsAreIdentical}get reloadReason(){if(!this.newSnapshot.isVisitable)return{reason:"turbo_visit_control_is_reload"};if(!this.trackedElementsAreIdentical)return{reason:"tracked_element_mismatch"}}async prepareToRender(){this.#e(),await this.mergeHead()}async render(){this.willRender&&await this.replaceBody()}finishRendering(){super.finishRendering(),this.isPreview||this.focusFirstAutofocusableElement()}get currentHeadSnapshot(){return this.currentSnapshot.headSnapshot}get newHeadSnapshot(){return this.newSnapshot.headSnapshot}get newElement(){return this.newSnapshot.element}#e(){let{documentElement:e}=this.currentSnapshot,{lang:n}=this.newSnapshot;n?e.setAttribute("lang",n):e.removeAttribute("lang")}async mergeHead(){let e=this.mergeProvisionalElements(),n=this.copyNewHeadStylesheetElements();this.copyNewHeadScriptElements(),await e,await n,this.willRender&&this.removeUnusedDynamicStylesheetElements()}async replaceBody(){await this.preservingPermanentElements(async()=>{this.activateNewBody(),await this.assignNewBody()})}get trackedElementsAreIdentical(){return this.currentHeadSnapshot.trackedElementSignature==this.newHeadSnapshot.trackedElementSignature}async copyNewHeadStylesheetElements(){let e=[];for(let n of this.newHeadStylesheetElements)e.push(Co(n)),document.head.appendChild(n);await Promise.all(e)}copyNewHeadScriptElements(){for(let e of this.newHeadScriptElements)document.head.appendChild(Ot(e))}removeUnusedDynamicStylesheetElements(){for(let e of this.unusedDynamicStylesheetElements)document.head.removeChild(e)}async mergeProvisionalElements(){let e=[...this.newHeadProvisionalElements];for(let n of this.currentHeadProvisionalElements)this.isCurrentElementInElementList(n,e)||document.head.removeChild(n);for(let n of e)document.head.appendChild(n)}isCurrentElementInElementList(e,n){for(let[r,s]of n.entries()){if(e.tagName=="TITLE"){if(s.tagName!="TITLE")continue;if(e.innerHTML==s.innerHTML)return n.splice(r,1),!0}if(s.isEqualNode(e))return n.splice(r,1),!0}return!1}removeCurrentHeadProvisionalElements(){for(let e of this.currentHeadProvisionalElements)document.head.removeChild(e)}copyNewHeadProvisionalElements(){for(let e of this.newHeadProvisionalElements)document.head.appendChild(e)}activateNewBody(){document.adoptNode(this.newElement),this.activateNewBodyScriptElements()}activateNewBodyScriptElements(){for(let e of this.newBodyScriptElements){let n=Ot(e);e.replaceWith(n)}}async assignNewBody(){await this.renderElement(this.currentElement,this.newElement)}get unusedDynamicStylesheetElements(){return this.oldHeadStylesheetElements.filter(e=>e.getAttribute("data-turbo-track")==="dynamic")}get oldHeadStylesheetElements(){return this.currentHeadSnapshot.getStylesheetElementsNotInSnapshot(this.newHeadSnapshot)}get newHeadStylesheetElements(){return this.newHeadSnapshot.getStylesheetElementsNotInSnapshot(this.currentHeadSnapshot)}get newHeadScriptElements(){return this.newHeadSnapshot.getScriptElementsNotInSnapshot(this.currentHeadSnapshot)}get currentHeadProvisionalElements(){return this.currentHeadSnapshot.provisionalElements}get newHeadProvisionalElements(){return this.newHeadSnapshot.provisionalElements}get newBodyScriptElements(){return this.newElement.querySelectorAll("script")}},Li=class extends Qe{async render(){this.willRender&&await this.#e()}get renderMethod(){return"morph"}async#e(){this.#t(this.currentElement,this.newElement),this.#a(),te("turbo:morph",{detail:{currentElement:this.currentElement,newElement:this.newElement}})}#t(e,n,r="outerHTML"){this.isMorphingTurboFrame=this.#l(e),wa.morph(e,n,{morphStyle:r,callbacks:{beforeNodeAdded:this.#n,beforeNodeMorphed:this.#r,beforeAttributeUpdated:this.#s,beforeNodeRemoved:this.#o,afterNodeMorphed:this.#i}})}#n=e=>!(e.id&&e.hasAttribute("data-turbo-permanent")&&document.getElementById(e.id));#r=(e,n)=>{if(e instanceof HTMLElement)return!e.hasAttribute("data-turbo-permanent")&&(this.isMorphingTurboFrame||!this.#l(e))?!te("turbo:before-morph-element",{cancelable:!0,target:e,detail:{newElement:n}}).defaultPrevented:!1};#s=(e,n,r)=>!te("turbo:before-morph-attribute",{cancelable:!0,target:n,detail:{attributeName:e,mutationType:r}}).defaultPrevented;#i=(e,n)=>{n instanceof HTMLElement&&te("turbo:morph-element",{target:e,detail:{newElement:n}})};#o=e=>this.#r(e);#a(){this.#h().forEach(e=>{this.#l(e)&&(this.#u(e),e.reload())})}#u(e){e.addEventListener("turbo:before-frame-render",n=>{n.detail.render=this.#d},{once:!0})}#d=(e,n)=>{te("turbo:before-frame-morph",{target:e,detail:{currentElement:e,newElement:n}}),this.#t(e,n.children,"innerHTML")};#l(e){return e.src&&e.refresh==="morph"}#h(){return Array.from(document.querySelectorAll("turbo-frame[src]")).filter(e=>!e.closest("[data-turbo-permanent]"))}},Ai=class{keys=[];snapshots={};constructor(e){this.size=e}has(e){return Sn(e)in this.snapshots}get(e){if(this.has(e)){let n=this.read(e);return this.touch(e),n}}put(e,n){return this.write(e,n),this.touch(e),n}clear(){this.snapshots={}}read(e){return this.snapshots[Sn(e)]}write(e,n){this.snapshots[Sn(e)]=n}touch(e){let n=Sn(e),r=this.keys.indexOf(n);r>-1&&this.keys.splice(r,1),this.keys.unshift(n),this.trim()}trim(){for(let e of this.keys.splice(this.size))delete this.snapshots[e]}},ki=class extends kn{snapshotCache=new Ai(10);lastRenderedLocation=new URL(location.href);forceReloaded=!1;shouldTransitionTo(e){return this.snapshot.prefersViewTransitions&&e.prefersViewTransitions}renderPage(e,n=!1,r=!0,s){let u=this.isPageRefresh(s)&&this.snapshot.shouldMorphPage?Li:Qe,l=new u(this.snapshot,e,Qe.renderElement,n,r);return l.shouldRender?s?.changeHistory():this.forceReloaded=!0,this.render(l)}renderError(e,n){n?.changeHistory();let r=new Rn(this.snapshot,e,Rn.renderElement,!1);return this.render(r)}clearSnapshotCache(){this.snapshotCache.clear()}async cacheSnapshot(e=this.snapshot){if(e.isCacheable){this.delegate.viewWillCacheSnapshot();let{lastRenderedLocation:n}=this;await Pr();let r=e.clone();return this.snapshotCache.put(n,r),r}}getCachedSnapshotForLocation(e){return this.snapshotCache.get(e)}isPageRefresh(e){return!e||this.lastRenderedLocation.pathname===e.location.pathname&&e.action==="replace"}shouldPreserveScrollPosition(e){return this.isPageRefresh(e)&&this.snapshot.shouldPreserveScrollPosition}get snapshot(){return ye.fromElement(this.element)}},Ti=class{selector="a[data-turbo-preload]";constructor(e,n){this.delegate=e,this.snapshotCache=n}start(){document.readyState==="loading"?document.addEventListener("DOMContentLoaded",this.#e):this.preloadOnLoadLinksForView(document.body)}stop(){document.removeEventListener("DOMContentLoaded",this.#e)}preloadOnLoadLinksForView(e){for(let n of e.querySelectorAll(this.selector))this.delegate.shouldPreloadLink(n)&&this.preloadURL(n)}async preloadURL(e){let n=new URL(e.href);if(this.snapshotCache.has(n))return;await new He(this,be.get,n,new URLSearchParams,e).perform()}prepareRequest(e){e.headers["X-Sec-Purpose"]="prefetch"}async requestSucceededWithResponse(e,n){try{let r=await n.responseHTML,s=ye.fromHTMLString(r);this.snapshotCache.put(e.url,s)}catch{}}requestStarted(e){}requestErrored(e){}requestFinished(e){}requestPreventedHandlingResponse(e,n){}requestFailedWithResponse(e,n){}#e=()=>{this.preloadOnLoadLinksForView(document.body)}},xi=class{constructor(e){this.session=e}clear(){this.session.clearCache()}resetCacheControl(){this.#e("")}exemptPageFromCache(){this.#e("no-cache")}exemptPageFromPreview(){this.#e("no-preview")}#e(e){Ro("turbo-cache-control",e)}},Ci=class{navigator=new _i(this);history=new vi(this);view=new ki(this,document.documentElement);adapter=new mi(this);pageObserver=new wi(this);cacheObserver=new gi;linkPrefetchObserver=new yi(this,document);linkClickObserver=new xn(this,window);formSubmitObserver=new Ht(this,document);scrollObserver=new Si(this);streamObserver=new qi(this);formLinkClickObserver=new Cn(this,document.documentElement);frameRedirector=new bi(this,document.documentElement);streamMessageRenderer=new Ei;cache=new xi(this);drive=!0;enabled=!0;progressBarDelay=500;started=!1;formMode="on";#e=150;constructor(e){this.recentRequests=e,this.preloader=new Ti(this,this.view.snapshotCache),this.debouncedRefresh=this.refresh,this.pageRefreshDebouncePeriod=this.pageRefreshDebouncePeriod}start(){this.started||(this.pageObserver.start(),this.cacheObserver.start(),this.linkPrefetchObserver.start(),this.formLinkClickObserver.start(),this.linkClickObserver.start(),this.formSubmitObserver.start(),this.scrollObserver.start(),this.streamObserver.start(),this.frameRedirector.start(),this.history.start(),this.preloader.start(),this.started=!0,this.enabled=!0)}disable(){this.enabled=!1}stop(){this.started&&(this.pageObserver.stop(),this.cacheObserver.stop(),this.linkPrefetchObserver.stop(),this.formLinkClickObserver.stop(),this.linkClickObserver.stop(),this.formSubmitObserver.stop(),this.scrollObserver.stop(),this.streamObserver.stop(),this.frameRedirector.stop(),this.history.stop(),this.preloader.stop(),this.started=!1)}registerAdapter(e){this.adapter=e}visit(e,n={}){let r=n.frame?document.getElementById(n.frame):null;if(r instanceof Ee){let s=n.action||Ke(r);r.delegate.proposeVisitIfNavigatedWithAction(r,s),r.src=e.toString()}else this.navigator.proposeVisit(le(e),n)}refresh(e,n){n&&this.recentRequests.has(n)||this.visit(e,{action:"replace",shouldCacheSnapshot:!1})}connectStreamSource(e){this.streamObserver.connectStreamSource(e)}disconnectStreamSource(e){this.streamObserver.disconnectStreamSource(e)}renderStreamMessage(e){this.streamMessageRenderer.render(Ne.wrap(e))}clearCache(){this.view.clearSnapshotCache()}setProgressBarDelay(e){this.progressBarDelay=e}setFormMode(e){this.formMode=e}get location(){return this.history.location}get restorationIdentifier(){return this.history.restorationIdentifier}get pageRefreshDebouncePeriod(){return this.#e}set pageRefreshDebouncePeriod(e){this.refresh=jo(this.debouncedRefresh.bind(this),e),this.#e=e}shouldPreloadLink(e){let n=e.hasAttribute("data-turbo-method"),r=e.hasAttribute("data-turbo-stream"),s=e.getAttribute("data-turbo-frame"),o=s=="_top"?null:document.getElementById(s)||gt(e,"turbo-frame:not([disabled])");if(n||r||o instanceof Ee)return!1;{let u=new URL(e.href);return this.elementIsNavigatable(e)&&De(u,this.snapshot.rootLocation)}}historyPoppedToLocationWithRestorationIdentifierAndDirection(e,n,r){this.enabled?this.navigator.startVisit(e,n,{action:"restore",historyChanged:!0,direction:r}):this.adapter.pageInvalidated({reason:"turbo_disabled"})}scrollPositionChanged(e){this.history.updateRestorationData({scrollPosition:e})}willSubmitFormLinkToLocation(e,n){return this.elementIsNavigatable(e)&&De(n,this.snapshot.rootLocation)}submittedFormLinkToLocation(){}canPrefetchRequestToLocation(e,n){return this.elementIsNavigatable(e)&&De(n,this.snapshot.rootLocation)}willFollowLinkToLocation(e,n,r){return this.elementIsNavigatable(e)&&De(n,this.snapshot.rootLocation)&&this.applicationAllowsFollowingLinkToLocation(e,n,r)}followedLinkToLocation(e,n){let r=this.getActionForLink(e),s=e.hasAttribute("data-turbo-stream");this.visit(n.href,{action:r,acceptsStreamResponse:s})}allowsVisitingLocationWithAction(e,n){return this.locationWithActionIsSamePage(e,n)||this.applicationAllowsVisitingLocation(e)}visitProposedToLocation(e,n){Tr(e),this.adapter.visitProposedToLocation(e,n)}visitStarted(e){e.acceptsStreamResponse||(Ln(document.documentElement),this.view.markVisitDirection(e.direction)),Tr(e.location),e.silent||this.notifyApplicationAfterVisitingLocation(e.location,e.action)}visitCompleted(e){this.view.unmarkVisitDirection(),An(document.documentElement),this.notifyApplicationAfterPageLoad(e.getTimingMetrics())}locationWithActionIsSamePage(e,n){return this.navigator.locationWithActionIsSamePage(e,n)}visitScrolledToSamePageLocation(e,n){this.notifyApplicationAfterVisitingSamePageLocation(e,n)}willSubmitForm(e,n){let r=Pi(e,n);return this.submissionIsNavigatable(e,n)&&De(le(r),this.snapshot.rootLocation)}formSubmitted(e,n){this.navigator.submitForm(e,n)}pageBecameInteractive(){this.view.lastRenderedLocation=this.location,this.notifyApplicationAfterPageLoad()}pageLoaded(){this.history.assumeControlOfScrollRestoration()}pageWillUnload(){this.history.relinquishControlOfScrollRestoration()}receivedMessageFromStream(e){this.renderStreamMessage(e)}viewWillCacheSnapshot(){this.navigator.currentVisit?.silent||this.notifyApplicationBeforeCachingSnapshot()}allowsImmediateRender({element:e},n){let r=this.notifyApplicationBeforeRender(e,n),{defaultPrevented:s,detail:{render:o}}=r;return this.view.renderer&&o&&(this.view.renderer.renderElement=o),!s}viewRenderedSnapshot(e,n,r){this.view.lastRenderedLocation=this.history.location,this.notifyApplicationAfterRender(r)}preloadOnLoadLinksForView(e){this.preloader.preloadOnLoadLinksForView(e)}viewInvalidated(e){this.adapter.pageInvalidated(e)}frameLoaded(e){this.notifyApplicationAfterFrameLoad(e)}frameRendered(e,n){this.notifyApplicationAfterFrameRender(e,n)}applicationAllowsFollowingLinkToLocation(e,n,r){return!this.notifyApplicationAfterClickingLinkToLocation(e,n,r).defaultPrevented}applicationAllowsVisitingLocation(e){return!this.notifyApplicationBeforeVisitingLocation(e).defaultPrevented}notifyApplicationAfterClickingLinkToLocation(e,n,r){return te("turbo:click",{target:e,detail:{url:n.href,originalEvent:r},cancelable:!0})}notifyApplicationBeforeVisitingLocation(e){return te("turbo:before-visit",{detail:{url:e.href},cancelable:!0})}notifyApplicationAfterVisitingLocation(e,n){return te("turbo:visit",{detail:{url:e.href,action:n}})}notifyApplicationBeforeCachingSnapshot(){return te("turbo:before-cache")}notifyApplicationBeforeRender(e,n){return te("turbo:before-render",{detail:{newBody:e,...n},cancelable:!0})}notifyApplicationAfterRender(e){return te("turbo:render",{detail:{renderMethod:e}})}notifyApplicationAfterPageLoad(e={}){return te("turbo:load",{detail:{url:this.location.href,timing:e}})}notifyApplicationAfterVisitingSamePageLocation(e,n){dispatchEvent(new HashChangeEvent("hashchange",{oldURL:e.toString(),newURL:n.toString()}))}notifyApplicationAfterFrameLoad(e){return te("turbo:frame-load",{target:e})}notifyApplicationAfterFrameRender(e,n){return te("turbo:frame-render",{detail:{fetchResponse:e},target:n,cancelable:!0})}submissionIsNavigatable(e,n){if(this.formMode=="off")return!1;{let r=n?this.elementIsNavigatable(n):!0;return this.formMode=="optin"?r&&e.closest('[data-turbo="true"]')!=null:r&&this.elementIsNavigatable(e)}}elementIsNavigatable(e){let n=gt(e,"[data-turbo]"),r=gt(e,"turbo-frame");return this.drive||r?n?n.getAttribute("data-turbo")!="false":!0:n?n.getAttribute("data-turbo")=="true":!1}getActionForLink(e){return Ke(e)||"advance"}get snapshot(){return this.view.snapshot}};function Tr(t){Object.defineProperties(t,Sa)}var Sa={absoluteURL:{get(){return this.toString()}}},Q=new Ci(Fr),{cache:Ur,navigator:zr}=Q;function ji(){Q.start()}function Jr(t){Q.registerAdapter(t)}function Yr(t,e){Q.visit(t,e)}function Vt(t){Q.connectStreamSource(t)}function Wt(t){Q.disconnectStreamSource(t)}function Xr(t){Q.renderStreamMessage(t)}function Gr(){console.warn("Please replace `Turbo.clearCache()` with `Turbo.cache.clear()`. The top-level function is deprecated and will be removed in a future version of Turbo.`"),Q.clearCache()}function Kr(t){Q.setProgressBarDelay(t)}function Qr(t){Ft.confirmMethod=t}function Zr(t){Q.setFormMode(t)}var Ea=Object.freeze({__proto__:null,navigator:zr,session:Q,cache:Ur,PageRenderer:Qe,PageSnapshot:ye,FrameRenderer:wt,fetch:Mi,start:ji,registerAdapter:Jr,visit:Yr,connectStreamSource:Vt,disconnectStreamSource:Wt,renderStreamMessage:Xr,clearCache:Gr,setProgressBarDelay:Kr,setConfirmMethod:Qr,setFormMode:Zr}),$i=class extends Error{},Ri=class{fetchResponseLoaded=e=>Promise.resolve();#e=null;#t=()=>{};#n=!1;#r=!1;#s=new Set;action=null;constructor(e){this.element=e,this.view=new ui(this,this.element),this.appearanceObserver=new li(this,this.element),this.formLinkClickObserver=new Cn(this,this.element),this.linkInterceptor=new Tn(this,this.element),this.restorationIdentifier=Fe(),this.formSubmitObserver=new Ht(this,this.element)}connect(){this.#n||(this.#n=!0,this.loadingStyle==Xe.lazy?this.appearanceObserver.start():this.#i(),this.formLinkClickObserver.start(),this.linkInterceptor.start(),this.formSubmitObserver.start())}disconnect(){this.#n&&(this.#n=!1,this.appearanceObserver.stop(),this.formLinkClickObserver.stop(),this.linkInterceptor.stop(),this.formSubmitObserver.stop())}disabledChanged(){this.loadingStyle==Xe.eager&&this.#i()}sourceURLChanged(){this.#b("src")||(this.element.isConnected&&(this.complete=!1),(this.loadingStyle==Xe.eager||this.#r)&&this.#i())}sourceURLReloaded(){let{src:e}=this.element;return this.element.removeAttribute("complete"),this.element.src=null,this.element.src=e,this.element.loaded}loadingStyleChanged(){this.loadingStyle==Xe.lazy?this.appearanceObserver.start():(this.appearanceObserver.stop(),this.#i())}async#i(){this.enabled&&this.isActive&&!this.complete&&this.sourceURL&&(this.element.loaded=this.#a(le(this.sourceURL)),this.appearanceObserver.stop(),await this.element.loaded,this.#r=!0)}async loadResponse(e){(e.redirected||e.succeeded&&e.isHTML)&&(this.sourceURL=e.response.url);try{let n=await e.responseHTML;if(n){let r=Ir(n);ye.fromDocument(r).isVisitable?await this.#o(e,r):await this.#d(e)}}finally{this.fetchResponseLoaded=()=>Promise.resolve()}}elementAppearedInViewport(e){this.proposeVisitIfNavigatedWithAction(e,Ke(e)),this.#i()}willSubmitFormLinkToLocation(e){return this.#f(e)}submittedFormLinkToLocation(e,n,r){let s=this.#c(e);s&&r.setAttribute("data-turbo-frame",s.id)}shouldInterceptLinkClick(e,n,r){return this.#f(e)}linkClickIntercepted(e,n){this.#u(e,n)}willSubmitForm(e,n){return e.closest("turbo-frame")==this.element&&this.#f(e,n)}formSubmitted(e,n){this.formSubmission&&this.formSubmission.stop(),this.formSubmission=new Ft(this,e,n);let{fetchRequest:r}=this.formSubmission;this.prepareRequest(r),this.formSubmission.start()}prepareRequest(e){e.headers["Turbo-Frame"]=this.id,this.currentNavigationElement?.hasAttribute("data-turbo-stream")&&e.acceptResponseType(Ne.contentType)}requestStarted(e){Ln(this.element)}requestPreventedHandlingResponse(e,n){this.#t()}async requestSucceededWithResponse(e,n){await this.loadResponse(n),this.#t()}async requestFailedWithResponse(e,n){await this.loadResponse(n),this.#t()}requestErrored(e,n){console.error(n),this.#t()}requestFinished(e){An(this.element)}formSubmissionStarted({formElement:e}){Ln(e,this.#c(e))}formSubmissionSucceededWithResponse(e,n){let r=this.#c(e.formElement,e.submitter);r.delegate.proposeVisitIfNavigatedWithAction(r,Ke(e.submitter,e.formElement,r)),r.delegate.loadResponse(n),e.isSafe||Q.clearCache()}formSubmissionFailedWithResponse(e,n){this.element.delegate.loadResponse(n),Q.clearCache()}formSubmissionErrored(e,n){console.error(n)}formSubmissionFinished({formElement:e}){An(e,this.#c(e))}allowsImmediateRender({element:e},n){let r=te("turbo:before-frame-render",{target:this.element,detail:{newFrame:e,...n},cancelable:!0}),{defaultPrevented:s,detail:{render:o}}=r;return this.view.renderer&&o&&(this.view.renderer.renderElement=o),!s}viewRenderedSnapshot(e,n,r){}preloadOnLoadLinksForView(e){Q.preloadOnLoadLinksForView(e)}viewInvalidated(){}willRenderFrame(e,n){this.previousFrameElement=e.cloneNode(!0)}visitCachedSnapshot=({element:e})=>{let n=e.querySelector("#"+this.element.id);n&&this.previousFrameElement&&n.replaceChildren(...this.previousFrameElement.children),delete this.previousFrameElement};async#o(e,n){let r=await this.extractForeignFrameElement(n.body);if(r){let s=new _t(r),o=new wt(this,this.view.snapshot,s,wt.renderElement,!1,!1);this.view.renderPromise&&await this.view.renderPromise,this.changeHistory(),await this.view.render(o),this.complete=!0,Q.frameRendered(e,this.element),Q.frameLoaded(this.element),await this.fetchResponseLoaded(e)}else this.#l(e)&&this.#h(e)}async#a(e){let n=new He(this,be.get,e,new URLSearchParams,this.element);return this.#e?.cancel(),this.#e=n,new Promise(r=>{this.#t=()=>{this.#t=()=>{},this.#e=null,r()},n.perform()})}#u(e,n,r){let s=this.#c(e,r);s.delegate.proposeVisitIfNavigatedWithAction(s,Ke(r,e,s)),this.#y(e,()=>{s.src=n})}proposeVisitIfNavigatedWithAction(e,n=null){if(this.action=n,this.action){let r=ye.fromElement(e).clone(),{visitCachedSnapshot:s}=e.delegate;e.delegate.fetchResponseLoaded=async o=>{if(e.src){let{statusCode:u,redirected:l}=o,a=await o.responseHTML,d={response:{statusCode:u,redirected:l,responseHTML:a},visitCachedSnapshot:s,willRender:!1,updateHistory:!1,restorationIdentifier:this.restorationIdentifier,snapshot:r};this.action&&(d.action=this.action),Q.visit(e.src,d)}}}}changeHistory(){if(this.action){let e=jr(this.action);Q.history.update(e,le(this.element.src||""),this.restorationIdentifier)}}async#d(e){console.warn(`The response (${e.statusCode}) from <turbo-frame id="${this.element.id}"> is performing a full page visit due to turbo-visit-control.`),await this.#p(e.response)}#l(e){this.element.setAttribute("complete","");let n=e.response,r=async(o,u)=>{o instanceof Response?this.#p(o):Q.visit(o,u)};return!te("turbo:frame-missing",{target:this.element,detail:{response:n,visit:r},cancelable:!0}).defaultPrevented}#h(e){this.view.missing(),this.#m(e)}#m(e){let n=`The response (${e.statusCode}) did not contain the expected <turbo-frame id="${this.element.id}"> and will be ignored. To perform a full page visit instead, set turbo-visit-control to reload.`;throw new $i(n)}async#p(e){let n=new vt(e),r=await n.responseHTML,{location:s,redirected:o,statusCode:u}=n;return Q.visit(s,{response:{redirected:o,statusCode:u,responseHTML:r}})}#c(e,n){let r=qn("data-turbo-frame",n,e)||this.element.getAttribute("target");return xr(r)??this.element}async extractForeignFrameElement(e){let n,r=CSS.escape(this.id);try{if(n=Cr(e.querySelector(`turbo-frame#${r}`),this.sourceURL),n)return n;if(n=Cr(e.querySelector(`turbo-frame[src][recurse~=${r}]`),this.sourceURL),n)return await n.loaded,await this.extractForeignFrameElement(n)}catch(s){return console.error(s),new Ee}return null}#g(e,n){let r=Pi(e,n);return De(le(r),this.rootLocation)}#f(e,n){let r=qn("data-turbo-frame",n,e)||this.element.getAttribute("target");if(e instanceof HTMLFormElement&&!this.#g(e,n)||!this.enabled||r=="_top")return!1;if(r){let s=xr(r);if(s)return!s.disabled}return!(!Q.elementIsNavigatable(e)||n&&!Q.elementIsNavigatable(n))}get id(){return this.element.id}get enabled(){return!this.element.disabled}get sourceURL(){if(this.element.src)return this.element.src}set sourceURL(e){this.#v("src",()=>{this.element.src=e??null})}get loadingStyle(){return this.element.loading}get isLoading(){return this.formSubmission!==void 0||this.#t()!==void 0}get complete(){return this.element.hasAttribute("complete")}set complete(e){e?this.element.setAttribute("complete",""):this.element.removeAttribute("complete")}get isActive(){return this.element.isActive&&this.#n}get rootLocation(){let n=this.element.ownerDocument.querySelector('meta[name="turbo-root"]')?.content??"/";return le(n)}#b(e){return this.#s.has(e)}#v(e,n){this.#s.add(e),n(),this.#s.delete(e)}#y(e,n){this.currentNavigationElement=e,n(),delete this.currentNavigationElement}};function xr(t){if(t!=null){let e=document.getElementById(t);if(e instanceof Ee)return e}}function Cr(t,e){if(t){let n=t.getAttribute("src");if(n!=null&&e!=null&&_o(n,e))throw new Error(`Matching <turbo-frame id="${t.id}"> element has a source URL which references itself`);if(t.ownerDocument!==document&&(t=document.importNode(t,!0)),t instanceof Ee)return t.connectedCallback(),t.disconnectedCallback(),t}}var Bi={after(){this.targetElements.forEach(t=>t.parentElement?.insertBefore(this.templateContent,t.nextSibling))},append(){this.removeDuplicateTargetChildren(),this.targetElements.forEach(t=>t.append(this.templateContent))},before(){this.targetElements.forEach(t=>t.parentElement?.insertBefore(this.templateContent,t))},prepend(){this.removeDuplicateTargetChildren(),this.targetElements.forEach(t=>t.prepend(this.templateContent))},remove(){this.targetElements.forEach(t=>t.remove())},replace(){this.targetElements.forEach(t=>t.replaceWith(this.templateContent))},update(){this.targetElements.forEach(t=>{t.innerHTML="",t.append(this.templateContent)})},refresh(){Q.refresh(this.baseURI,this.requestId)}},Pn=class t extends HTMLElement{static async renderElement(e){await e.performAction()}async connectedCallback(){try{await this.render()}catch(e){console.error(e)}finally{this.disconnect()}}async render(){return this.renderPromise??=(async()=>{let e=this.beforeRenderEvent;this.dispatchEvent(e)&&(await mt(),await e.detail.render(this))})()}disconnect(){try{this.remove()}catch{}}removeDuplicateTargetChildren(){this.duplicateChildren.forEach(e=>e.remove())}get duplicateChildren(){let e=this.targetElements.flatMap(r=>[...r.children]).filter(r=>!!r.id),n=[...this.templateContent?.children||[]].filter(r=>!!r.id).map(r=>r.id);return e.filter(r=>n.includes(r.id))}get performAction(){if(this.action){let e=Bi[this.action];if(e)return e;this.#e("unknown action")}this.#e("action attribute is missing")}get targetElements(){if(this.target)return this.targetElementsById;if(this.targets)return this.targetElementsByQuery;this.#e("target or targets attribute is missing")}get templateContent(){return this.templateElement.content.cloneNode(!0)}get templateElement(){if(this.firstElementChild===null){let e=this.ownerDocument.createElement("template");return this.appendChild(e),e}else if(this.firstElementChild instanceof HTMLTemplateElement)return this.firstElementChild;this.#e("first child element must be a <template> element")}get action(){return this.getAttribute("action")}get target(){return this.getAttribute("target")}get targets(){return this.getAttribute("targets")}get requestId(){return this.getAttribute("request-id")}#e(e){throw new Error(`${this.description}: ${e}`)}get description(){return(this.outerHTML.match(/<[^>]+>/)??[])[0]??"<turbo-stream>"}get beforeRenderEvent(){return new CustomEvent("turbo:before-stream-render",{bubbles:!0,cancelable:!0,detail:{newStream:this,render:t.renderElement}})}get targetElementsById(){let e=this.ownerDocument?.getElementById(this.target);return e!==null?[e]:[]}get targetElementsByQuery(){let e=this.ownerDocument?.querySelectorAll(this.targets);return e.length!==0?Array.prototype.slice.call(e):[]}},In=class extends HTMLElement{streamSource=null;connectedCallback(){this.streamSource=this.src.match(/^ws{1,2}:/)?new WebSocket(this.src):new EventSource(this.src),Vt(this.streamSource)}disconnectedCallback(){this.streamSource&&(this.streamSource.close(),Wt(this.streamSource))}get src(){return this.getAttribute("src")||""}};Ee.delegateConstructor=Ri;customElements.get("turbo-frame")===void 0&&customElements.define("turbo-frame",Ee);customElements.get("turbo-stream")===void 0&&customElements.define("turbo-stream",Pn);customElements.get("turbo-stream-source")===void 0&&customElements.define("turbo-stream-source",In);(()=>{let t=document.currentScript;if(t&&!t.hasAttribute("data-turbo-suppress-warning"))for(t=t.parentElement;t;){if(t==document.body)return console.warn(Mr`
        You are loading Turbo from a <script> element inside the <body> element. This is probably not what you meant to do!

        Load your application’s JavaScript bundle inside the <head> element instead. <script> elements in <body> are evaluated with each page change.

        For more information, see: https://turbo.hotwired.dev/handbook/building#working-with-script-elements

        ——
        Suppress this warning by adding a "data-turbo-suppress-warning" attribute to: %s
      `,t.outerHTML);t=t.parentElement}})();window.Turbo={...Ea,StreamActions:Bi};ji();var os;async function ka(){return os||ss(Ta().then(ss))}function ss(t){return os=t}async function Ta(){let{createConsumer:t}=await Promise.resolve().then(()=>(rs(),is));return t()}async function as(t,e){let{subscriptions:n}=await ka();return n.create(t,e)}function Gt(t){return!t||typeof t!="object"||t instanceof Date||t instanceof RegExp?t:Array.isArray(t)?t.map(Gt):Object.keys(t).reduce(function(e,n){var r=n[0].toLowerCase()+n.slice(1).replace(/([A-Z]+)/g,function(s,o){return"_"+o.toLowerCase()});return e[r]=Gt(t[n]),e},{})}var Yi=class extends HTMLElement{async connectedCallback(){Vt(this),this.subscription=await as(this.channel,{received:this.dispatchMessageEvent.bind(this),connected:this.subscriptionConnected.bind(this),disconnected:this.subscriptionDisconnected.bind(this)})}disconnectedCallback(){Wt(this),this.subscription&&this.subscription.unsubscribe()}dispatchMessageEvent(e){let n=new MessageEvent("message",{data:e});return this.dispatchEvent(n)}subscriptionConnected(){this.setAttribute("connected","")}subscriptionDisconnected(){this.removeAttribute("connected")}get channel(){let e=this.getAttribute("channel"),n=this.getAttribute("signed-stream-name");return{channel:e,signed_stream_name:n,...Gt({...this.dataset})}}};customElements.get("turbo-cable-stream-source")===void 0&&customElements.define("turbo-cable-stream-source",Yi);function ls(t){if(t.target instanceof HTMLFormElement){let{target:e,detail:{fetchOptions:n}}=t;e.addEventListener("turbo:submit-start",({detail:{formSubmission:{submitter:r}}})=>{let s=Ra(n.body)?n.body:new URLSearchParams,o=Ca(r,s,e);/get/i.test(o)||(/post/i.test(o)?s.delete("_method"):s.set("_method",o),n.method="post")},{once:!0})}}function Ca(t,e,n){let r=$a(t),s=e.get("_method"),o=n.getAttribute("method")||"get";return typeof r=="string"?r:typeof s=="string"?s:o}function $a(t){return t instanceof HTMLButtonElement||t instanceof HTMLInputElement?t.name==="_method"?t.value:t.hasAttribute("formmethod")?t.formMethod:null:null}function Ra(t){return t instanceof FormData||t instanceof URLSearchParams}window.Turbo=Di;addEventListener("turbo:before-fetch-request",ls);ql.adminClassroomView=function(){let t="",e="";function n(s){t=s,e=document.querySelector(".js-classroom-focuses"),r()}function r(){ql.getJson(t).then(s=>e.innerHTML=s.focuses).then(()=>setTimeout(r,1e4)).catch(s=>console.error(s.message))}return{init:n}}();ql.adminUser=function(){function t(){let e=document.getElementById("admin-user-blocked-checkbox"),n=document.getElementById("admin-user-blocked-reason-wrapper"),r=document.getElementById("admin-user-blocked-reason");e.addEventListener("change",()=>{n.classList.remove("not-visible"),r.value=""})}return{init:t}}();ql.adminLabInstances=function(){function t(){$(".admin_labs_container .lab_instance_duration_link").click(function(e){e.preventDefault();let n=$("#lab_instance_duration_form");n.find("#id").attr("value",$(this).data("lab_instance_id")),n.find("#duration_minutes").val(Math.floor($(this).data("duration")/60)),n.find("input[type=submit]").unbind("click").click(()=>{n.find("form").valid()&&n.find("form").on("ajax:success",(r,s,o,u)=>{n.modal("hide");let l=$("#lab_instance_"+s.id);return s.elapsed_seconds===null?l.find(".display_duration").text("| "+s.duration):l.find(".display_duration").text(s.elapsed_seconds+" | "+s.duration),l.find(".lab_instance_duration_link").data("duration",s.duration),!1}).on("ajax:error",(r,s,o,u)=>{n.find(".error_explanation").find("ul").html("<li>"+s.responseText+"</li>")}).submit()}),n.modal()}),document.querySelectorAll(".js-end-lab").forEach(e=>{e.addEventListener("click",n=>{n.preventDefault();let r=n.target.dataset.labInstanceId;ql.labData.setLabInstanceId(r),confirm(n.target.dataset.jsConfirm)&&(ql.labXhr.stopLab(),location.reload())})})}return{init:t}}();ql.affiliateAutocomplete=function(){function t(){$(".js-affiliate-user-autocomplete").userAutocomplete({source:function(n,r){let s=`?q[${this.element[0].dataset.query}]=${n.term}`;ql.getJson(this.element[0].dataset.autocomplete+s).then(o=>{r(o.map(u=>({label:u,value:u.email})))})},open:function(n,r){$(".js-add-new-user").click(e)}})}function e(n){let r=$(".js-affiliate-user-autocomplete").val();$('.js-new-user input[type="email"]').val(r),$(".js-new-user").removeClass("is-hidden"),$(".js-existing-user").addClass("is-hidden")}return{init:t}}();ql.analytics=function(){function t(){function n(r){for(let s of r.querySelectorAll("*"))s.dataset&&s.dataset.analyticsAction!=null&&s.addEventListener("click",e,!1),s.shadowRoot&&n(s.shadowRoot)}n(document)}function e(n){ql.track(this.dataset.analyticsAction,{category:this.dataset.analyticsCategory,label:this.dataset.analyticsLabel,...this.dataset})}return{init:t}}();ql.announcements=function(){return{switchPhase(t){let e=document.querySelectorAll(".announcement-phase");for(let[o,u]of e.entries())t===o?u.classList.remove("hidden"):u.classList.add("hidden");let n=document.querySelector(".view-message-audience");n?.classList.toggle("hidden",t===0);let r=`<strong>Subject:</strong> ${document.getElementById("announcement_title").value}`,s=`<strong>Message:</strong> ${document.getElementById("announcement_message").value}`;document.getElementById("announcement_preview_message").value=`${r}<br><br>${s}`},checkAllRecipients(){let t=document.getElementsByName("checkAll")[0].checked,e=document.getElementsByName("selected_memberships[]");for(let n of e)n.checked=t},checkSingleRecipient(){document.getElementsByName("checkAll")[0].checked&&(document.getElementsByName("checkAll")[0].checked=!1)},checkAcknowledgement(){let t=document.getElementById("send_button").disabled;document.getElementById("send_button").disabled=!t}}}();ql.assessmentTimer=function(){let n={RETAKE:"retake",SUBMIT:"submit"};function r(){let s=document.querySelector("ql-quiz"),o=document.querySelector("ql-exam-timer"),u=document.querySelector(".assessment-timer"),l=document.querySelector(".timer-toggle"),a=()=>{o.getAttribute("open")==null&&(o.setAttribute("open","true"),setTimeout(()=>o.removeAttribute("open"),5*1e3))},c=f=>{let b=f.detail,y=o.classList;b<=0&&!y.contains("expired")?(s.dispatchEvent(new Event("timeElapsed")),y.add("expired"),o.setAttribute("open","true")):b<=30&&!y.contains("critical")?(y.add("critical"),a()):b<15*60&&!y.contains("warning")&&(y.add("warning"),a())},d=f=>{switch(f.type){case n.RETAKE:o.resetForRetake(f.detail),o.classList.remove("expired","critical","warning"),u.classList.remove("hidden");break;case n.SUBMIT:o.startedAt=null,o.secondsRemaining=null,u.classList.add("hidden");break}};s&&o&&l&&(o.addEventListener("secondsRemainingChanged",c),s.addEventListener(n.SUBMIT,d),s.addEventListener(n.RETAKE,d))}return{init:r}}();ql.barkerLeaderboard=function(){function t(){document.addEventListener("avatarSelected",e=>{let{option:n}=e.detail;for(let r of document.querySelectorAll(".js-current-avatar"))r.src=n.src;$.post("select_avatar",{barker_avatar_slug:n.slug})})}return{init:t}}();CampaignCodeModalSubmitEnable=function(){$("#campaign-code-modal-submit").prop("disabled",!1)};CampaignCodeModalSubmitDisable=function(){$("#campaign-code-modal-submit").prop("disabled",!0)};ql.campaigns=function(){function t(){$("#campaign_wizard").length>0&&n(),$("#campaign_target_type").change(()=>{n()}),$("input#campaign_events").change(()=>{e()}),$(".campaign_actions_form").on("nested:fieldAdded",r=>{r.target.className==="fields"&&e()})}function e(){$(document).find(".campaign_campaign_actions_event select").empty().append($("input#campaign_events").val().split(",").map(r=>`<option>${$.trim(r)}</option>`).join())}function n(){$("#campaign_target_lab_id").closest(".control-group").hide(),$("#campaign_target_learningpath_id").closest(".control-group").hide(),$("#campaign_target_coursetemplate_id").closest(".control-group").hide(),$("#campaign_target_type").val()==="LearningPath"?$("#campaign_target_learningpath_id").closest(".control-group").show():$("#campaign_target_type").val()==="Lab"?$("#campaign_target_lab_id").closest(".control-group").show():$("#campaign_target_type").val()==="CourseTemplate"&&$("#campaign_target_coursetemplate_id").closest(".control-group").show()}return{init:t}}();ql.catalogAccessBulkRemoval=function(t){let e="received-dry-run-status",n="received-removal-status",r,s;function o(){document.querySelector(".js-start-dry-run").addEventListener("click",k),ql.subscribe(e,d),ql.subscribe(n,f)}function u(I){p(),l(I)}function l(I){r=new ql.Poller(I,t,m=>{ql.publish(e,m)}),r.start()}function a(I){q(),c(I)}function c(I){s===void 0&&(s=new ql.Poller(I,t,m=>{ql.publish(n,m)}),s.start())}function d(I){if(I&&I.dry_run_operation===null){window.location=I.redirect_path;return}I&&I.dry_run_operation.status==="finished"&&(r.stop(),D(),I.dry_run_operation.succeeded?y(I):z())}function f(I){if(I&&I.removal_operation===null){window.location=I.redirect_path;return}I&&I.removal_operation.status==="finished"&&(s.stop(),T(),I.removal_operation.succeeded?window.location=I.redirect_path:b())}function b(){document.querySelector(".removal-dry-run-summary").classList.contains("is-active")?V():z()}function y(I){let m=document.querySelector(".removal-dry-run-summary");m.innerHTML=I.rendered,w(),document.querySelector(".removal-dry-run-summary").classList.add("is-active"),W()}function w(){document.querySelector(".js-confirm-removal-button").addEventListener("click",C),document.querySelector(".js-cancel-bulk-removal").addEventListener("click",j);let g=$(".js-confirm-removal-form");g.on("ajax:success",(v,A)=>{M(),c(`${A.removal_status_path}?removal_operation_id=${A.removal_operation_id}`)}),g.on("ajax:error",(v,A)=>(window.location=A.responseJSON.redirect_path,!1))}function k(){p(),B()}function C(I){N(),J()}function j(){F(),B(),M()}function B(){r&&(r.stop(),r=void 0)}function M(){s&&(s.stop(),s=void 0)}function p(){document.querySelector(".dry-run-loader").classList.add("is-active"),document.querySelector(".removal-general-error").classList.remove("is-active"),W()}function D(){document.querySelector(".dry-run-loader").classList.remove("is-active")}function q(){document.querySelector(".removal-loader").classList.add("is-active"),W()}function T(){document.querySelector(".removal-loader").classList.remove("is-active")}function F(){document.querySelector(".removal-dry-run-summary").classList.remove("is-active"),K()}function N(){document.querySelector(".removal-spinner").classList.add("is-active"),document.querySelector(".removal-actions").classList.add("disabled")}function V(){document.querySelector(".removal-confirmation-error").classList.add("is-active"),document.querySelector(".removal-spinner").classList.remove("is-active"),document.querySelector(".removal-actions").classList.remove("disabled")}function J(){document.querySelector(".removal-confirmation-error").classList.remove("is-active")}function z(){document.querySelector(".removal-general-error").classList.add("is-active"),K()}function W(){document.querySelector(".removal-upload-form").classList.add("disabled")}function K(){document.querySelector(".removal-upload-form").classList.remove("disabled")}return{init:o,pollDryRunOnPageLoad:u,pollRemovalOnPageLoad:a}};ql.catalogs={tracking:function(){function t(){document.querySelectorAll(".js-catalog-item-title a").forEach(n=>n.addEventListener("click",r=>{ql.track("clicked_catalog_list_item",{label:r.target.innerText,type:r.target.dataset.type})},!1))}return{init:t}}(),addItems:function(){$addButtons=[],$catalogItems={};function t(){$catalogItems=document.querySelector(".js-catalog-items"),$addButtons=document.querySelectorAll(".js-add-button"),$addButtons.forEach(s=>{s.addEventListener("click",e,!1)}),ql.subscribe("itemAdded",r)}function e(s){s.preventDefault(),s.stopImmediatePropagation(),$("#add_item_with_children").modal("hide"),n(this.href)}function n(s){fetch(s,{method:"POST",credentials:"include",headers:new Headers({"X-CSRF-Token":document.querySelector('meta[name="csrf-token"]')?.content,Accept:"application/json","Content-Type":"application/json"})}).then(pe).then(ge).then(o=>ql.publish("itemAdded",o)).catch(o=>console.log(o))}function r(s){$firstCatalogItem=$catalogItems.querySelectorAll(".js-catalog-item")[0],$firstCatalogItem?$firstCatalogItem.insertAdjacentHTML("beforebegin",s.html):$catalogItems.insertAdjacentHTML("beforeend",s.html),$visiblebuttons=$catalogItems.querySelectorAll(".js-item-visible"),$visiblebuttons.forEach(o=>{o.hasAttribute("data-listening")||ql.catalogs.editItems.upgradeVisibleButton(o)}),$priceFields=$catalogItems.querySelectorAll(".js-item-price"),$priceFields.forEach(o=>{o.hasAttribute("data-listening")||ql.catalogs.editItems.upgradePriceField(o)}),$oldItem=document.querySelector(`.js-add-item[data-item="${s.catalogableType}_${s.catalogableId}"]`),$($oldItem).animate({height:0},200,()=>{$oldItem.remove()})}return{init:t,addItem:n}}(),searchItems:function(){function t(){$active=window.localStorage.getItem("searchTab")?window.localStorage.getItem("searchTab"):"Labs",e(".js-tab"),e(".js-tab-content"),n(),$tabsContainer=document.querySelector(".js-catalogable-types"),$tabsContainer.addEventListener("click",r)}function e(s){$tabs=document.querySelectorAll(s),$tabs.forEach(o=>{o&&(o.dataset.tab==$active?o.classList.add("is-active"):o.classList.remove("is-active"))})}function n(){$paginationContainers=document.querySelectorAll(".pagination"),$paginationContainers.forEach(s=>{s&&(s.id!=$active.toLowerCase()?s.style.display="none":s.style.display="inline")})}function r(s){$active=document.querySelector(".js-tab.is-active").dataset.tab,window.localStorage.setItem("searchTab",$active),n()}return{init:t}}(),dragAndDrop:function(){$addItems={},$modal={},$name={},$type={},$count={},$with_button={},$without_button={};function t(){$modal=document.querySelector("#add_item_with_children"),$name=$modal.querySelector(".js-add-item-name"),$type=$modal.querySelector(".js-add-item-type"),$count=$modal.querySelector(".js-add-item-children-count"),$with_button=$modal.querySelector(".js-with-children"),$without_button=$modal.querySelector(".js-without-children"),$(".js-add-item").draggable({helper:"clone",appendTo:"body"}),$(".js-catalog-table").droppable({drop:e,activeClass:"is-droppable",hoverClass:"is-active"})}function e(n,r){let s=r.draggable[0];if(s.dataset.hasChildren){let o=s.dataset.name,u=s.dataset.type,l=s.dataset.children,a=s.querySelector(".js-add-with-children").href,c=s.querySelector(".js-add-without-children").href;$name.innerHTML=o,$type.innerHTML=u,$count.innerHTML=l,$with_button.href=a,$without_button.href=c,$("#add_item_with_children").modal("show")}else $addButton=s.querySelector(".js-add-button"),ql.catalogs.addItems.addItem($addButton.href)}return{init:t}}(),editItems:function(){$catalogItems={},$visibleButtons={},$priceFields={};function t(){$catalogItems=document.querySelector(".js-catalog-items"),$visibleButtons=$catalogItems.querySelectorAll(".js-item-visible"),$visibleButtons.forEach(e),$priceFields=$catalogItems.querySelectorAll(".js-item-price"),$priceFields.forEach(n),ql.subscribe("itemUpdated",u)}function e(l){l.addEventListener("click",r,!1),l.dataset.listening="true"}function n(l){l.addEventListener("change",s,!1),l.dataset.listening="true"}function r(l){l.preventDefault(),l.stopImmediatePropagation(),o(this.href)}function s(l){let a=this.dataset.path.replace(/=.*/i,`=${this.value}`);o(a)}function o(l){fetch(l,{method:"PATCH",credentials:"include",headers:new Headers({"X-CSRF-Token":document.querySelector('meta[name="csrf-token"]')?.content,Accept:"application/json","Content-Type":"application/json"})}).then(pe).then(ge).then(a=>ql.publish("itemUpdated",a)).catch(a=>console.log(a))}function u(l){$item=$catalogItems.querySelector(`[data-item = "${l.id}"]`),$visibleButton=$item.querySelector(".js-item-visible");let a=l.visible?"0":"1",c=l.visible?"text--success":"text--light",d=$visibleButton.href.replace(/=\d/i,`=${a}`);$visibleButton.href=d,$visibleButton.classList.remove("text--success"),$visibleButton.classList.remove("text--light"),$visibleButton.classList.add(c),l.price&&($priceField=$item.querySelector(".js-item-price"),$priceField.value=l.price)}return{init:t,upgradeVisibleButton:e,upgradePriceField:n}}(),edit:function(){$enableButton={},$enableIcon={},$fraudButton={},$fraudIcon={};function t(){$enableButton=document.querySelector(".js-enable-catalog"),$enableIcon=$enableButton.querySelector(".material-icons"),$enableButton.addEventListener("click",e,!1),$fraudButton=document.querySelector(".js-fraud-catalog"),$fraudIcon=$fraudButton.querySelector(".material-icons"),$fraudButton.addEventListener("click",e,!1),ql.subscribe("catalogUpdated",r)}function e(s){s.preventDefault(),s.stopImmediatePropagation(),n(this.href)}function n(s){fetch(s,{method:"PATCH",credentials:"include",headers:new Headers({"X-CSRF-Token":document.querySelector('meta[name="csrf-token"]')?.content,Accept:"application/json","Content-Type":"application/json"})}).then(pe).then(ge).then(o=>ql.publish("catalogUpdated",o)).catch(o=>console.log(o))}function r(s){let o=s.enabled_at?"0":"1",u=s.enabled_at?"check_box":"check_box_outline_blank",l=$enableButton.href.replace(/=\d/i,`=${o}`);$enableButton.href=l,$enableIcon.innerHTML=u;let a=s.fraud_protection?"0":"1",c=s.fraud_protection?"check_box":"check_box_outline_blank",d=$fraudButton.href.replace(/=\d/i,`=${a}`);$fraudButton.href=d,$fraudIcon.innerHTML=c}return{init:t}}(),description:function(){function t(e,n,r){document.getElementById(e).checked?document.getElementById(`label_${e}`).innerHTML=n:document.getElementById(`label_${e}`).innerHTML=r}return{checkboxState:t}}()};ql.chat=function(){function t(){s(),zE("messenger:on","close",n)}function e(){r(),zE("messenger","open")}function n(){zE("messenger","close"),s()}function r(){zE("messenger","show")}function s(){zE("messenger","hide")}return{init:t,open:e,close:n,show:r,hide:s}}();ql.processCheckout=function(){let t="",e="",n="",r="",s={};function o(c){t=document.querySelector(".js-toast"),e=document.querySelector(".js-toast-message"),n=t.querySelector(".mdl-js-progress"),r=c,ql.subscribe("received-checkout-status",a)}function u(c){s=new ql.Poller(c,1e3,l),s.start()}function l(c){ql.publish("received-checkout-status",c)}function a(c){let d=JSON.parse(c.result);c.status==="finished"?(s.stop(),n.classList.remove("is-visible"),!c.succeeded||d&&d.error?(t.classList.remove("is-visible"),ql.showFlash("warn",d.error)):window.location.replace(r)):n.classList.contains("is-visible")||n.classList.add("is-visible")}return{init:o,poll:u}}();initChosenListener=function(){$(".js-chosen").chosen({disable_search_threshold:20})};initChosen=function(){initChosenListener();for(let t of document.getElementsByClassName("chosen-container"))t.setAttribute("data-turbo-temporary","")};ql.focusDataPath="";ql.initStudentCheckBoxListeners=function(){[...document.querySelectorAll(".js-select-student")].map(e=>{e.addEventListener("click",ql.handleStudentCheckBox)})};ql.handleStudentCheckBox=function(){ql.toggleStudentRow(this.closest("[data-student]")),ql.toggleStudentCheckBox(this),ql.toggleActionButtons()};ql.toggleStudentRow=function(t){t.classList.toggle("is-selected")};ql.toggleStudentCheckBox=function(t){t.innerHTML=t.innerHTML.includes("blank")?"check_box":"check_box_outline_blank"};ql.toggleActionButtons=function(){let t=ql.getSelectedStudentRows(),e=t.filter(o=>o.dataset.running=="true"),n=document.querySelector(".js-student-table-title"),r=document.querySelector(".js-student-actions-container"),s=r.querySelectorAll(".mdl-button");t.length?(n.style.display="none",r.style.display="block",e.length===0?s.forEach(o=>o.classList.add("mdl-button--disabled")):s.forEach(o=>o.classList.remove("mdl-button--disabled"))):(n.style.display="flex",r.style.display="none")};ql.getSelectedStudentRows=function(){return[...document.querySelectorAll("[data-student]")].filter(e=>e.classList.contains("is-selected"))};ql.initAddTimeListener=function(){document.querySelector(".js-add-time").addEventListener("click",ql.handleAddTime)};ql.handleAddTime=function(){ql.getSelectedStudentRows().filter(n=>n.dataset.running=="true").map(n=>n.dataset.addTimePath).map(n=>{let r=new Request(n,{method:"POST",credentials:"include",headers:new Headers({"X-CSRF-Token":document.querySelector('meta[name="csrf-token"]').content})});fetch(r).then(pe).then(ge).then(()=>ql.getJson(ql.focusDataPath).then(s=>ql.publish("received-focus-data",s))).catch(s=>console.log("Request failed",s))})};ql.initEndLabListener=function(){document.querySelector(".js-end-lab").addEventListener("click",ql.handleEndLab)};ql.handleEndLab=function(){ql.getSelectedStudentRows().filter(n=>n.dataset.running=="true").map(n=>n.dataset.endLabPath).map(n=>{fetch(n,{credentials:"include",method:"POST",headers:{"X-CSRF-Token":document.querySelector('meta[name="csrf-token"]').content}}).then(pe).then(ge).then(()=>ql.getJson(ql.focusDataPath).then(r=>ql.publish("received-focus-data",r))).catch(r=>console.log("Request failed",r))})};ql.trainerClassroomView=function(){let t={},e={};function n(l){l.students.forEach(a=>{let c=document.querySelector(`[data-student="${a.id}"]`);c.dataset.labInstance=a.lab_instance.id,c.dataset.labState=a.lab_instance.lab_state,c.dataset.running=a.lab_instance.running,c.dataset.addTimePath=a.lab_instance.add_time_path,c.dataset.endLabPath=a.lab_instance.end_lab_path;let d=c.querySelector(".js-status");if(d.innerHTML=a.lab_instance.status_html,a.lab_instance.score_html){let f=c.querySelector(".js-score");f.innerHTML=a.lab_instance.score_html}})}function r(l){l.running_hotlabs&&l.running_hotlabs.forEach(a=>{let d=document.querySelector(`#focus_${a.id}`).querySelector(".js-lab-details");a.hotlabs_running_count>0?d.innerHTML=`${a.hotlabs_running_count} labs pre-warmed.`:d.innerHTML=""})}function s(l){t&&(t.innerHTML=l.hotlabs_status)}function o(l){if(e){e.innerHTML=l.hotlabs_button;let a=e.querySelectorAll(".mdl-button");for(let d of a)componentHandler.upgradeElement(d);let c=e.querySelectorAll(".mdl-tooltip");for(let d of c)componentHandler.upgradeElement(d)}}function u(){ql.getJson(ql.focusDataPath).then(l=>ql.publish("received-focus-data",l)).then(()=>setTimeout(u,5e3)).catch(l=>console.log("Request failed",l))}return{init:function(l){ql.focusDataPath=l,t=document.querySelector(".js-hotlabs"),e=document.querySelector(".js-hotlabs-button"),ql.subscribe("received-focus-data",s),ql.subscribe("received-focus-data",o),ql.subscribe("received-focus-data",r),ql.subscribe("received-focus-data",n),u(),document.querySelector("a.classroom__index-item.active").scrollIntoView()}}}();ql.trainerLabDragDrop=function(){function t(){$("#js-sortable").sortable({axis:"y",handle:".handle",update:function(){if($.post($(this).data("update-url"),$(this).sortable("serialize")),document.querySelectorAll(".classroom_section.visible").length>0){let e=document.querySelectorAll(".classroom_section.visible #classroom-table tr.focus.classroom-tr .number_field");for(let n=0;n<e.length;n++)e[n].innerText=n+1+"."}}})}return{init:t}}();ql.classroomStudentView=function(){let t="",e="";function n(o){t=o,e=document.querySelectorAll(".js-focus-row"),ql.subscribe("received-student-data",s),r()}function r(){ql.getJson(t).then(o=>ql.publish("received-student-data",o)).then(()=>setTimeout(r,5e3)).catch(o=>console.log("Request failed",o))}function s(o){o.focuses.forEach(u=>{let l=[...e].filter(a=>a.dataset.focus===u.id).shift();l.innerHTML=u.html})}return{init:n}}();ql.classrooms=function(){return{choose_classroom_template(){let t=0,e=document.getElementById("classroom_wizard"),n={};if(e!=null)n=JSON.parse(e.getAttribute("data-translation"));else return;let r=document.getElementsByName("classroom[classroom_template_id]"),s=null;for(let u of r)if(u.checked){s=u.value;break}let o=document.querySelector(".classroom_templates").dataset.initialClassroomTemplateId;s=s||o,s!=null&&fetch("/authoring/classroom_templates/"+s+".json").then(u=>u.json()).then(u=>{if(u.duration==null||u.duration===0){t=0;let l=n.no_expected_duration;document.querySelector("#classroom_daterange .help-block").innerHTML=l}else{t=parseInt(u.duration);let l=Math.floor(t/(3600*24)),a=Math.floor(t%(3600*24)/3600),c=n.expected_duration+l+n.days+a+n.hours;document.querySelector("#classroom_daterange .help-block").innerHTML=c}ql.classrooms.init_classroom_daterangepicker(t,n),document.getElementById("classroom_template_name").innerHTML=u.name})},init_classroom_daterangepicker(t,e){if(document.getElementById("classroom_daterange")!=null){let n="";document.getElementById("start_date_in_time_zone").value!==""&&(n=document.getElementById("start_date_in_time_zone").value);let r="";document.getElementById("stop_date_in_time_zone").value!==""&&(r=document.getElementById("stop_date_in_time_zone").value),$("#classroom_daterange #start_date").flatpickr({enableTime:!0,dateFormat:"Y-m-d h:i K",defaultDate:n,defaultHour:9,minuteIncrement:15,onChange:function(s,o){document.getElementById("start_date_in_time_zone").value=o}}),$("#classroom_daterange #end_date").flatpickr({enableTime:!0,dateFormat:"Y-m-d G:i K",defaultDate:r,defaultHour:9,minuteIncrement:15,onChange:function(s,o){document.getElementById("stop_date_in_time_zone").value=o}})}},clear_search_fields(){let t=document.querySelectorAll(".classroom_edit_inputs input");for(let e of t)e.value=""}}}();ql.cloudTerminal=function(){function t(e){let n=document.querySelector("#embedded-resource");n!==null&&n.src!==e&&(n.src=e)}return{update(e){if(e===null)return;if(new URL(e).host.endsWith(".qwiklabs.com"))t(e);else throw"studentUrl must be on a subdomain of qwiklabs.com: "+e},reset(){t("about:blank")},isTerminalActive(){let e=document.querySelector("#embedded-resource");return e!==null&&e.src!==""&&e.src!=="about:blank"}}}();ql.collaboratorsEdit=function(){let t="",e="";function n(){t=$(".js-collaborator-list"),e=$(".js-add-collaborator-error"),r(),s()}function r(){$(".js-add-collaborator-form").on("ajax:before",()=>{e.empty()}).on("ajax:success",(l,a,c,d)=>{o(a.rendered)}).on("ajax:error",(l,a,c,d)=>{u(a.responseJSON)})}function s(){$(document).on("ajax:success",".js-collaborator-item",(l,a,c,d)=>{l.currentTarget.remove(),l.preventDefault()}).on("ajax:error",".js-delete-permission",(l,a,c,d)=>{u(a.responseJSON)})}function o(l){t.append(l),t.scrollTop(t[0].scrollHeight),t.find(".mdl-list__item").last().addClass("is-new")}function u(l){l.errors.forEach(c=>{e.append("<p>"+c+"</p>")})}return{init:n}}();ql.course={schedule:function(){let t,e;function n(){t=document.querySelectorAll(".js-more-details"),e=document.querySelectorAll(".js-less-details"),t.forEach(o=>{o.addEventListener("click",r,!1)}),e.forEach(o=>{o.addEventListener("click",s,!1)})}function r(o){o.preventDefault(),this.style.display="none",this.parentElement.querySelector(".js-less-details").style.display="block"}function s(o){o.preventDefault(),this.style.display="none",this.parentElement.querySelector(".js-more-details").style.display="block"}return{init:n}}()};ql.course_resize_layout=function(){let e;function n(r,s,o=null,u=null,l=null){let a=document.getElementById("path_name"),c=document.getElementById("course_name"),d=document.getElementById("module_name");function f(){if(a&&(window.innerWidth>=965&&r!==null&&r!==""?a.textContent=r:a.textContent=s),c&&(window.innerWidth>=965?c.textContent=o:c.textContent=u),d)if(window.innerWidth>=965&&l!==null&&l!=="")d.textContent=l;else{let w=o;o.split(" ").length>2&&(w=o.split(" ").slice(0,2).join(" ")+"..."),d.textContent=w,d.title=o}}f();function b(){clearTimeout(e),e=setTimeout(f,250)}window.addEventListener("resize",b)}return{init:n}}();ql.initDocument=function(){function t(){let n=document.querySelector(".document-link > p > a"),r=document.querySelector(".document-iframe");n?n.addEventListener("click",e):r&&e()}function e(){fetch(`${window.location.pathname}/complete`,{method:"POST",credentials:"include",headers:new Headers({"X-CSRF-Token":document.querySelector('meta[name="csrf-token"]').content,Accept:"application/json","Content-Type":"application/json"})}).catch(n=>console.log(`Error marking document as complete: ${n}`))}return{init:t}}();ql.course_navigation=function(){function t(e){let n=document.querySelector("ql-course-outline"),r=document.querySelector("ql-progress-bar"),s=document.querySelector(".course-progress__metadata__completed"),o=document.querySelector(".course-progress__metadata__in_progress"),u=document.querySelector(".course-progress__percentage"),l=document.querySelector(".next-button");App.cable.subscriptions.create({channel:"CourseChannel",courseEnrollmentId:e},{received(a){let c=a.modules,d=a.completed,f=a.progress;n&&n.setAttribute("modules",c),r&&u&&f>0&&!d&&(r.setAttribute("progress",f),r.removeAttribute("hidden"),u.innerHTML=`${Math.floor(100*f)}%`),d&&(s&&o&&r&&(s.removeAttribute("hidden"),o.setAttribute("hidden",!0),r.setAttribute("hidden",!0)),l&&(l.disabled=!1))}})}return{init:t}}();ql.toggleAppNav=function(t=!0){let e=document.querySelector("#app-nav"),n=document.querySelector("#outline-drawer");n&&n.toggle(),e&&(t?e.show():e.hide())};ql.course_builder=function(){let t={},e={},n={},r={},s={};function o(){e=document.getElementById("course_import_progress_bar"),n=document.getElementById("error_message"),r=document.getElementById("success_message"),s=document.getElementById("course_template_link"),ql.subscribe("received-import-operation-status",d)}function u(w){t=new ql.Poller(w,5e3,a,c),t.start()}function l(w){w.loading="true"}function a(w){ql.publish("received-import-operation-status",w)}function c(w){console.log("Request failed",w)}function d(w){w.operation.status==="finished"&&t.stop(),e.progress=w.progress,w.has_errors&&n.classList.add("found"),!w.has_errors&&w.progress===1&&w.path&&(r.classList.add("found"),s.href=w.path)}function f(w,k,C){w.preventDefault();let j=document.getElementById("preview_url"),B="https://docs.google.com/spreadsheets/d/";C==="doc"&&(B="https://docs.google.com/document/d/"),j.href=k.value,(k.value||"").startsWith(B)?j.disabled=!1:j.disabled=!0}function b(w){let k=document.querySelector(`#${w}`);k.checkValidity()?k.submit():k.reportValidity()}function y(){document.querySelector(".sort").click()}return{init:o,poll:u,set_preview:f,submit_form:b,loading_button:l,sort:y}}();ql.course_survey=function(){window.addEventListener("keydown",t=>{["ArrowUp","ArrowDown"].indexOf(t.code)>-1&&t.view.event.preventDefault()},!1)};ql.course_survey_item_label=(()=>{let t,e;function n(){document.querySelectorAll(".js-new-item-label").forEach(o=>{o.dataset.initialized||(o.dataset.initialized="true",o.addEventListener("click",u=>{u.preventDefault();let l=o.dataset.itemId;t=document.getElementById("item-labels-"+l),e=t.firstElementChild.cloneNode(!0),r()}))})}function r(){let o=e.cloneNode(!0),u=new Date().getTime();o.id=`item-label-${u}`,o.firstElementChild.children[1].value="",o.firstElementChild.children[1].id=`item-label-value-${u}`,o.firstElementChild.children[1].setAttribute("aria-label",`item-label-value-${u}`),o.firstElementChild.children[2].setAttribute("onclick",`ql.course_survey_item_label.removeItemLabel('${o.id}')`),t.appendChild(o)}function s(o){let u=document.getElementById(o);u.parentNode.removeChild(u)}return{init:n,removeItemLabel:s}})();ql.course_survey_item_initialize=function(){document.addEventListener("click",()=>{ql.course_survey_item_label.init()})};ql.credly=function(){function t(){let e=document.getElementById("credly-confirmation-form"),n=document.getElementById("href");if(e==null)return;function r(s){s.preventDefault(),$.post(e.action).done(o=>{let u=o.url;n&&u&&u!==""&&(n.href=u,n.click()),window.location.href=window.location.href}).fail(o=>{window.location.href=window.location.href,console.log(o)})}e.addEventListener("submit",r)}return{init:t}}();ql.datePicker=function(){function t(e){let n=e.split("_")[0];$(".date-picker").flatpickr({locale:n}),$(".date-picker-clear").click(r=>{let s=document.getElementById(r.target.dataset.target);s&&s._flatpickr&&s._flatpickr.clear()})}return{init:t}}();ql.dateRangePicker=function(){function t(e,n,r){let s=e.split("_")[0];n&&r&&$(".date_range").val(`${n}_${r}`),$(".date_range_picker").flatpickr({mode:"range",locale:s,defaultDate:[n,r],onChange:function(o){if(o.length===2){let u=this.formatDate(o[0],"Y-m-d"),l=this.formatDate(o[1],"Y-m-d");$(".date_range").val(`${u}_${l}`)}}})}return{init:t}}();ql.discovery=function(){function t(){e(".in-progress-cards .js-content-card","in-progress"),e(".favorite-cards .js-content-card","favorite"),e(".curated-cards .js-content-card","curated"),e(".featured-cards .js-content-card","featured"),e(".upcoming-cards .js-content-card","upcoming"),e(".popular-cards .js-content-card","popular")}function e(n,r){document.querySelectorAll(n).forEach(s=>{s.addEventListener("click",()=>{let{id:o,name:u,type:l,level:a,path:c}=s.dataset;ql.track("discover_catalog_item",{label:r,id:o,name:u,type:l,level:a,path:c})})})}return{init:t}}();ql.editV2Lab=function(){return{gdoc_or_markdown(t){t=="Google Doc"?(document.querySelector(".instructions_google_doc").style.display="block",document.querySelector(".instructions_markdown").style.display="none"):(document.querySelector(".instructions_google_doc").style.display="none",document.querySelector(".instructions_markdown").style.display="block")},switch_resource(t){t=="video"||t=="link"?(document.querySelector(".resource_video_link").style.display="block",document.querySelector(".resource_file").style.display="none"):(document.querySelector(".resource_video_link").style.display="none",document.querySelector(".resource_file").style.display="block")},switch_lab_resource(t,e){let n=document.getElementById("lab_lab_resources_attributes_0_resource_type"),r=document.querySelector("#lab_resource_variant"),s=r.options;if(Array.from(s).forEach(l=>l.remove(r)),JSON.parse(n.getAttribute("data-variants"))[t].forEach((l,a)=>{if(!(t=="gcp_project"&&(l=="gcpedu"||l=="gcpasl"))){let c=document.createElement("option");c.text=l,r.options.add(c),(l==e||e=="nil"&&a==0)&&(c.selected=!0)}}),t=="gcp_project"||t=="aws_account"){let l=document.querySelector("#resource_config_allowed_locations"),a=l.options;if(l.tagName=="SELECT"){Array.from(a).forEach(f=>f.remove(l));let c=JSON.parse(n.getAttribute("data-allowed-locations"));JSON.parse(n.getAttribute("data-all-allowed-locations"))[t].forEach(f=>{let b=document.createElement("option");b.text=f,l.options.add(b)}),$(document).find("#resource_config_allowed_locations").val(c).trigger("chosen:updated")}}resource_display_settings={gcp_project:{show_script:!0,show_script_custom_properties:!0,show_custom_ssh:!0,show_allow:!0,show_constraint:!0},linux_terminal:{show_script:!0},windows_vm:{show_script:!0},ide:{show_script:!0,show_student:!0},gcp_user:{show_roles_projects:!0},aws_account:{show_script:!0,show_policy:!0,show_allow:!0},google_workspace_domain:{},looker_instance:{show_script:!0,show_looker_cloud_roles:!0},cloud_terminal:{show_script:!0,show_looker_cloud_roles:!0},azure_resource_group:{show_script:!0,show_script_custom_properties:!0},azure_user:{show_roles_resource_groups:!0},jupyter_notebook:{show_script:!0,show_student:!0}},u(resource_display_settings[t]);function u({show_script:l=!1,show_script_custom_properties:a=!1,show_student:c=!1,show_custom_ssh:d=!1,show_roles_projects:f=!1,show_roles_resource_groups:b=!1,show_looker_cloud_roles:y=!1,show_policy:w=!1,show_allow:k=!1,show_constraint:C=!1}={}){let j=document.querySelector(".script_fields"),B=j.querySelectorAll("input"),M=document.querySelector(".student_files_fields"),p=M.querySelectorAll("input"),D=document.querySelectorAll(".custom_fields"),q=Array.from(D).reduce((_,L)=>_.concat(Array.from(L.querySelectorAll("input")),Array.from(L.querySelectorAll("select"))),[]),T=document.querySelector(".ssh_key_user"),F=T.querySelector("select"),N=document.querySelector(".allowed_locations"),V=N.querySelector("select"),J=document.querySelector(".allowed_locations_constraint"),z=J.querySelector("select"),W=document.querySelector("#roles_fields_project"),K=[].concat(Array.from(W.querySelectorAll("input")),Array.from(W.querySelectorAll("select"))),I=document.querySelector("#roles_fields_resource_group"),m=[].concat(Array.from(I.querySelectorAll("input")),Array.from(I.querySelectorAll("select"))),g=document.querySelector(".looker_cloud_roles_fields"),v=[].concat(Array.from(g.querySelectorAll("input")),Array.from(g.querySelectorAll("select"))),A=document.querySelectorAll(".policy_fields"),E=Array.from(A).reduce((_,L)=>_.concat(Array.from(L.querySelectorAll("input")),Array.from(L.querySelectorAll("textarea"))),[]);j.style.display=l?"block":"none",B.forEach(_=>_.disabled=!l),M.style.display=c?"block":"none",p.forEach(_=>_.disabled=!c),D.forEach(_=>_.style.display=a?"block":"none"),q.forEach(_=>_.disabled=!a),T.style.display=d?"block":"none",F.disabled=!d,W.style.display=f?"block":"none",K.forEach(_=>_.disabled=!f),I.style.display=b?"block":"none",m.forEach(_=>_.disabled=!b),g.style.display=y?"block":"none",v.forEach(_=>_.disabled=!y),A.forEach(_=>_.style.display=w?"block":"none"),E.forEach(_=>_.disabled=!w),N.style.display=k?"block":"none",V&&(V.disabled=!k),J.style.display=C?"block":"none"}},hide_document(t){script=document.getElementById(t),script&&(script.style.display="none")},update_script_state(t,e,n){let r=document.getElementById(t);if(r.value=e,ql.editV2Lab.hide_document(n),t.includes("student_files_")&&!document.getElementById("lab_lab_resources_attributes_0_student_files").value){let o=Array.from(document.getElementById("student_files").children).filter(u=>u.type=="hidden");document.getElementById("resource_config_student_files_all").value=o.reduce((u,l)=>u||l.value=="true",!1)}},add_custom_properties(t){let e=document.createElement("div");e.className="form-row";let n=Date.now(),r=`${t}_custom_property_${n}`;e.setAttribute("id",r);let s=document.createElement("div");s.classList.add("control-group","text");let o=document.createElement("Label");o.className="label",o.setAttribute("for","key"),o.innerHTML="Key";let u=document.createElement("input");u.className="input",u.setAttribute("id","key"),u.setAttribute("required",!0),u.setAttribute("name",`resource_config[${t}_custom_properties][${n}][key]`),s.appendChild(o),s.appendChild(u);let l=document.createElement("div");l.classList.add("control-group","text");let a=document.createElement("Label");a.className="label",a.setAttribute("for",`resource_config_${t}_custom_properties_${n}_value`),a.innerHTML="Reference / Value";let c=document.createElement("Select"),d=document.getElementById("lab_lab_resources_attributes_0_start_script");JSON.parse(d.getAttribute("data-options")).forEach(D=>{let q=document.createElement("option");q.text=D,c.appendChild(q)});let b=`resource_config[${t}_custom_properties][${n}][value]`,y=`resource_config_${t}_custom_properties_${n}_value`;c.className="input",c.setAttribute("id",y),c.setAttribute("required",!0),c.setAttribute("name",b),l.appendChild(a),l.appendChild(c);let w=document.createElement("div");w.classList.add("control-group","text");let k=document.createElement("Label");k.className="label",k.setAttribute("for","property_type"),k.innerHTML="Type";let C=document.createElement("Select");C.className="input",C.setAttribute("id","property_type"),C.setAttribute("name",`resource_config[${t}_custom_properties][${n}][type]`),C.setAttribute("onchange",`ql.editV2Lab.switch_custom_property_type('${y}', '${b}', this.value)`);let j=document.createElement("option");j.text="reference",C.appendChild(j);let B=document.createElement("option");B.text="value",C.appendChild(B),w.appendChild(k),w.appendChild(C);let M=document.createElement("ql-icon-button");M.setAttribute("onclick",`ql.editV2Lab.delete_element('${r}')`),M.setAttribute("icon","delete"),M.classList.add("link--danger"),e.appendChild(s),e.appendChild(l),e.appendChild(w),e.appendChild(M),document.getElementById(`${t}_add_custom_property`).before(e)},delete_element(t){let e=document.getElementById(t);e.parentNode.removeChild(e)},set_duration(t,e,n){let r=document.getElementById(t),s=document.getElementById(e),o=document.getElementById(n);o.value=s.value*60||r.value*60*1.5},switch_positions(t,e){let r=document.querySelector(".edit_lab").querySelectorAll("form > .fields");r.forEach((s,o)=>s.children[2].value=o);for(let s=0;s<r.length;s+=1)if(r[s].querySelector(`#lab_environment_outputs_attributes_${t}_position`)!=null){if(s==0&&e==-1||s==r.length-1&&e==1)break;r[s].children[2].value=s+e,r[s+e].children[2].value=s,e==-1?r[s].parentNode.insertBefore(r[s],r[s+e]):e==1&&r[s].parentNode.insertBefore(r[s+e],r[s]);break}},add_output(t){document.getElementById("add_output_button").click();let r=document.querySelector(".edit_lab").querySelectorAll("form > .fields"),s=r[r.length-1].querySelector(".lab_environment_outputs_reference").querySelector("input");s.value=t},switch_step_positions(t,e){let r=document.querySelector(".edit_assessment_manual").getElementsByClassName("fields"),o=document.querySelector("table").querySelectorAll("tr");for(let u=0;u<r.length;u+=1)if(r[u].querySelector(`#assessment_manual_steps_attributes_${t}_step_no`)!=null){if(u==0&&e==-1||u==r.length-1&&e==1)break;r[u].children[1].value=u+1+e,r[u+e].children[1].value=u+1,o[u+1].children[0].innerHTML=u+1+e,o[u+1+e].children[0].innerHTML=u+1,e==-1?(r[u].parentNode.insertBefore(r[u],r[u+e]),o[u+1].parentNode.insertBefore(o[u+1],o[u+1+e])):e==1&&(r[u].parentNode.insertBefore(r[u+e],r[u]),o[u+1].parentNode.insertBefore(o[u+1+e],o[u+1]));break}},add_student_message(t){let e=document.createElement("div");e.classList.add("form-row","form-row--max_width");let n=Date.now(),r=`student_message_${n}`;e.setAttribute("id",r);let s=document.createElement("div");s.classList.add("control-group","text");let o=document.createElement("Label");o.className="label",o.setAttribute("for",`locales[${t}][${n}][message_id]`),o.innerHTML="Message Id",s.appendChild(o);let u=document.createElement("Input");u.className="input",u.setAttribute("id",`locales[${t}][${n}][message_id]`),u.setAttribute("name",`locales[${t}][${n}][message_id]`),u.setAttribute("required",!0),s.appendChild(u),e.appendChild(s);let l=document.createElement("div");l.classList.add("control-group","text");let a=document.createElement("Label");a.className="label",a.setAttribute("for",`locales[${t}][${n}][message]`),a.innerHTML="Message",l.appendChild(a);let c=document.createElement("Input");c.className="input",c.setAttribute("id",`locales[${t}][${n}][message]`),c.setAttribute("name",`locales[${t}][${n}][message]`),c.setAttribute("required",!0),l.appendChild(c),e.appendChild(l);let d=document.createElement("ql-icon-button");d.setAttribute("onclick",`ql.editV2Lab.delete_element('${r}')`),d.setAttribute("icon","delete"),d.classList.add("text--error"),e.appendChild(d),document.getElementById("add-student-message").before(e)},add_default_outputs(){let t=document.getElementById("default_button"),e=document.getElementById("add_output_button"),n={console_url:1,username:2,password:3,project_id:4},r={console_url:console_url_label,username:username_label,password:password_label,project_id:project_id_label},s=JSON.parse(t.getAttribute("data-options"));s.sort((o,u)=>{let l=o.split(".")[1],a=u.split(".")[1],c=n[l]||5,d=n[a]||5;return c-d}),s.forEach(o=>{let u=o.split(".")[1];if(Object.keys(n).includes(u)){e.click();let l=document.querySelector(".edit_lab"),a=l.querySelectorAll("form > .fields"),c=l.querySelectorAll("textarea"),d=a[a.length-1].querySelector(".lab_environment_outputs_reference").querySelector("input");d.value=o;let f=c[c.length-1];f.value=r[u]}})},switch_custom_property_type(t,e,n){let r=document.getElementById(t),s=null;if(n=="value")s=document.createElement("input");else if(n=="reference"){let o=document.getElementById("lab_lab_resources_attributes_0_start_script"),u=JSON.parse(o.getAttribute("data-options"));s=document.createElement("Select"),u.forEach(l=>{let a=document.createElement("option");a.text=l,s.appendChild(a)})}s!=null&&(s.className="input",s.setAttribute("id",t),s.setAttribute("required",!0),s.setAttribute("name",e),r.parentNode.insertBefore(s,r),r.parentNode.removeChild(r))}}}();ql.exam=function(){function t(){setInterval(()=>{$.get(`${window.location.pathname}/status`).fail(()=>window.location.reload())},5e3),document.querySelector("ql-quiz").addEventListener("submit",()=>window.location.reload())}return{init:t}}();ql.favoriting=function(){function t(){document.querySelectorAll(".js-favorite-button").forEach(u=>{u.addEventListener("click",e,!1)})}function e(o){o.preventDefault(),o.stopImmediatePropagation(),n.call(this),s.call(this)}function n(){let o=r(this.dataset.type),u=this.dataset.name;this.href.includes("unfavorite")?ql.track("clicked_unfavorite_button",{type:o,label:u}):ql.track("clicked_favorite_button",{type:o,label:u})}function r(o){let u;switch(o){case"CatalogItem":u="Lab";break;case"ClassroomTemplate":u="Course";break;default:u=o}return u}function s(){let o=new Request(this.href,{method:"POST",credentials:"include",headers:new Headers({"X-CSRF-Token":document.querySelector('meta[name="csrf-token"]').content})});fetch(o).then(pe).then(ge).then(u=>{if(console.log(u),u.alert)console.error(u.alert);else{this.setAttribute("href",u.path),this.setAttribute("tip",u.tooltip),this.setAttribute("aria-label",u.tooltip),this.innerHTML=u.icon;let l=document.getElementById(this.for);l&&(this.tip.toLowerCase().includes("add")?l.style.display="none":l.style.display="inline-block"),$card=this.closest(".js-content-card"),$card&&$card.classList.toggle("is-unfavorited")}})}return{init:t}}();ql.filter={filter:function(){let t="any";$form={},$submit_on_change=!0;function e(a=!0){$form=document.querySelector(".js-filter-form"),$form&&($inputs=$form.querySelectorAll("input"),$inputs.forEach(c=>c.addEventListener("click",n))),$submit_on_change=a}function n(a){let c=a.currentTarget.closest(".js-list-item"),d=c.querySelector(`input[value="${t}"]`);a.currentTarget.value===t?c.querySelectorAll(`input:checked:not([value="${t}"])`).forEach(b=>{u(b)}):d.checked&&u(d),c.querySelectorAll("input:checked").length||o(d),numActive=c.querySelectorAll(`input:checked:not([value="${t}"])`).length;let f=numActive?`(${numActive})`:"";c.querySelector(".active-filter-number").textContent=f,ql.track(this.checked?"checked_filter":"unchecked_filter",{label:this.id}),$submit_on_change&&ql.searchFilter()}function r(){$inputs=$form.querySelectorAll(".js-list-item input"),$inputs.forEach(a=>{a.value==t?o(a):u(a)})}function s(a){return a.closest(".mdl-checkbox")}function o(a){s(a).classList.add("is-checked"),a.checked=!0}function u(a){s(a).classList.remove("is-checked"),a.checked=!1}function l(){window.addEventListener("resize",()=>{let a=document.querySelectorAll(".list-item--expandable");window.innerWidth>600?Array.from(a).forEach(d=>{d.classList.add("is-expanded"),d.style.height="auto",d.querySelector("ql-toggle-button").removeAttribute("on")}):Array.from(a).forEach(d=>{d.classList.remove("is-expanded"),d.querySelector("ql-toggle-button").setAttribute("on",!0),d.style.height="auto"})}),window.dispatchEvent(new Event("resize"))}return{init:e,reset:r,resize:l}}()};ql.searchFilter=function(){let t=document.querySelector(".js-filter-form"),e=document.querySelector(".js-search-form");return t?(e&&(t.querySelector("input[name='keywords']").value=e.querySelector("input[name='keywords']").value,t.querySelector("input[name='locale']").value=e.querySelector("input[name='locale']").value),document.querySelector(".js-custom-filter-form")||t.submit()):e&&e.submit(),!1};ql.filterOptions=function(){function t(n,{type:r="gteq",clearOtherDateField:s=!0,hideCustomDateRange:o=!0}={}){o&&e(!1);let u=document.querySelector("#query_gteq"),l=document.querySelector("#query_lteq");r==="gteq"?(u.value=n,s&&(l.value="")):(l.value=n,s&&(u.value="")),u.form.submit()}function e(n){let r=document.querySelector("#filters_date_range");r.style.display=n?"flex":"none"}return{selectDateAndSubmit:t,showCustomDateRange:()=>e(!0)}}();ql.updateStepNumbers=function(t){let e=1;$(".step_fields").each(function(n){$(this).is(":visible")&&($(this).find(".steps").attr("value",e),e=e+1)})};ql.switchPositions=function(t,e){let n=0,r=-1;if($(".fields:not(.fields[style=display\\:\\ none\\;])").each(function(s){t==$(this).find("button").first().attr("step_index")&&(r=n),n++}),r+e>=0&&r+e<n){let s=$(".fields:not(.fields[style=display\\:\\ none\\;]):eq("+r+")"),o=$(".fields:not(.fields[style=display\\:\\ none\\;]):eq("+(r+e)+")");e==-1?s.insertBefore(o):e==1&&o.insertBefore(s),ql.updateStepNumbers(!1)}};ql.switchPositionsAT=function(t,e){let n=0,r=-1,s=$(".fields:not(.fields[style=display\\:\\ none\\;])");if(s=s.filter((o,u)=>$(u).children().attr("class")!="locales_fields"),s.each(function(o){t==$(this).find("button").first().attr("step_index")&&(r=n),n++}),r+e>=0&&r+e<n){let o=$(s[r]),u=$(s[r+e]);e==-1?o.insertBefore(u):e==1&&u.insertBefore(o),ql.updateStepNumbers(!1)}};ql.resetDestroys=function(){$("[name*=\\[_destroy\\]]").each(function(e){this.value=!1})};ql.updateStudentMessages=function(t,e,n,r){let s=t.split("_")[2],o=$(t),l=$(e).find("#add-student-message");o.val()==""&&o.val([]);let a=JSON.parse(o.val()),c="";if(n.endsWith("new")){let f=Date.now();update_0="ql.updateStudentMessages('#sm_step_"+s+"', '#sm_tables_"+s+"', '#sm_table_"+s+"_"+f+"', 'update_0')",update_1="ql.updateStudentMessages('#sm_step_"+s+"', '#sm_tables_"+s+"', '#sm_table_"+s+"_"+f+"', 'update_1')",remove="ql.updateStudentMessages('#sm_step_"+s+"', '#sm_tables_"+s+"', '#sm_table_"+s+"_"+f+"', 'delete')",tr_one="<td>Message ID</td><td>Message</td><td></td>",td_one="<td><input type='text' id='message_id'/></td>",td_two="<td><textarea rows=1 id='message'></textarea></td>",td_three="<td><button class='btn btn-link btn-link-qwiklab' type='button'><i class='icon-trash'></i></button></td>",tr_two=td_one+td_two+td_three,c=$("<table id='sm_table_"+s+"_"+f+"'><tr>"+tr_one+"</tr><tr>"+tr_two+"</tr></table>"),c.find("#message_id").attr("onchange",update_0),c.find("#message").attr("onchange",update_1),c.find("button").attr("onclick",remove),c.insertBefore(l)}else c=$(n);let d=c.index();switch(r){case"delete":c.remove(),a.splice(d,1);break;case"add":a.push(["",""]);break;case"update_0":a[d][0]=c.find("#message_id").val();break;case"update_1":a[d][1]=c.find("#message").val();break;default:}o.val(JSON.stringify(a))};ql.game=(()=>{function t(e){let n=document.querySelector(".js-lab-leaderboard");e==null||n==null||(n.players=JSON.parse(e))}return{updateLabLeaderboard:t}})();ql.inviteMembers=function(){$toast="",$toastMessage="",$toastLoader="",poller={};function t(){$toast=document.querySelector(".js-toast"),$toastMessage=document.querySelector(".js-toast-message"),$toastLoader=$toast.querySelector(".mdl-js-progress"),ql.subscribe("received-operation-status",r)}function e(s){poller=new ql.Poller(s,1e4,n),poller.start()}function n(s){ql.publish("received-operation-status",s)}function r(s){if(s.status==="finished")if(poller.stop(),$toastLoader.classList.remove("is-visible"),s.succeeded)window.location.reload();else{let o=JSON.parse(s.result);ql.showFlash("warn",o.message),$toast.classList.remove("is-visible")}else $toastLoader.classList.contains("is-visible")||$toastLoader.classList.add("is-visible")}return{init:t,poll:e}}();ql.customFilter=function(){$enableCheckbox="";function t(){$enableCheckbox=document.querySelector(".js-enable-custom-filter"),$enableCheckbox.addEventListener("click",e)}function e(){enable=$enableCheckbox.checked===!0,$.post(`${window.location.pathname}/toggle_enable`,{enable})}return{init:t}}();ql.groupForm=function(){function t(e,n){let r=document.getElementById(e),s=document.getElementById(n);if(r&&s){let o=!1;r.addEventListener("change",u=>{if(s.value===""||!o){let l=u.currentTarget.value;s.value=l.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/(^-|-$)/g,"")}}),s.addEventListener("change",u=>{o=!0})}}return{init:t}}();ql.resourcesForm=function(){function t(){let n=document.getElementById("add-translations-button");n&&n.addEventListener("click",r=>{n.classList.toggle("hidden",!0),document.querySelectorAll(".non-default-locale-form").forEach(o=>o.classList.toggle("hidden",!1))})}function e(n,r){let s=document.getElementById(`${n}-link-button`),o=document.getElementById(`${n}-link-input-div`),u=document.getElementById(`${n}-link-input`),l=document.getElementById(`${n}-file-button`),a=document.getElementById(`${n}-file-input-div`),c=document.getElementById(`${n}-file-input`),d=document.getElementById(`${n}-file-delete-button`),f=document.getElementById(`${n}-file-preview`),b=document.getElementById(`${n}-destroy`);s&&o&&a&&c&&s.addEventListener("click",y=>{a.classList.toggle("hidden",!0),c.value=null,c.required=!1,o.classList.toggle("hidden",!1),u.required=r,b.value=!0}),l&&a&&o&&u&&l.addEventListener("click",y=>{o.classList.toggle("hidden",!0),u.value=null,u.required=!1,a.classList.toggle("hidden",!1),c.required=r,b.value=!0}),d&&f&&c&&b&&d.addEventListener("click",y=>{f.classList.toggle("hidden",!0),c.value=null,c.required=r,c.classList.toggle("hidden",!1),b.value=!0}),u&&b&&u.addEventListener("change",y=>{b.value=u.value==""}),c&&b&&c.addEventListener("change",y=>{b.value=c.value==""})}return{init:t,initLocale:e}}();ql.reorderResources=function(){function t(){let l=document.getElementById("reorder-resources-button"),a=document.getElementById("reorder-save-button"),c=document.getElementById("reorder-cancel-button");l&&a&&c&&(ql.sortable.init(".resource-position-field",e),$(".js-sortable").sortable("disable"),l.addEventListener("click",d=>{n(),u(),r()}),a.addEventListener("click",d=>{n(),u(),s()}),c.addEventListener("click",d=>{n(),u(),s(!0)}))}function e(){o(!1)}function n(){let l=document.querySelectorAll(".resources-page-action");l&&l.forEach(a=>a.toggleAttribute("disabled"))}function r(){document.querySelectorAll(".resource-drag-icon").forEach(l=>l.classList.toggle("hidden",!1)),$(".js-sortable").sortable("enable")}function s(l=!1){document.querySelectorAll(".resource-drag-icon").forEach(a=>a.classList.toggle("hidden",!0)),$(".js-sortable").sortable("disable"),l&&($(".js-sortable").sortable("cancel"),o(!0))}function o(l){let a=document.getElementById("reorder-save-button");a&&a.toggleAttribute("disabled",l)}function u(){let l=document.getElementById("reorder-save-button"),a=document.getElementById("reorder-cancel-button");l&&a&&(l.classList.toggle("hidden"),a.classList.toggle("hidden"))}return{init:t}}();ql.header={myAccount:function(){let t,e;function n(){t=document.querySelector(".js-my-account-menu"),e=document.querySelector(".js-main"),t&&($myAccountButton=document.querySelector(".js-my-account-button"),$myAccountButton.addEventListener("click",r,!1));let s=document.querySelector(".js-page-banner"),o=document.querySelector(".js-close-banner");s&&o&&o.addEventListener("click",()=>{s.remove()})}function r(s){t.classList.toggle("is-open")?(ql.track("opened_my_account_menu"),e.addEventListener("click",r,!1)):e.removeEventListener("click",r,!1)}return{init:n}}()};(t=>{function e(n,r){this.instructionId=n,this.refreshPage=r,this.refreshing=!1,this.refresh=function(){if(this.refreshing){console.log("Already polling. Ignoring this refresh.");return}this.startRefreshing(),$.post("/authoring/instructions/"+this.instructionId+"/refresh.json").done(()=>{setTimeout(()=>this.pollStatus(),2e3)}).fail(s=>{console.log(s),this.stopRefreshing()})},this.pollStatus=function(){t.getJson("/instructions/"+this.instructionId+"/status.json").then(s=>{s.state=="failed"?(t.showFlash("error",s.message),this.stopRefreshing()):s.state=="completed"?(t.showFlash("notice",s.message),this.refreshPage?window.location.reload():this.stopRefreshing()):setTimeout(()=>this.pollStatus(),5e3)}).catch(s=>{this.stopRefreshing(),console.log(s)})},this.startRefreshing=function(){let s=this.instructionId;this.refreshing=!0,$(".refresh-instruction-spinner-"+s).removeClass("hidden"),$(".refresh-instruction-button-"+s).addClass("hidden")},this.stopRefreshing=function(){let s=this.instructionId;this.refreshing=!1,$(".refresh-instruction-spinner-"+s).addClass("hidden"),$(".refresh-instruction-button-"+s).removeClass("hidden")}}t.refreshInstruction=function(n,r){new e(n,r).refresh()}})(ql);ql.instructionVariables=function(){return{update(t){document.querySelectorAll("ql-variable,ql-code-block").forEach(e=>e.load(t))},reset(){document.querySelectorAll("ql-variable,ql-code-block").forEach(t=>t.load())}}}();ql.courseOutline=function(){function t(){let e=document.querySelector(".course-instructor-outline-drawer"),n=e.querySelector(".outline__course").querySelector(".active").parentElement,r=n.classList,s;r.contains("course-header")?s=n.closest(".outline__course"):r.contains("module-header")?s=n.closest(".outline__module"):r.contains("activity-header")&&(s=n.closest(".outline__activity")),s&&document.body.clientHeight/2<s.offsetTop-n.offsetHeight&&(e.scrollTop=s.offsetTop-n.offsetHeight)}return{init:t}}();ql.jumpContent=function(){function t(){document.addEventListener("jumpContent",e)}function e(n){let r=document.getElementById("jump-content");r.focus(),r.setAttribute("tabindex","0")}return{init:t}}();initLaunchWithSubscriptionButtonListener=function(){$(".js-launch-with-subscription-button").click(function(){$(this).attr("disabled")||($(".js-launch-with-credits-input").val(0),$(".js-launch-with-subscription-input").val(1),$(".js-launch-with-access-code").val(0),submitLabAccessForm())})};initLaunchWithCreditsButtonListener=function(){$(".js-launch-with-credits-button").click(function(){$(this).attr("disabled")||($(".js-launch-with-credits-input").val(1),$(".js-launch-with-subscription-input").val(0),$(".js-launch-with-access-code").val(0),submitLabAccessForm())})};initLaunchWithAccessCodeButtonListener=function(){$(".js-launch-with-access-code-button").click(function(){$(this).attr("disabled")||($(".js-launch-with-credits-input").val(0),$(".js-launch-with-subscription-input").val(0),$(".js-launch-with-access-code").val(1),submitLabAccessForm())})};initLaunchButtonListener=function(){$(".js-launch-button").click(function(){$(this).attr("disabled")||($(".js-launch-with-credits-input").val(0),$(".js-launch-with-subscription-input").val(0),$(".js-launch-with-access-code").val(0),submitLabAccessForm())})};initLabAccessFormListener=function(){$(".js-lab-access-form").on("ajax:success",(t,e,n,r)=>{ql.labRun.startLab({accessSuccess:!0})}).on("ajax:error",(t,e,n,r)=>{$(".js-access-code input").val(""),alertLabAccessError(e.responseText),ql.labControlPanel.reset()}).on("ajax:complete",()=>{enableLabAccessModalButtons()})};initAutoTabAccessCode=function(){let t=0;$(".js-access-code-input").on("keyup",function(e){e.keyCode===8&t===0&&$(this).prev(".js-access-code-input").focus(),t=this.value.length}),$(".js-access-code-input").on("input",function(e){this.value.length===this.maxLength&&($(this).next(".js-access-code-input").focus(),t=0)})};submitLabAccessForm=function(){disableLabAccessModalButtons(),$(".js-lab-access-form").submit(),$("#lab-access-modal").modal("hide"),ql.labControlPanel.setStarting()};alertLabAccessError=function(t){$("#lab-access-modal").modal("hide"),$(".js-alert-message").html(t),$(".js-alert").removeClass("alert-success").addClass("alert-error").css("display","flex")};disableLabAccessModalButtons=function(){$(".js-lab-access-modal-button").attr("disabled",!0)};enableLabAccessModalButtons=function(){$(".js-lab-access-modal-button").attr("disabled",!1)};initLabAccessModal=function(){initLaunchWithSubscriptionButtonListener(),initLaunchWithCreditsButtonListener(),initLaunchWithAccessCodeButtonListener(),initLaunchButtonListener(),initLabAccessFormListener(),initAutoTabAccessCode()};ql.labActivityTracking={reset(){document.querySelectorAll("ql-activity-tracking,ql-activity-tracking-ch").forEach(t=>t.reset())}};ql.labAlert={alertMessage(t,e=!0){let n=document.querySelector("ql-snackbar");e&&n.setAttribute("error",!0),n.innerHTML=t,n.open()},alertHttpError(t){t&&t.response&&t.response.text().then(e=>{ql.labAlert.alertMessage(e)})}};ql.labAssessment=(()=>{let t="/feedback/student/lab/main.html?token=qwiklabs",e="/work/main.ipynb?token=qwiklabs",n="/api/contents",r=(l,a)=>l&&a&&l.src.endsWith(e),s=(l,a)=>{let c=document.querySelector("#jupyter-feedback-frame"),d="&cachebuster="+new Date().getTime().toString(),b=l.src.split("qwiklabs.com")[0]+"qwiklabs.com"+n+t+d;$.get(b).done(y=>{c.srcdoc=y.content,a.open()}).fail(y=>{console.error("Failed to fetch jupyter feedback.",y)})},o=()=>{let l=document.querySelector("#embedded-resource"),a=document.querySelector("#jupyter-feedback-modal");r(l,a)&&s(l,a)},u=function(l,a,c){c.loading=!0;let d=$.get("/assessments/run_step.json?id="+l+"&step="+a).done(f=>{ql.labAssessment.update(f),int_no=parseInt(a)-1;let b=f.completion_only?"":`Check complete. Points earned: ${f.step_scores[int_no]}. Message: `;f.step_scores[int_no]==f.step_points[int_no]?(b+=`${f.student_messages[int_no]||"Step is complete."}`,ql.labAlert.alertMessage(b,isError=!1)):(b+=`${f.student_messages[int_no]||"It doesn't look like you've completed this step yet. Try again."}`,ql.labAlert.alertMessage(b)),o()}).fail(f=>{console.error("Failed to update assessment",f)}).complete(f=>{c.loading=!1})};return{init(){let l=new hallofmirrors.FocusTrap($(".js-lab-assessment-panel")[0]);document.addEventListener("runAssessmentStepSuccess",o),$(".js-open-lab-assessment-panel").click(()=>{$(".js-lab-assessment-panel").addClass("is-open"),l.trapFocus()}),$(".js-close-lab-assessment-panel").click(()=>{$(".js-lab-assessment-panel").removeClass("is-open"),l.releaseFocus()}),$(".js-show-run-step-button").on("click",function(){let a=ql.labData.getLabInstanceId(),c=$(this).attr("step_no");a!==void 0&&ql.labData.isRunning()&&u(a,c,this)})},update(l){if(typeof l>"u"||typeof l.total_score>"u"||l.total_score.length===0)return;let a="";for(l.completion_only?a=l.completed_steps+"/"+l.total_steps:a=l.total_score+"/"+l.perfect_score,$(".js-lab-assessment-total-score").html(a),i=1;i<=parseInt(l.total_steps);i++)l.completion_only?l.step_complete[i-1]?$(".js-assessment-step-score-"+i+" ql-icon:first-child").setAttribute("icon","check"):$(".js-assessment-step-score-"+i+" ql-icon:first-child").setAttribute("icon","close"):$(".js-assessment-step-score-"+i).html(l.step_scores[i-1])},reset(){let l=$(".js-lab-assessment-total-score").html();typeof l>"u"||(l=l.replace(/.*\//,"\u2014/"),$(".js-lab-assessment-total-score").html(l),$('*[class^="js-assessment-step-score"]').html("\u2014"))}}})();var us=_r(cs());initFakeAlertCloseListener=function(){$(".js-alert-close").click(()=>{$(".js-alert").hide()})};initCopyCode=function(){$("pre code").each((t,e)=>{$(e).after('<button class="button button--text button--small copy-button js-copy-button-'+t+'"><ql-icon>content_copy</ql-icon></button>');let n=document.getElementsByClassName("no-select")[0],r=new us.default(".js-copy-button-"+t,{target:function(s){return n&&n.classList.remove("no-select"),s.previousElementSibling}});r.on("success",s=>{n&&n.classList.add("no-select"),document.getSelection().removeAllRanges(),$(".js-copy-button-"+t).attr("title",trans.copied).tooltip("fixTitle").tooltip("show")}),r.on("error",s=>{n&&n.classList.add("no-select"),document.getSelection().removeAllRanges();let o="";/iPhone|iPad/i.test(navigator.userAgent)?o=trans.no_support:/Mac/i.test(navigator.userAgent)?o=trans.mac_press:o=trans.windows_press,$(".js-copy-button-"+t).attr("title",o).tooltip("fixTitle").tooltip("show")}),$(".js-copy-button-"+t).mouseout(function(){$(this).tooltip("hide").tooltip("destroy")})})};initImageZoom=function(){$(".js-lab-content img").click(function(t){let e=$(this).attr("src");$("body").append('<div class="lab-content__image-overlay js-zoomed-image"><img class="lab-content__image" src='+e+" /></div>").find(".js-zoomed-image").click(n=>{$(".js-zoomed-image").remove()})})};initPrettyPrint=function(){$(()=>{prettyPrint()})};initCodeTabs=function(){let t=Array.from(document.querySelectorAll("ql-code"));t.forEach(e=>e.addEventListener("tabchange",n=>t.filter(r=>r!==e).forEach(r=>r.setLanguage(n.detail.newTab.language))))};initLabContent=function(){initFakeAlertCloseListener(),initCopyCode(),initImageZoom(),initPrettyPrint(),initCodeTabs()};ql.labControlPanel=(()=>{let t;return{init(){t=document.querySelector(".js-lab-control-panel"),t.addEventListener("clickedStartLab",()=>requestStartLab()),document.getElementById("js-are-you-sure-button").addEventListener("click",()=>{ql.labRun.stopLab(),document.getElementById("js-lab-are-you-sure-dialog").close()});function n(){document.getElementById("js-lab-are-you-sure-dialog").open()}t.addEventListener("clickedStopLab",n),$(".js-end-lab-button").on("clickedStopLab",n);let r=document.querySelector("#toggle-lab-control-panel");r&&r.addEventListener("click",()=>{t.classList.toggle("toggled")})},update(e){t.labControlButton=e.labControlButton,t.labTimer=e.labTimer,t.billingLimitRemainder=e.billingLimitRemainder,t.provisioning=e.provisioning,t.provisioningSecondsRemaining=e.provisioningSecondsRemaining,t.labDetails=e.labDetails,t.connectionFiles=e.connectionFiles},reset(){t.labControlButton={running:!1,pending:!1},t.billingLimitRemainder=ql.labData.getLabBillingLimit(),t.provisioning=!1,t.provisioningSecondsRemaining=null,t.connectionFiles=[],t.labDetails=[],t.labTimer={ticking:!1,secondsRemaining:ql.labData.getLabDuration()};for(let e of document.querySelectorAll(".js-end-lab-button-container"))e.classList.add("hidden");this.hideV2Recaptcha()},setStarting(){t.labControlButton={running:!1,pending:!0}},setStopping(){t.labControlButton={running:!0,pending:!0}},setRunning(){t.labControlButton={running:!0,pending:!1}},showV2Recaptcha(){$("#recaptcha-v2-start-lab").removeClass("hidden")},hideV2Recaptcha(){$("#recaptcha-v2-start-lab").addClass("hidden")},addRecaptchaErrorHandler(){window.addEventListener("unhandledrejection",e=>{e.reason.stack.indexOf("recaptcha")>-1&&ql.labControlPanel.showV2Recaptcha()})}}})();window.expireV2Token=function(){ql.labData.setRecaptchaV2Token(void 0)};window.recaptchaComplete=function(t){ql.labData.setRecaptchaV2Token(t),ql.labRun.startLab({accessSuccess:!1})};requestStartLab=function(t){if(!ql.labData.isRecaptchaEnabled()||ql.labData.getRecaptchaV2Token()){ql.labRun.startLab({accessSuccess:!1});return}if(ql.track("clicked_start_lab_button",ql.labData.getAnalyticsPayload()),!document.getElementById("g-recaptcha-response-data-start-lab")){ql.labControlPanel.showV2Recaptcha();return}$.ajaxSetup({timeout:3e3}),executeRecaptchaForStartLabAsync().then(n=>{$.post("/focuses/verify_v3_recaptcha",{recaptchaV3Token:n,id:ql.labData.getFocusId(),parent:ql.labData.getParent()}).done(r=>{r.is_verified?ql.labRun.startLab({accessSuccess:!1}):ql.labControlPanel.showV2Recaptcha()}).error(()=>ql.labControlPanel.showV2Recaptcha())})};ql.labData=function(){let t,e,n,r;return{clearLabInstanceId(){e=null},getLabInstanceId(){return e},setLabInstanceId(s){e=s},getAnalyticsPayload(){return t.analyticsPayload},getLabBillingLimit(){return Number(t.labBillingLimit)},getLabDuration(){return Number(t.labDuration)},getFocusId(){return t.focusId},getParent(){return t.parent},getLearningPlanId(){return t.learningPlanId},getQlcampaign(){return t.qlcampaign},isRecaptchaEnabled(){return t.recaptchaEnabled!=null},getRecaptchaV3Token(){return n},setRecaptchaV3Token(s){n=s},getRecaptchaV2Token(){return r},setRecaptchaV2Token(s){r=s},isOrganizationLicenseRequired(){return t.organizationLicenseRequired!=null},isOrganizationLicenseValid(){return t.organizationLicenseValid!=null},hasCredits(){return t.credits!=null&&t.credits>0},isPaymentRequired(){return t.paymentRequired!=null},isWarningGiven(){return t.warningGiven!=null},isRunning(){return e!=null},init(){t=$(".js-lab-state").data(),e=t.labInstanceId}}}();ql.editRows=function(){let t="",e="",n=[];function r(){t=document.querySelectorAll(".js-edit-row"),e=document.querySelector(".js-edit-title"),n=[e,...t],t.forEach(a=>a.addEventListener("click",o)),e.addEventListener("click",l),$errorFields=document.querySelectorAll(".has-error"),$errorFields.forEach(a=>{$row=a.closest(".js-edit-row"),u($row)}),$inputs=document.querySelectorAll(".js-lab-details input"),$inputs.forEach(a=>{a.addEventListener("keyup",s)})}function s(a){$editRow=this.closest(".js-edit-row"),this.checkValidity()?$editRow.classList.remove("is-invalid"):$editRow.classList.add("is-invalid")}function o(a){if(this.classList.contains("is-selected"))return;l(),u(this);let c=this.querySelectorAll("input"),d=this.querySelectorAll("select"),f=this.querySelectorAll("textarea");f[0]?f[0].focus():d[0]?d[0].focus():c[0]&&c[0].focus()}function u(a){let c=n.indexOf(a);n[c].classList.add("is-selected"),n[c].style.height=`${a.scrollHeight+24}px`,n[c-1]&&n[c-1].classList.add("is-bottom"),n[c+1]&&n[c+1].classList.add("is-top")}function l(){n.forEach(a=>{a.classList.remove("is-selected"),a.classList.remove("is-bottom"),a.classList.remove("is-top"),a.style.height="64px"})}return{init:r}}();ql.additionalResources=function(){function e(){$(document).on("nested:fieldAdded",n),$(document).on("nested:fieldRemoved",r)}function n(s){$editRow=s.target.closest(".js-edit-row"),$editRow.style.height=`${$editRow.scrollHeight+16}px`,ql.initMaterialInputs($editRow)}function r(s){$editRow=s.target.closest(".js-edit-row"),$editRow.style.height=`${$editRow.scrollHeight-122-16}px`}return{init:e}}();ql.deploymentManager=function(){let t="",e="",n="";function r(){t=document.querySelector(".js-dm"),e=document.querySelector(".js-remove-dm-button"),n=document.querySelector(".js-remove-dm"),e.addEventListener("click",s)}function s(o){t.href="",t.style.color="red",t.style.fontWeight="400",t.style.textDecoration="line-through",n.value=1,e.remove()}return{init:r}}();ql.cloudFormation=function(){let t="",e="",n="";function r(){t=document.querySelector(".js-cf"),e=document.querySelector(".js-remove-cf-button"),n=document.querySelectorAll(".js-remove-cf"),e.addEventListener("click",s)}function s(o){t.href="",t.style.color="red",t.style.fontWeight="400",t.style.textDecoration="line-through",n.forEach(u=>u.value=""),e.remove()}return{init:r}}();ql.studentPolicy=function(){let t="",e="",n="";function r(){t=document.querySelector(".js-sp"),e=document.querySelector(".js-remove-sp-button"),n=document.querySelectorAll(".js-remove-sp"),e.addEventListener("click",s)}function s(o){t.href="",t.style.color="red",t.style.fontWeight="400",t.style.textDecoration="line-through",n.forEach(u=>u.value=""),e.remove()}return{init:r}}();ql.instruction=function(){$instructionCard="",$instructionContent="",$instructionHeader="",$instructionLoader="",$instructionRefresh="",instructionPoller={};function t(){$instructionContent=document.querySelector(".js-instruction-content"),$instructionHeader=document.querySelector(".js-instruction-header"),$instructionLoader=document.querySelector(".js-instruction-loader"),$instructionRefresh=document.querySelector(".js-instruction-refresh"),ql.subscribe("received-instruction-status",s),$instructionRefresh&&$instructionRefresh.addEventListener("click",e,!1)}function e(l){l.stopImmediatePropagation(),l.preventDefault(),$instructionContent.classList.add("is-faded"),$instructionLoader.classList.remove("is-hidden");let a=new Request(this.href,{method:"POST",credentials:"include",headers:new Headers({"X-CSRF-Token":document.querySelector('meta[name="csrf-token"]').content})});fetch(a).then(pe).then(ge).then(c=>n(c.status_path)).catch(u)}function n(l){instructionPoller=new ql.Poller(l,1e3,r,u),instructionPoller.start()}function r(l){ql.publish("received-instruction-status",l)}function s(l){l.state=="completed"&&(instructionPoller.stop(),ql.getHtml(l.display_path).then(o).catch(u))}function o(l){$instructionContent.innerHTML=l,$instructionContent.classList.remove("is-faded"),$instructionContent.classList.remove("is-hidden"),$instructionHeader.classList.remove("has-error"),$instructionLoader.classList.add("is-hidden")}function u(l){let a="Response not a JSON";typeof l=="string"?l.json().then(c=>{a=c.errors}):a=l.statusText,htmlSafeMessage=$("<div>").text(a).html(),$instructionContent.innerHTML=`<div class='lab__instructions__error'>
        <i class='material-icons'>error_outline</i>
        <p>${htmlSafeMessage}</p>
      </div>`,$instructionContent.classList.remove("is-faded"),$instructionContent.classList.remove("is-hidden"),$instructionHeader.classList.add("has-error"),$instructionLoader.classList.add("is-hidden")}return{init:t,poll:n}}();ql.downloadLab=function(){function t(){let e=document.getElementById("file_download-header");if(e===null)return;e.addEventListener("click",n);function n(){e.setAttribute("disabled","disabled"),e.querySelector("i").innerText="checkmark"}}return{init:t}}();ql.publishLab=function(){$publishButton="",$toast="",$toastMessage="",$toastLoader="",publishPoller={};function t(){$publishButton=document.querySelector(".js-publish-button"),$toast=document.querySelector(".js-toast"),$toastMessage=document.querySelector(".js-toast-message"),$toastLoader=$toast.querySelector(".mdl-js-progress"),ql.subscribe("received-publish-status",s),$publishButton.addEventListener("click",e)}function e(o){o.preventDefault();let u=new Request(this.href,{method:"POST",credentials:"include",headers:new Headers({"X-CSRF-Token":document.querySelector('meta[name="csrf-token"]').content})});fetch(u).then(pe).then(ge).then(l=>n(l.status_path)).catch(console.error)}function n(o){publishPoller=new ql.Poller(o,500,r),publishPoller.start()}function r(o){ql.publish("received-publish-status",o)}function s(o){o.status=="done"||o.status=="error"?(publishPoller.stop(),$toastLoader.classList.remove("is-visible"),$toastMessage.innerHTML=o.html):$toastLoader.classList.contains("is-visible")||($toastLoader.classList.add("is-visible"),$toastMessage.innerHTML=o.html),o.status==="error"?(ql.showFlash("warn",o.html),$toast.classList.remove("is-visible")):$toast.classList.add("is-visible")}return{init:t,poll:n}}();ql.labLocale=function(){$dialog="",$newLocaleButton="",$localeDialogBody="",localeDialog={};function t(){$newLocaleButton=document.querySelector(".js-new-locale"),$dialog=document.querySelector(".js-dialog"),$localeDialogBody=$dialog.querySelector(".js-new-lab-locale"),localeDialog=new ql.MaterialDialog($dialog),$newLocaleButton.addEventListener("click",e)}function e(s){s.preventDefault(),ql.getHtml(this.href).then(n).then(r).catch(console.error)}function n(s){$localeDialogBody.innerHTML=s,ql.initMaterialInputs($localeDialogBody),localeDialog.open()}function r(){$(document).on("ajax:success","form",(s,o,u,l)=>{$(document).off("ajax:success"),localeDialog.close(),window.location.replace(l.responseJSON.url)}).on("ajax:error","form",(s,o,u,l)=>{console.error(l)})}return{init:t}}();ql.tagSelect=function(){let t;function e(){t=document.querySelector(".js-chosen-tags").closest(".js-edit-row"),$(".js-chosen-tags").chosen().change(n)}function n(r){$chosenContainers=t.querySelectorAll(".chosen-container");let s=293;$chosenContainers.forEach(o=>{s+=o.offsetHeight}),t.style.height=`${s}px`}return{init:e}}();ql.permissionsSelect=function(){let t="",e="",n="";function r(){n=document.querySelector(".js-permissions-advanced-link"),e=document.querySelector(".js-chosen-permissions"),t=document.querySelector(".js-permissions-input"),t.addEventListener("change",o),n.addEventListener("click",u),$(".js-chosen-permissions").chosen().change(s)}function s(a){let d=[...this.selectedOptions].map(f=>f.value).join(`\r
`);t.value=d,l()}function o(a){this.classList.contains("is-visible")&&([...e.querySelectorAll("option")].forEach(f=>f.selected=!1),this.value.split(`
`).forEach(f=>{let b=e.querySelector(`[value='${f}']`);b&&(b.selected=!0)}),$(".js-chosen-permissions").trigger("chosen:updated")),l()}function u(a){t.classList.toggle("is-visible"),$chosen=document.querySelector(".js-permissions .chosen-container"),$chosen.classList.toggle("is-hidden"),$editRow=this.closest(".js-edit-row"),$editRow.classList.toggle("is-advanced"),newLabel=this.dataset.label,oldLabel=this.innerText,this.setAttribute("data-label",oldLabel),this.innerText=newLabel,l()}function l(){$chosen=document.querySelector(".js-permissions .chosen-container"),h=$chosen.offsetHeight,$editRow=$chosen.closest(".js-edit-row"),$editRow.style.height=`${h+114}px`}return{init:r}}();ql.disableLab=function(){$disableButton={},$disableIcon={},$disableNotice={};function t(){$disableButton=document.querySelector(".js-disable-lab"),$disableIcon=$disableButton.querySelector("ql-icon"),$disableButton.addEventListener("click",e,!1),$disableNotice=document.querySelector(".js-disable-notice"),ql.subscribe("labUpdated",r)}function e(s){s.preventDefault(),s.stopImmediatePropagation(),n(this.href)}function n(s){fetch(s,{method:"PATCH",credentials:"include",headers:new Headers({"X-CSRF-Token":document.querySelector('meta[name="csrf-token"]').content,Accept:"application/json","Content-Type":"application/json"})}).then(pe).then(ge).then(o=>ql.publish("labUpdated",o)).catch(o=>console.log(o))}function r(s){let o=s.disabled_for_catalogs_at?"disable":"enable",u=s.disabled_for_catalogs_at?"enable":"disable",l=s.disabled_for_catalogs_at?"check_box":"check_box_outline_blank",a=s.disabled_for_catalogs_at?"Enable lab":"Disable lab",c=$disableButton.href.replace(o,u);$disableButton.href=c,$disableIcon?$disableIcon.innerHTML=l:$disableButton.innerHTML=a,s.disabled_for_catalogs_at?$("#modal_disable").modal("show"):$disableNotice.remove()}return{init:t}}();ql.hints={reset(){document.querySelectorAll("ql-hint").forEach(t=>t.reset())},updateLabInstanceId(){document.querySelectorAll("ql-hint").forEach(t=>t.updateLabInstanceId(ql.labData.getLabInstanceId()))}};ql.labIndexView=function(){let t=[],e=0;function n(){t=[...document.querySelectorAll(".js-lab-row")],t.length&&(t[e].focus(),window.addEventListener("keyup",r))}function r(s){s.key==="ArrowDown"?t[e+1]&&(e++,t[e].focus()):s.key==="ArrowUp"&&t[e-1]&&(e--,t[e].focus())}return{init:n}}();ql.labInlineInstructionComponents=(()=>{let t=["ql-activity-tracking","ql-activity-tracking-ch","ql-multiple-choice-probe","ql-multiple-select-probe","ql-true-false-probe"].join(", ");return{updateLabInstanceId(){$(t).attr("labInstanceId",ql.labData.getLabInstanceId())}}})();ql.labLayout=function(){return{setTerminalLayout(){let t=document.getElementById("terminal-drawer"),e=document.getElementById("control-panel-drawer"),n=document.querySelector(".js-lab-control-panel"),r=document.getElementById("control-panel-menu"),s=document.getElementById("control-panel-target"),o=document.getElementById("lab-outline-drawer");for(let u of document.querySelectorAll(".js-end-lab-button-container"))u.classList.remove("hidden");if(r.children[0]!==n&&(r.appendChild(n),s.style.display="block",r.open()),e&&(e.open=!1),o&&(o.open=!1),t){t.open=!0;let u=document.querySelector("#discussion-drawer");u&&(u.mode="over",u.hide(),setTimeout(()=>this.resizeLayout(),200))}},reset(){let t=document.getElementById("terminal-drawer"),e=document.getElementById("control-panel-drawer"),n=document.querySelector(".js-lab-control-panel"),r=document.getElementById("control-panel-target"),s=document.getElementById("lab-outline-drawer"),o=document.getElementById("control-panel-menu");e.appendChild(n),o&&o.close(),r.style.display="none",t&&(t.open=!1),e&&(e.open=!0),s&&(s.open=!0),setTimeout(()=>{this.resizeLayout()},200)},resizeLayout(){let t=document.querySelector(".js-lab-control-panel"),e=document.getElementById("control-panel-drawer"),n=document.getElementById("control-panel-menu"),r=document.getElementById("lab-outline-drawer"),s=document.getElementById("lab-content-container"),o=document.getElementById("lab-instructions"),u=965,l=document.getElementById("terminal-drawer");if(ql.cloudTerminal.isTerminalActive()){l.open=!1,l.open=!0,n&&n.close();return}s.offsetWidth<=u?(t&&(t.classList.add("ql-lab-control-panel__in-content-drawer"),o.prepend(t)),e&&(e.open=!1),r&&(r.open=!1)):(t&&(t.classList.remove("ql-lab-control-panel__in-content-drawer"),e.appendChild(t)),e&&(e.open=!0),r&&(r.open=!0))},enableResizeLayout(){this.resizeLayout(),window.addEventListener("resize",this.resizeLayout)}}}();ql.labOutline={links:function(){let t,e,n,r;function u(){$container=document.querySelector("#lab-instructions"),t=document.querySelector(".js-lab-content"),n=t.querySelectorAll("h2:not(ql-expandable-infobox > h2)"),e=document.querySelector(".js-lab-content-outline"),r=e.querySelectorAll("a"),r.forEach(d=>d.addEventListener("click",l)),$container.addEventListener("scroll",a)}function l(d){d.preventDefault(),ql.track("clicked_lab_outline",{label:d.target.innerText});let f=d.target.getAttribute("href"),b=t.querySelector(f);b&&$($container).animate({scrollTop:b.offsetTop-24},500,()=>{d.target.blur(),a()})}function a(d){requestAnimationFrame(()=>{let f=$container.scrollTop+160,b=[...n].filter(w=>w.offsetTop<=f),y=b.length?b.pop():null;c(y)})}function c(d){if(r.forEach(f=>f.classList.remove("is-active")),r.forEach(f=>f.removeAttribute("aria-current")),d!=null){let f=e.querySelector(`a[href='#${d.id}']`);f.classList.add("is-active"),f.setAttribute("aria-current","step")}}return{init:u}}()};initRateItListener=function(){$(".js-rateit").bind("keydown",onSliderKeydown.bind(this)),$(".js-rateit").bind("rated",(t,e)=>{setRating(e),$("#submit").data("disabled")||$("#submit").prop("disabled",!1)}),$("#rate-lab-btn").on("click",()=>openLabReview())};openLabReview=function(){document.getElementById("lab-review-dialog").open()};initFormSubmitHandler=function(){$("#submit").on("click",()=>$(".js-lab-review-form").submit())};initReviewSubmitListener=function(){$(".js-lab-review-form").on("ajax:success",(t,e,n,r)=>{alertLabReviewSuccess(r)}).on("ajax:error",(t,e,n,r)=>{alertLabReviewError(e.responseText)})};alertLabReviewSuccess=function(t){document.getElementById("lab-review-dialog").close();let e=document.querySelector("ql-snackbar");e.innerHTML=trans.thanks_review,e.open()};alertLabReviewError=function(t){document.getElementById("lab-review-dialog").close();let e=document.querySelector("ql-snackbar");e.setAttribute("error",!0),e.innerHTML=JSON.parse(t).message,e.open()};setRating=function(t){$(".js-rating-input").val(t-3);let e=document.getElementById("lab-review-rateit");e.setAttribute("aria-valuenow",t),e.setAttribute("aria-valuetext",transSlider[`star_amount_${t}`])};moveSliderTo=function(e){var e=Math.min(Math.max(e,1),$("#lab-review-rateit").rateit("max"));$("#lab-review-rateit").rateit("value",e),$("#lab-review-rateit").trigger("rated",e)};onSliderKeydown=function(t){let e=$("#lab-review-rateit").rateit("value");switch(t.key){case"ArrowLeft":case"ArrowDown":this.moveSliderTo(e-1);break;case"ArrowRight":case"ArrowUp":this.moveSliderTo(e+1);break}};initLabReviewModal=function(){initRateItListener(),initReviewSubmitListener(),initFormSubmitHandler()};window.transSlider={};initLabReviewTranslations=function(t){transSlider=t};ql.labRun=(()=>{let t;function e(){t=new hallofmirrors.lab.LabInstancePoller({labRunnerId:ql.labData.getFocusId(),labContainerType:ql.labData.getParent(),successCallback(n){if(n.isExpired){ql.labRun.stopLab();return}ql.labData.setLabInstanceId(n.labInstanceId),ql.labAssessment.update(n.assessmentInfo),ql.game.updateLabLeaderboard(n.gameLeaderboard),ql.labInlineInstructionComponents.updateLabInstanceId(),ql.hints.updateLabInstanceId(),ql.labControlPanel.update(n),ql.instructionVariables.update(n.resourceData),ql.cloudTerminal.update(n.terminalUrl),n.terminalUrl&&ql.labLayout.setTerminalLayout()},errorCallback(n){console.error("Lab poll error: ",n)}})}return{init(){ql.labControlPanel.init(),ql.labLayout.enableResizeLayout(),e(),ql.labData.isRunning()&&t.start()},startLab({accessSuccess:n,ackedQuotaWarning:r}){if(ql.labData.isOrganizationLicenseRequired()&&!ql.labData.isOrganizationLicenseValid()&&ql.labData.isPaymentRequired()&&!ql.labData.hasCredits()){document.getElementById("insufficient-organization-licenses-modal").open();return}if((ql.labData.isPaymentRequired()||ql.labData.isWarningGiven())&&!n){$("#lab-access-modal").modal("show");return}ql.labControlPanel.setStarting(),(ql.labData.isRecaptchaEnabled()?executeRecaptchaForStartLabAsync().then(o=>ql.labData.setRecaptchaV3Token(o)):Promise.resolve()).then(()=>ql.labXhr.startLab({ackedQuotaWarning:r})).then(o=>{o.message&&hallofmirrors.snackbarService.alert(o.message),ql.track("lab_started",ql.labData.getAnalyticsPayload()),t.start(),ql.labControlPanel.hideV2Recaptcha(),ql.labData.setRecaptchaV2Token(void 0),ql.labData.setRecaptchaV3Token(void 0)}).catch(o=>{ql.labControlPanel.reset(),ql.labAlert.alertHttpError(o)})},endRunningLabAndStartLab({labInstanceId:n}){hallofmirrors.lab.labHttpService.endLab({labInstanceId:n}),ql.labRun.confirmStartLab({labInstanceId:n,ackedQuotaWarning:!1})},confirmStartLab({ackedQuotaWarning:n}){document.querySelector("ql-snackbar").close(),ql.labRun.startLab({accessSuccess:!0,ackedQuotaWarning:n})},stopLab(){ql.labControlPanel.setStopping(),ql.track("clicked_end_lab_button",ql.labData.getAnalyticsPayload()),ql.labXhr.stopLab().then(({runtime_error:n,resource_limit_violation:r})=>{if(ql.labData.clearLabInstanceId(),t.stop(),ql.labControlPanel.reset(),ql.labAssessment.reset(),ql.labActivityTracking.reset(),ql.instructionVariables.reset(),ql.cloudTerminal.reset(),ql.labLayout.reset(),ql.hints.reset(),n)ql.labAlert.alertMessage(n);else if(r)ql.labAlert.alertMessage(r);else{let s=document.getElementById("lab-review-dialog");s&&s.open()}}).catch(n=>{ql.labAlert.alertHttpError(n),ql.labControlPanel.setRunning()})}}})();ql.labXhr={startLab({ackedQuotaWarning:t}){return hallofmirrors.lab.labHttpService.startLab({labRunnerId:ql.labData.getFocusId(),labContainerType:ql.labData.getParent(),learningPlanId:ql.labData.getLearningPlanId(),qlcampaign:ql.labData.getQlcampaign(),recaptchaV3Token:ql.labData.getRecaptchaV3Token(),recaptchaV2Token:ql.labData.getRecaptchaV2Token(),ackedQuotaWarning:t})},stopLab(){let t=ql.labData.getLabInstanceId();return t?hallofmirrors.lab.labHttpService.endLab({labInstanceId:t}):Promise.resolve({runtime_error:null,resource_limit_violation:null})}};var ne="top",oe="bottom",se="right",re="left",Nn="auto",We=[ne,oe,se,re],Ie="start",tt="end",ds="clippingParents",Vn="viewport",qt="popper",hs="reference",Gi=We.reduce(function(t,e){return t.concat([e+"-"+Ie,e+"-"+tt])},[]),Wn=[].concat(We,[Nn]).reduce(function(t,e){return t.concat([e,e+"-"+Ie,e+"-"+tt])},[]),Pa="beforeRead",Ia="read",Ma="afterRead",ja="beforeMain",Ba="main",Da="afterMain",Oa="beforeWrite",Fa="write",Ha="afterWrite",fs=[Pa,Ia,Ma,ja,Ba,Da,Oa,Fa,Ha];function ce(t){return t?(t.nodeName||"").toLowerCase():null}function Z(t){if(t==null)return window;if(t.toString()!=="[object Window]"){var e=t.ownerDocument;return e&&e.defaultView||window}return t}function _e(t){var e=Z(t).Element;return t instanceof e||t instanceof Element}function ae(t){var e=Z(t).HTMLElement;return t instanceof e||t instanceof HTMLElement}function Lt(t){if(typeof ShadowRoot>"u")return!1;var e=Z(t).ShadowRoot;return t instanceof e||t instanceof ShadowRoot}function Na(t){var e=t.state;Object.keys(e.elements).forEach(function(n){var r=e.styles[n]||{},s=e.attributes[n]||{},o=e.elements[n];!ae(o)||!ce(o)||(Object.assign(o.style,r),Object.keys(s).forEach(function(u){var l=s[u];l===!1?o.removeAttribute(u):o.setAttribute(u,l===!0?"":l)}))})}function Va(t){var e=t.state,n={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,n.popper),e.styles=n,e.elements.arrow&&Object.assign(e.elements.arrow.style,n.arrow),function(){Object.keys(e.elements).forEach(function(r){var s=e.elements[r],o=e.attributes[r]||{},u=Object.keys(e.styles.hasOwnProperty(r)?e.styles[r]:n[r]),l=u.reduce(function(a,c){return a[c]="",a},{});!ae(s)||!ce(s)||(Object.assign(s.style,l),Object.keys(o).forEach(function(a){s.removeAttribute(a)}))})}}var Qt={name:"applyStyles",enabled:!0,phase:"write",fn:Na,effect:Va,requires:["computeStyles"]};function ue(t){return t.split("-")[0]}var qe=Math.max,nt=Math.min,Me=Math.round;function At(){var t=navigator.userAgentData;return t!=null&&t.brands&&Array.isArray(t.brands)?t.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function Zt(){return!/^((?!chrome|android).)*safari/i.test(At())}function we(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!1);var r=t.getBoundingClientRect(),s=1,o=1;e&&ae(t)&&(s=t.offsetWidth>0&&Me(r.width)/t.offsetWidth||1,o=t.offsetHeight>0&&Me(r.height)/t.offsetHeight||1);var u=_e(t)?Z(t):window,l=u.visualViewport,a=!Zt()&&n,c=(r.left+(a&&l?l.offsetLeft:0))/s,d=(r.top+(a&&l?l.offsetTop:0))/o,f=r.width/s,b=r.height/o;return{width:f,height:b,top:d,right:c+f,bottom:d+b,left:c,x:c,y:d}}function it(t){var e=we(t),n=t.offsetWidth,r=t.offsetHeight;return Math.abs(e.width-n)<=1&&(n=e.width),Math.abs(e.height-r)<=1&&(r=e.height),{x:t.offsetLeft,y:t.offsetTop,width:n,height:r}}function en(t,e){var n=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(n&&Lt(n)){var r=e;do{if(r&&t.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function me(t){return Z(t).getComputedStyle(t)}function Ki(t){return["table","td","th"].indexOf(ce(t))>=0}function de(t){return((_e(t)?t.ownerDocument:t.document)||window.document).documentElement}function je(t){return ce(t)==="html"?t:t.assignedSlot||t.parentNode||(Lt(t)?t.host:null)||de(t)}function ps(t){return!ae(t)||me(t).position==="fixed"?null:t.offsetParent}function Wa(t){var e=/firefox/i.test(At()),n=/Trident/i.test(At());if(n&&ae(t)){var r=me(t);if(r.position==="fixed")return null}var s=je(t);for(Lt(s)&&(s=s.host);ae(s)&&["html","body"].indexOf(ce(s))<0;){var o=me(s);if(o.transform!=="none"||o.perspective!=="none"||o.contain==="paint"||["transform","perspective"].indexOf(o.willChange)!==-1||e&&o.willChange==="filter"||e&&o.filter&&o.filter!=="none")return s;s=s.parentNode}return null}function Le(t){for(var e=Z(t),n=ps(t);n&&Ki(n)&&me(n).position==="static";)n=ps(n);return n&&(ce(n)==="html"||ce(n)==="body"&&me(n).position==="static")?e:n||Wa(t)||e}function rt(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function st(t,e,n){return qe(t,nt(e,n))}function ms(t,e,n){var r=st(t,e,n);return r>n?n:r}function tn(){return{top:0,right:0,bottom:0,left:0}}function nn(t){return Object.assign({},tn(),t)}function rn(t,e){return e.reduce(function(n,r){return n[r]=t,n},{})}var Ua=function(e,n){return e=typeof e=="function"?e(Object.assign({},n.rects,{placement:n.placement})):e,nn(typeof e!="number"?e:rn(e,We))};function za(t){var e,n=t.state,r=t.name,s=t.options,o=n.elements.arrow,u=n.modifiersData.popperOffsets,l=ue(n.placement),a=rt(l),c=[re,se].indexOf(l)>=0,d=c?"height":"width";if(!(!o||!u)){var f=Ua(s.padding,n),b=it(o),y=a==="y"?ne:re,w=a==="y"?oe:se,k=n.rects.reference[d]+n.rects.reference[a]-u[a]-n.rects.popper[d],C=u[a]-n.rects.reference[a],j=Le(o),B=j?a==="y"?j.clientHeight||0:j.clientWidth||0:0,M=k/2-C/2,p=f[y],D=B-b[d]-f[w],q=B/2-b[d]/2+M,T=st(p,q,D),F=a;n.modifiersData[r]=(e={},e[F]=T,e.centerOffset=T-q,e)}}function Ja(t){var e=t.state,n=t.options,r=n.element,s=r===void 0?"[data-popper-arrow]":r;s!=null&&(typeof s=="string"&&(s=e.elements.popper.querySelector(s),!s)||en(e.elements.popper,s)&&(e.elements.arrow=s))}var gs={name:"arrow",enabled:!0,phase:"main",fn:za,effect:Ja,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Se(t){return t.split("-")[1]}var Ya={top:"auto",right:"auto",bottom:"auto",left:"auto"};function Xa(t,e){var n=t.x,r=t.y,s=e.devicePixelRatio||1;return{x:Me(n*s)/s||0,y:Me(r*s)/s||0}}function bs(t){var e,n=t.popper,r=t.popperRect,s=t.placement,o=t.variation,u=t.offsets,l=t.position,a=t.gpuAcceleration,c=t.adaptive,d=t.roundOffsets,f=t.isFixed,b=u.x,y=b===void 0?0:b,w=u.y,k=w===void 0?0:w,C=typeof d=="function"?d({x:y,y:k}):{x:y,y:k};y=C.x,k=C.y;var j=u.hasOwnProperty("x"),B=u.hasOwnProperty("y"),M=re,p=ne,D=window;if(c){var q=Le(n),T="clientHeight",F="clientWidth";if(q===Z(n)&&(q=de(n),me(q).position!=="static"&&l==="absolute"&&(T="scrollHeight",F="scrollWidth")),q=q,s===ne||(s===re||s===se)&&o===tt){p=oe;var N=f&&q===D&&D.visualViewport?D.visualViewport.height:q[T];k-=N-r.height,k*=a?1:-1}if(s===re||(s===ne||s===oe)&&o===tt){M=se;var V=f&&q===D&&D.visualViewport?D.visualViewport.width:q[F];y-=V-r.width,y*=a?1:-1}}var J=Object.assign({position:l},c&&Ya),z=d===!0?Xa({x:y,y:k},Z(n)):{x:y,y:k};if(y=z.x,k=z.y,a){var W;return Object.assign({},J,(W={},W[p]=B?"0":"",W[M]=j?"0":"",W.transform=(D.devicePixelRatio||1)<=1?"translate("+y+"px, "+k+"px)":"translate3d("+y+"px, "+k+"px, 0)",W))}return Object.assign({},J,(e={},e[p]=B?k+"px":"",e[M]=j?y+"px":"",e.transform="",e))}function Ga(t){var e=t.state,n=t.options,r=n.gpuAcceleration,s=r===void 0?!0:r,o=n.adaptive,u=o===void 0?!0:o,l=n.roundOffsets,a=l===void 0?!0:l,c={placement:ue(e.placement),variation:Se(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:s,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,bs(Object.assign({},c,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:u,roundOffsets:a})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,bs(Object.assign({},c,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:a})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}var vs={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:Ga,data:{}};var Un={passive:!0};function Ka(t){var e=t.state,n=t.instance,r=t.options,s=r.scroll,o=s===void 0?!0:s,u=r.resize,l=u===void 0?!0:u,a=Z(e.elements.popper),c=[].concat(e.scrollParents.reference,e.scrollParents.popper);return o&&c.forEach(function(d){d.addEventListener("scroll",n.update,Un)}),l&&a.addEventListener("resize",n.update,Un),function(){o&&c.forEach(function(d){d.removeEventListener("scroll",n.update,Un)}),l&&a.removeEventListener("resize",n.update,Un)}}var ys={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:Ka,data:{}};var Qa={left:"right",right:"left",bottom:"top",top:"bottom"};function kt(t){return t.replace(/left|right|bottom|top/g,function(e){return Qa[e]})}var Za={start:"end",end:"start"};function zn(t){return t.replace(/start|end/g,function(e){return Za[e]})}function ot(t){var e=Z(t),n=e.pageXOffset,r=e.pageYOffset;return{scrollLeft:n,scrollTop:r}}function at(t){return we(de(t)).left+ot(t).scrollLeft}function Qi(t,e){var n=Z(t),r=de(t),s=n.visualViewport,o=r.clientWidth,u=r.clientHeight,l=0,a=0;if(s){o=s.width,u=s.height;var c=Zt();(c||!c&&e==="fixed")&&(l=s.offsetLeft,a=s.offsetTop)}return{width:o,height:u,x:l+at(t),y:a}}function Zi(t){var e,n=de(t),r=ot(t),s=(e=t.ownerDocument)==null?void 0:e.body,o=qe(n.scrollWidth,n.clientWidth,s?s.scrollWidth:0,s?s.clientWidth:0),u=qe(n.scrollHeight,n.clientHeight,s?s.scrollHeight:0,s?s.clientHeight:0),l=-r.scrollLeft+at(t),a=-r.scrollTop;return me(s||n).direction==="rtl"&&(l+=qe(n.clientWidth,s?s.clientWidth:0)-o),{width:o,height:u,x:l,y:a}}function lt(t){var e=me(t),n=e.overflow,r=e.overflowX,s=e.overflowY;return/auto|scroll|overlay|hidden/.test(n+s+r)}function Jn(t){return["html","body","#document"].indexOf(ce(t))>=0?t.ownerDocument.body:ae(t)&&lt(t)?t:Jn(je(t))}function Ue(t,e){var n;e===void 0&&(e=[]);var r=Jn(t),s=r===((n=t.ownerDocument)==null?void 0:n.body),o=Z(r),u=s?[o].concat(o.visualViewport||[],lt(r)?r:[]):r,l=e.concat(u);return s?l:l.concat(Ue(je(u)))}function Tt(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function el(t,e){var n=we(t,!1,e==="fixed");return n.top=n.top+t.clientTop,n.left=n.left+t.clientLeft,n.bottom=n.top+t.clientHeight,n.right=n.left+t.clientWidth,n.width=t.clientWidth,n.height=t.clientHeight,n.x=n.left,n.y=n.top,n}function _s(t,e,n){return e===Vn?Tt(Qi(t,n)):_e(e)?el(e,n):Tt(Zi(de(t)))}function tl(t){var e=Ue(je(t)),n=["absolute","fixed"].indexOf(me(t).position)>=0,r=n&&ae(t)?Le(t):t;return _e(r)?e.filter(function(s){return _e(s)&&en(s,r)&&ce(s)!=="body"}):[]}function er(t,e,n,r){var s=e==="clippingParents"?tl(t):[].concat(e),o=[].concat(s,[n]),u=o[0],l=o.reduce(function(a,c){var d=_s(t,c,r);return a.top=qe(d.top,a.top),a.right=nt(d.right,a.right),a.bottom=nt(d.bottom,a.bottom),a.left=qe(d.left,a.left),a},_s(t,u,r));return l.width=l.right-l.left,l.height=l.bottom-l.top,l.x=l.left,l.y=l.top,l}function sn(t){var e=t.reference,n=t.element,r=t.placement,s=r?ue(r):null,o=r?Se(r):null,u=e.x+e.width/2-n.width/2,l=e.y+e.height/2-n.height/2,a;switch(s){case ne:a={x:u,y:e.y-n.height};break;case oe:a={x:u,y:e.y+e.height};break;case se:a={x:e.x+e.width,y:l};break;case re:a={x:e.x-n.width,y:l};break;default:a={x:e.x,y:e.y}}var c=s?rt(s):null;if(c!=null){var d=c==="y"?"height":"width";switch(o){case Ie:a[c]=a[c]-(e[d]/2-n[d]/2);break;case tt:a[c]=a[c]+(e[d]/2-n[d]/2);break;default:}}return a}function Ae(t,e){e===void 0&&(e={});var n=e,r=n.placement,s=r===void 0?t.placement:r,o=n.strategy,u=o===void 0?t.strategy:o,l=n.boundary,a=l===void 0?ds:l,c=n.rootBoundary,d=c===void 0?Vn:c,f=n.elementContext,b=f===void 0?qt:f,y=n.altBoundary,w=y===void 0?!1:y,k=n.padding,C=k===void 0?0:k,j=nn(typeof C!="number"?C:rn(C,We)),B=b===qt?hs:qt,M=t.rects.popper,p=t.elements[w?B:b],D=er(_e(p)?p:p.contextElement||de(t.elements.popper),a,d,u),q=we(t.elements.reference),T=sn({reference:q,element:M,strategy:"absolute",placement:s}),F=Tt(Object.assign({},M,T)),N=b===qt?F:q,V={top:D.top-N.top+j.top,bottom:N.bottom-D.bottom+j.bottom,left:D.left-N.left+j.left,right:N.right-D.right+j.right},J=t.modifiersData.offset;if(b===qt&&J){var z=J[s];Object.keys(V).forEach(function(W){var K=[se,oe].indexOf(W)>=0?1:-1,I=[ne,oe].indexOf(W)>=0?"y":"x";V[W]+=z[I]*K})}return V}function tr(t,e){e===void 0&&(e={});var n=e,r=n.placement,s=n.boundary,o=n.rootBoundary,u=n.padding,l=n.flipVariations,a=n.allowedAutoPlacements,c=a===void 0?Wn:a,d=Se(r),f=d?l?Gi:Gi.filter(function(w){return Se(w)===d}):We,b=f.filter(function(w){return c.indexOf(w)>=0});b.length===0&&(b=f);var y=b.reduce(function(w,k){return w[k]=Ae(t,{placement:k,boundary:s,rootBoundary:o,padding:u})[ue(k)],w},{});return Object.keys(y).sort(function(w,k){return y[w]-y[k]})}function nl(t){if(ue(t)===Nn)return[];var e=kt(t);return[zn(t),e,zn(e)]}function il(t){var e=t.state,n=t.options,r=t.name;if(!e.modifiersData[r]._skip){for(var s=n.mainAxis,o=s===void 0?!0:s,u=n.altAxis,l=u===void 0?!0:u,a=n.fallbackPlacements,c=n.padding,d=n.boundary,f=n.rootBoundary,b=n.altBoundary,y=n.flipVariations,w=y===void 0?!0:y,k=n.allowedAutoPlacements,C=e.options.placement,j=ue(C),B=j===C,M=a||(B||!w?[kt(C)]:nl(C)),p=[C].concat(M).reduce(function(P,O){return P.concat(ue(O)===Nn?tr(e,{placement:O,boundary:d,rootBoundary:f,padding:c,flipVariations:w,allowedAutoPlacements:k}):O)},[]),D=e.rects.reference,q=e.rects.popper,T=new Map,F=!0,N=p[0],V=0;V<p.length;V++){var J=p[V],z=ue(J),W=Se(J)===Ie,K=[ne,oe].indexOf(z)>=0,I=K?"width":"height",m=Ae(e,{placement:J,boundary:d,rootBoundary:f,altBoundary:b,padding:c}),g=K?W?se:re:W?oe:ne;D[I]>q[I]&&(g=kt(g));var v=kt(g),A=[];if(o&&A.push(m[z]<=0),l&&A.push(m[g]<=0,m[v]<=0),A.every(function(P){return P})){N=J,F=!1;break}T.set(J,A)}if(F)for(var E=w?3:1,_=function(O){var U=p.find(function(ie){var he=T.get(ie);if(he)return he.slice(0,O).every(function(Te){return Te})});if(U)return N=U,"break"},L=E;L>0;L--){var x=_(L);if(x==="break")break}e.placement!==N&&(e.modifiersData[r]._skip=!0,e.placement=N,e.reset=!0)}}var ws={name:"flip",enabled:!0,phase:"main",fn:il,requiresIfExists:["offset"],data:{_skip:!1}};function Ss(t,e,n){return n===void 0&&(n={x:0,y:0}),{top:t.top-e.height-n.y,right:t.right-e.width+n.x,bottom:t.bottom-e.height+n.y,left:t.left-e.width-n.x}}function Es(t){return[ne,se,oe,re].some(function(e){return t[e]>=0})}function rl(t){var e=t.state,n=t.name,r=e.rects.reference,s=e.rects.popper,o=e.modifiersData.preventOverflow,u=Ae(e,{elementContext:"reference"}),l=Ae(e,{altBoundary:!0}),a=Ss(u,r),c=Ss(l,s,o),d=Es(a),f=Es(c);e.modifiersData[n]={referenceClippingOffsets:a,popperEscapeOffsets:c,isReferenceHidden:d,hasPopperEscaped:f},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":d,"data-popper-escaped":f})}var qs={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:rl};function sl(t,e,n){var r=ue(t),s=[re,ne].indexOf(r)>=0?-1:1,o=typeof n=="function"?n(Object.assign({},e,{placement:t})):n,u=o[0],l=o[1];return u=u||0,l=(l||0)*s,[re,se].indexOf(r)>=0?{x:l,y:u}:{x:u,y:l}}function ol(t){var e=t.state,n=t.options,r=t.name,s=n.offset,o=s===void 0?[0,0]:s,u=Wn.reduce(function(d,f){return d[f]=sl(f,e.rects,o),d},{}),l=u[e.placement],a=l.x,c=l.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=a,e.modifiersData.popperOffsets.y+=c),e.modifiersData[r]=u}var Ls={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:ol};function al(t){var e=t.state,n=t.name;e.modifiersData[n]=sn({reference:e.rects.reference,element:e.rects.popper,strategy:"absolute",placement:e.placement})}var As={name:"popperOffsets",enabled:!0,phase:"read",fn:al,data:{}};function nr(t){return t==="x"?"y":"x"}function ll(t){var e=t.state,n=t.options,r=t.name,s=n.mainAxis,o=s===void 0?!0:s,u=n.altAxis,l=u===void 0?!1:u,a=n.boundary,c=n.rootBoundary,d=n.altBoundary,f=n.padding,b=n.tether,y=b===void 0?!0:b,w=n.tetherOffset,k=w===void 0?0:w,C=Ae(e,{boundary:a,rootBoundary:c,padding:f,altBoundary:d}),j=ue(e.placement),B=Se(e.placement),M=!B,p=rt(j),D=nr(p),q=e.modifiersData.popperOffsets,T=e.rects.reference,F=e.rects.popper,N=typeof k=="function"?k(Object.assign({},e.rects,{placement:e.placement})):k,V=typeof N=="number"?{mainAxis:N,altAxis:N}:Object.assign({mainAxis:0,altAxis:0},N),J=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,z={x:0,y:0};if(q){if(o){var W,K=p==="y"?ne:re,I=p==="y"?oe:se,m=p==="y"?"height":"width",g=q[p],v=g+C[K],A=g-C[I],E=y?-F[m]/2:0,_=B===Ie?T[m]:F[m],L=B===Ie?-F[m]:-T[m],x=e.elements.arrow,P=y&&x?it(x):{width:0,height:0},O=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:tn(),U=O[K],ie=O[I],he=st(0,T[m],P[m]),Te=M?T[m]/2-E-he-U-V.mainAxis:_-he-U-V.mainAxis,xe=M?-T[m]/2+E+he+ie+V.mainAxis:L+he+ie+V.mainAxis,ut=e.elements.arrow&&Le(e.elements.arrow),cn=ut?p==="y"?ut.clientTop||0:ut.clientLeft||0:0,Ct=(W=J?.[p])!=null?W:0,un=g+Te-Ct-cn,dn=g+xe-Ct,$t=st(y?nt(v,un):v,g,y?qe(A,dn):A);q[p]=$t,z[p]=$t-g}if(l){var Rt,hn=p==="x"?ne:re,fn=p==="x"?oe:se,Re=q[D],Be=D==="y"?"height":"width",Pt=Re+C[hn],ze=Re-C[fn],It=[ne,re].indexOf(j)!==-1,pn=(Rt=J?.[D])!=null?Rt:0,mn=It?Pt:Re-T[Be]-F[Be]-pn+V.altAxis,gn=It?Re+T[Be]+F[Be]-pn-V.altAxis:ze,bn=y&&It?ms(mn,Re,gn):st(y?mn:Pt,Re,y?gn:ze);q[D]=bn,z[D]=bn-Re}e.modifiersData[r]=z}}var ks={name:"preventOverflow",enabled:!0,phase:"main",fn:ll,requiresIfExists:["offset"]};function ir(t){return{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}}function rr(t){return t===Z(t)||!ae(t)?ot(t):ir(t)}function cl(t){var e=t.getBoundingClientRect(),n=Me(e.width)/t.offsetWidth||1,r=Me(e.height)/t.offsetHeight||1;return n!==1||r!==1}function sr(t,e,n){n===void 0&&(n=!1);var r=ae(e),s=ae(e)&&cl(e),o=de(e),u=we(t,s,n),l={scrollLeft:0,scrollTop:0},a={x:0,y:0};return(r||!r&&!n)&&((ce(e)!=="body"||lt(o))&&(l=rr(e)),ae(e)?(a=we(e,!0),a.x+=e.clientLeft,a.y+=e.clientTop):o&&(a.x=at(o))),{x:u.left+l.scrollLeft-a.x,y:u.top+l.scrollTop-a.y,width:u.width,height:u.height}}function ul(t){var e=new Map,n=new Set,r=[];t.forEach(function(o){e.set(o.name,o)});function s(o){n.add(o.name);var u=[].concat(o.requires||[],o.requiresIfExists||[]);u.forEach(function(l){if(!n.has(l)){var a=e.get(l);a&&s(a)}}),r.push(o)}return t.forEach(function(o){n.has(o.name)||s(o)}),r}function or(t){var e=ul(t);return fs.reduce(function(n,r){return n.concat(e.filter(function(s){return s.phase===r}))},[])}function ar(t){var e;return function(){return e||(e=new Promise(function(n){Promise.resolve().then(function(){e=void 0,n(t())})})),e}}function lr(t){var e=t.reduce(function(n,r){var s=n[r.name];return n[r.name]=s?Object.assign({},s,r,{options:Object.assign({},s.options,r.options),data:Object.assign({},s.data,r.data)}):r,n},{});return Object.keys(e).map(function(n){return e[n]})}var Ts={placement:"bottom",modifiers:[],strategy:"absolute"};function xs(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return!e.some(function(r){return!(r&&typeof r.getBoundingClientRect=="function")})}function Cs(t){t===void 0&&(t={});var e=t,n=e.defaultModifiers,r=n===void 0?[]:n,s=e.defaultOptions,o=s===void 0?Ts:s;return function(l,a,c){c===void 0&&(c=o);var d={placement:"bottom",orderedModifiers:[],options:Object.assign({},Ts,o),modifiersData:{},elements:{reference:l,popper:a},attributes:{},styles:{}},f=[],b=!1,y={state:d,setOptions:function(j){var B=typeof j=="function"?j(d.options):j;k(),d.options=Object.assign({},o,d.options,B),d.scrollParents={reference:_e(l)?Ue(l):l.contextElement?Ue(l.contextElement):[],popper:Ue(a)};var M=or(lr([].concat(r,d.options.modifiers)));return d.orderedModifiers=M.filter(function(p){return p.enabled}),w(),y.update()},forceUpdate:function(){if(!b){var j=d.elements,B=j.reference,M=j.popper;if(xs(B,M)){d.rects={reference:sr(B,Le(M),d.options.strategy==="fixed"),popper:it(M)},d.reset=!1,d.placement=d.options.placement,d.orderedModifiers.forEach(function(V){return d.modifiersData[V.name]=Object.assign({},V.data)});for(var p=0;p<d.orderedModifiers.length;p++){if(d.reset===!0){d.reset=!1,p=-1;continue}var D=d.orderedModifiers[p],q=D.fn,T=D.options,F=T===void 0?{}:T,N=D.name;typeof q=="function"&&(d=q({state:d,options:F,name:N,instance:y})||d)}}}},update:ar(function(){return new Promise(function(C){y.forceUpdate(),C(d)})}),destroy:function(){k(),b=!0}};if(!xs(l,a))return y;y.setOptions(c).then(function(C){!b&&c.onFirstUpdate&&c.onFirstUpdate(C)});function w(){d.orderedModifiers.forEach(function(C){var j=C.name,B=C.options,M=B===void 0?{}:B,p=C.effect;if(typeof p=="function"){var D=p({state:d,name:j,instance:y,options:M}),q=function(){};f.push(D||q)}})}function k(){f.forEach(function(C){return C()}),f=[]}return y}}var dl=[ys,As,vs,Qt,Ls,ws,ks,gs,qs],cr=Cs({defaultModifiers:dl});var hl="tippy-box",Fs="tippy-content",fl="tippy-backdrop",Hs="tippy-arrow",Ns="tippy-svg-arrow",ct={passive:!0,capture:!0},Vs=function(){return document.body};function ur(t,e,n){if(Array.isArray(t)){var r=t[e];return r??(Array.isArray(n)?n[e]:n)}return t}function gr(t,e){var n={}.toString.call(t);return n.indexOf("[object")===0&&n.indexOf(e+"]")>-1}function Ws(t,e){return typeof t=="function"?t.apply(void 0,e):t}function $s(t,e){if(e===0)return t;var n;return function(r){clearTimeout(n),n=setTimeout(function(){t(r)},e)}}function pl(t){return t.split(/\s+/).filter(Boolean)}function xt(t){return[].concat(t)}function Rs(t,e){t.indexOf(e)===-1&&t.push(e)}function ml(t){return t.filter(function(e,n){return t.indexOf(e)===n})}function gl(t){return t.split("-")[0]}function Xn(t){return[].slice.call(t)}function Ps(t){return Object.keys(t).reduce(function(e,n){return t[n]!==void 0&&(e[n]=t[n]),e},{})}function on(){return document.createElement("div")}function Gn(t){return["Element","Fragment"].some(function(e){return gr(t,e)})}function bl(t){return gr(t,"NodeList")}function vl(t){return gr(t,"MouseEvent")}function yl(t){return!!(t&&t._tippy&&t._tippy.reference===t)}function _l(t){return Gn(t)?[t]:bl(t)?Xn(t):Array.isArray(t)?t:Xn(document.querySelectorAll(t))}function dr(t,e){t.forEach(function(n){n&&(n.style.transitionDuration=e+"ms")})}function Is(t,e){t.forEach(function(n){n&&n.setAttribute("data-state",e)})}function wl(t){var e,n=xt(t),r=n[0];return r!=null&&(e=r.ownerDocument)!=null&&e.body?r.ownerDocument:document}function Sl(t,e){var n=e.clientX,r=e.clientY;return t.every(function(s){var o=s.popperRect,u=s.popperState,l=s.props,a=l.interactiveBorder,c=gl(u.placement),d=u.modifiersData.offset;if(!d)return!0;var f=c==="bottom"?d.top.y:0,b=c==="top"?d.bottom.y:0,y=c==="right"?d.left.x:0,w=c==="left"?d.right.x:0,k=o.top-r+f>a,C=r-o.bottom-b>a,j=o.left-n+y>a,B=n-o.right-w>a;return k||C||j||B})}function hr(t,e,n){var r=e+"EventListener";["transitionend","webkitTransitionEnd"].forEach(function(s){t[r](s,n)})}function Ms(t,e){for(var n=e;n;){var r;if(t.contains(n))return!0;n=n.getRootNode==null||(r=n.getRootNode())==null?void 0:r.host}return!1}var $e={isTouch:!1},js=0;function El(){$e.isTouch||($e.isTouch=!0,window.performance&&document.addEventListener("mousemove",Us))}function Us(){var t=performance.now();t-js<20&&($e.isTouch=!1,document.removeEventListener("mousemove",Us)),js=t}function Ll(){var t=document.activeElement;if(yl(t)){var e=t._tippy;t.blur&&!e.state.isVisible&&t.blur()}}function Al(){document.addEventListener("touchstart",El,ct),window.addEventListener("blur",Ll)}var kl=typeof window<"u"&&typeof document<"u",Tl=kl?!!window.msCrypto:!1;var xl={animateFill:!1,followCursor:!1,inlinePositioning:!1,sticky:!1},Cl={allowHTML:!1,animation:"fade",arrow:!0,content:"",inertia:!1,maxWidth:350,role:"tooltip",theme:"",zIndex:9999},ke=Object.assign({appendTo:Vs,aria:{content:"auto",expanded:"auto"},delay:0,duration:[300,250],getReferenceClientRect:null,hideOnClick:!0,ignoreAttributes:!1,interactive:!1,interactiveBorder:2,interactiveDebounce:0,moveTransition:"",offset:[0,10],onAfterUpdate:function(){},onBeforeUpdate:function(){},onCreate:function(){},onDestroy:function(){},onHidden:function(){},onHide:function(){},onMount:function(){},onShow:function(){},onShown:function(){},onTrigger:function(){},onUntrigger:function(){},onClickOutside:function(){},placement:"top",plugins:[],popperOptions:{},render:null,showOnCreate:!1,touch:!0,trigger:"mouseenter focus",triggerTarget:null},xl,Cl),$l=Object.keys(ke),Rl=function(e){var n=Object.keys(e);n.forEach(function(r){ke[r]=e[r]})};function zs(t){var e=t.plugins||[],n=e.reduce(function(r,s){var o=s.name,u=s.defaultValue;if(o){var l;r[o]=t[o]!==void 0?t[o]:(l=ke[o])!=null?l:u}return r},{});return Object.assign({},t,n)}function Pl(t,e){var n=e?Object.keys(zs(Object.assign({},ke,{plugins:e}))):$l,r=n.reduce(function(s,o){var u=(t.getAttribute("data-tippy-"+o)||"").trim();if(!u)return s;if(o==="content")s[o]=u;else try{s[o]=JSON.parse(u)}catch{s[o]=u}return s},{});return r}function Bs(t,e){var n=Object.assign({},e,{content:Ws(e.content,[t])},e.ignoreAttributes?{}:Pl(t,e.plugins));return n.aria=Object.assign({},ke.aria,n.aria),n.aria={expanded:n.aria.expanded==="auto"?e.interactive:n.aria.expanded,content:n.aria.content==="auto"?e.interactive?null:"describedby":n.aria.content},n}var Il=function(){return"innerHTML"};function pr(t,e){t[Il()]=e}function Ds(t){var e=on();return t===!0?e.className=Hs:(e.className=Ns,Gn(t)?e.appendChild(t):pr(e,t)),e}function Os(t,e){Gn(e.content)?(pr(t,""),t.appendChild(e.content)):typeof e.content!="function"&&(e.allowHTML?pr(t,e.content):t.textContent=e.content)}function mr(t){var e=t.firstElementChild,n=Xn(e.children);return{box:e,content:n.find(function(r){return r.classList.contains(Fs)}),arrow:n.find(function(r){return r.classList.contains(Hs)||r.classList.contains(Ns)}),backdrop:n.find(function(r){return r.classList.contains(fl)})}}function Js(t){var e=on(),n=on();n.className=hl,n.setAttribute("data-state","hidden"),n.setAttribute("tabindex","-1");var r=on();r.className=Fs,r.setAttribute("data-state","hidden"),Os(r,t.props),e.appendChild(n),n.appendChild(r),s(t.props,t.props);function s(o,u){var l=mr(e),a=l.box,c=l.content,d=l.arrow;u.theme?a.setAttribute("data-theme",u.theme):a.removeAttribute("data-theme"),typeof u.animation=="string"?a.setAttribute("data-animation",u.animation):a.removeAttribute("data-animation"),u.inertia?a.setAttribute("data-inertia",""):a.removeAttribute("data-inertia"),a.style.maxWidth=typeof u.maxWidth=="number"?u.maxWidth+"px":u.maxWidth,u.role?a.setAttribute("role",u.role):a.removeAttribute("role"),(o.content!==u.content||o.allowHTML!==u.allowHTML)&&Os(c,t.props),u.arrow?d?o.arrow!==u.arrow&&(a.removeChild(d),a.appendChild(Ds(u.arrow))):a.appendChild(Ds(u.arrow)):d&&a.removeChild(d)}return{popper:e,onUpdate:s}}Js.$$tippy=!0;var Ml=1,Yn=[],fr=[];function jl(t,e){var n=Bs(t,Object.assign({},ke,zs(Ps(e)))),r,s,o,u=!1,l=!1,a=!1,c=!1,d,f,b,y=[],w=$s(un,n.interactiveDebounce),k,C=Ml++,j=null,B=ml(n.plugins),M={isEnabled:!0,isVisible:!1,isDestroyed:!1,isMounted:!1,isShown:!1},p={id:C,reference:t,popper:on(),popperInstance:j,props:n,state:M,plugins:B,clearDelayTimeouts:mn,setProps:gn,setContent:bn,show:Gs,hide:Ks,hideWithInteractivity:Qs,enable:It,disable:pn,unmount:Zs,destroy:eo};if(!n.render)return p;var D=n.render(p),q=D.popper,T=D.onUpdate;q.setAttribute("data-tippy-root",""),q.id="tippy-"+p.id,p.popper=q,t._tippy=p,q._tippy=p;var F=B.map(function(S){return S.fn(p)}),N=t.hasAttribute("aria-expanded");return ut(),E(),g(),v("onCreate",[p]),n.showOnCreate&&Pt(),q.addEventListener("mouseenter",function(){p.props.interactive&&p.state.isVisible&&p.clearDelayTimeouts()}),q.addEventListener("mouseleave",function(){p.props.interactive&&p.props.trigger.indexOf("mouseenter")>=0&&K().addEventListener("mousemove",w)}),p;function V(){var S=p.props.touch;return Array.isArray(S)?S:[S,0]}function J(){return V()[0]==="hold"}function z(){var S;return!!((S=p.props.render)!=null&&S.$$tippy)}function W(){return k||t}function K(){var S=W().parentNode;return S?wl(S):document}function I(){return mr(q)}function m(S){return p.state.isMounted&&!p.state.isVisible||$e.isTouch||d&&d.type==="focus"?0:ur(p.props.delay,S?0:1,ke.delay)}function g(S){S===void 0&&(S=!1),q.style.pointerEvents=p.props.interactive&&!S?"":"none",q.style.zIndex=""+p.props.zIndex}function v(S,R,H){if(H===void 0&&(H=!0),F.forEach(function(Y){Y[S]&&Y[S].apply(Y,R)}),H){var X;(X=p.props)[S].apply(X,R)}}function A(){var S=p.props.aria;if(S.content){var R="aria-"+S.content,H=q.id,X=xt(p.props.triggerTarget||t);X.forEach(function(Y){var fe=Y.getAttribute(R);if(p.state.isVisible)Y.setAttribute(R,fe?fe+" "+H:H);else{var ve=fe&&fe.replace(H,"").trim();ve?Y.setAttribute(R,ve):Y.removeAttribute(R)}})}}function E(){if(!(N||!p.props.aria.expanded)){var S=xt(p.props.triggerTarget||t);S.forEach(function(R){p.props.interactive?R.setAttribute("aria-expanded",p.state.isVisible&&R===W()?"true":"false"):R.removeAttribute("aria-expanded")})}}function _(){K().removeEventListener("mousemove",w),Yn=Yn.filter(function(S){return S!==w})}function L(S){if(!($e.isTouch&&(a||S.type==="mousedown"))){var R=S.composedPath&&S.composedPath()[0]||S.target;if(!(p.props.interactive&&Ms(q,R))){if(xt(p.props.triggerTarget||t).some(function(H){return Ms(H,R)})){if($e.isTouch||p.state.isVisible&&p.props.trigger.indexOf("click")>=0)return}else v("onClickOutside",[p,S]);p.props.hideOnClick===!0&&(p.clearDelayTimeouts(),p.hide(),l=!0,setTimeout(function(){l=!1}),p.state.isMounted||U())}}}function x(){a=!0}function P(){a=!1}function O(){var S=K();S.addEventListener("mousedown",L,!0),S.addEventListener("touchend",L,ct),S.addEventListener("touchstart",P,ct),S.addEventListener("touchmove",x,ct)}function U(){var S=K();S.removeEventListener("mousedown",L,!0),S.removeEventListener("touchend",L,ct),S.removeEventListener("touchstart",P,ct),S.removeEventListener("touchmove",x,ct)}function ie(S,R){Te(S,function(){!p.state.isVisible&&q.parentNode&&q.parentNode.contains(q)&&R()})}function he(S,R){Te(S,R)}function Te(S,R){var H=I().box;function X(Y){Y.target===H&&(hr(H,"remove",X),R())}if(S===0)return R();hr(H,"remove",f),hr(H,"add",X),f=X}function xe(S,R,H){H===void 0&&(H=!1);var X=xt(p.props.triggerTarget||t);X.forEach(function(Y){Y.addEventListener(S,R,H),y.push({node:Y,eventType:S,handler:R,options:H})})}function ut(){J()&&(xe("touchstart",Ct,{passive:!0}),xe("touchend",dn,{passive:!0})),pl(p.props.trigger).forEach(function(S){if(S!=="manual")switch(xe(S,Ct),S){case"mouseenter":xe("mouseleave",dn);break;case"focus":xe(Tl?"focusout":"blur",$t);break;case"focusin":xe("focusout",$t);break}})}function cn(){y.forEach(function(S){var R=S.node,H=S.eventType,X=S.handler,Y=S.options;R.removeEventListener(H,X,Y)}),y=[]}function Ct(S){var R,H=!1;if(!(!p.state.isEnabled||Rt(S)||l)){var X=((R=d)==null?void 0:R.type)==="focus";d=S,k=S.currentTarget,E(),!p.state.isVisible&&vl(S)&&Yn.forEach(function(Y){return Y(S)}),S.type==="click"&&(p.props.trigger.indexOf("mouseenter")<0||u)&&p.props.hideOnClick!==!1&&p.state.isVisible?H=!0:Pt(S),S.type==="click"&&(u=!H),H&&!X&&ze(S)}}function un(S){var R=S.target,H=W().contains(R)||q.contains(R);if(!(S.type==="mousemove"&&H)){var X=Be().concat(q).map(function(Y){var fe,ve=Y._tippy,dt=(fe=ve.popperInstance)==null?void 0:fe.state;return dt?{popperRect:Y.getBoundingClientRect(),popperState:dt,props:n}:null}).filter(Boolean);Sl(X,S)&&(_(),ze(S))}}function dn(S){var R=Rt(S)||p.props.trigger.indexOf("click")>=0&&u;if(!R){if(p.props.interactive){p.hideWithInteractivity(S);return}ze(S)}}function $t(S){p.props.trigger.indexOf("focusin")<0&&S.target!==W()||p.props.interactive&&S.relatedTarget&&q.contains(S.relatedTarget)||ze(S)}function Rt(S){return $e.isTouch?J()!==S.type.indexOf("touch")>=0:!1}function hn(){fn();var S=p.props,R=S.popperOptions,H=S.placement,X=S.offset,Y=S.getReferenceClientRect,fe=S.moveTransition,ve=z()?mr(q).arrow:null,dt=Y?{getBoundingClientRect:Y,contextElement:Y.contextElement||W()}:t,br={name:"$$tippy",enabled:!0,phase:"beforeWrite",requires:["computeStyles"],fn:function(vn){var ht=vn.state;if(z()){var to=I(),Zn=to.box;["placement","reference-hidden","escaped"].forEach(function(yn){yn==="placement"?Zn.setAttribute("data-placement",ht.placement):ht.attributes.popper["data-popper-"+yn]?Zn.setAttribute("data-"+yn,""):Zn.removeAttribute("data-"+yn)}),ht.attributes.popper={}}}},Je=[{name:"offset",options:{offset:X}},{name:"preventOverflow",options:{padding:{top:2,bottom:2,left:5,right:5}}},{name:"flip",options:{padding:5}},{name:"computeStyles",options:{adaptive:!fe}},br];z()&&ve&&Je.push({name:"arrow",options:{element:ve,padding:3}}),Je.push.apply(Je,R?.modifiers||[]),p.popperInstance=cr(dt,q,Object.assign({},R,{placement:H,onFirstUpdate:b,modifiers:Je}))}function fn(){p.popperInstance&&(p.popperInstance.destroy(),p.popperInstance=null)}function Re(){var S=p.props.appendTo,R,H=W();p.props.interactive&&S===Vs||S==="parent"?R=H.parentNode:R=Ws(S,[H]),R.contains(q)||R.appendChild(q),p.state.isMounted=!0,hn()}function Be(){return Xn(q.querySelectorAll("[data-tippy-root]"))}function Pt(S){p.clearDelayTimeouts(),S&&v("onTrigger",[p,S]),O();var R=m(!0),H=V(),X=H[0],Y=H[1];$e.isTouch&&X==="hold"&&Y&&(R=Y),R?r=setTimeout(function(){p.show()},R):p.show()}function ze(S){if(p.clearDelayTimeouts(),v("onUntrigger",[p,S]),!p.state.isVisible){U();return}if(!(p.props.trigger.indexOf("mouseenter")>=0&&p.props.trigger.indexOf("click")>=0&&["mouseleave","mousemove"].indexOf(S.type)>=0&&u)){var R=m(!1);R?s=setTimeout(function(){p.state.isVisible&&p.hide()},R):o=requestAnimationFrame(function(){p.hide()})}}function It(){p.state.isEnabled=!0}function pn(){p.hide(),p.state.isEnabled=!1}function mn(){clearTimeout(r),clearTimeout(s),cancelAnimationFrame(o)}function gn(S){if(!p.state.isDestroyed){v("onBeforeUpdate",[p,S]),cn();var R=p.props,H=Bs(t,Object.assign({},R,Ps(S),{ignoreAttributes:!0}));p.props=H,ut(),R.interactiveDebounce!==H.interactiveDebounce&&(_(),w=$s(un,H.interactiveDebounce)),R.triggerTarget&&!H.triggerTarget?xt(R.triggerTarget).forEach(function(X){X.removeAttribute("aria-expanded")}):H.triggerTarget&&t.removeAttribute("aria-expanded"),E(),g(),T&&T(R,H),p.popperInstance&&(hn(),Be().forEach(function(X){requestAnimationFrame(X._tippy.popperInstance.forceUpdate)})),v("onAfterUpdate",[p,S])}}function bn(S){p.setProps({content:S})}function Gs(){var S=p.state.isVisible,R=p.state.isDestroyed,H=!p.state.isEnabled,X=$e.isTouch&&!p.props.touch,Y=ur(p.props.duration,0,ke.duration);if(!(S||R||H||X)&&!W().hasAttribute("disabled")&&(v("onShow",[p],!1),p.props.onShow(p)!==!1)){if(p.state.isVisible=!0,z()&&(q.style.visibility="visible"),g(),O(),p.state.isMounted||(q.style.transition="none"),z()){var fe=I(),ve=fe.box,dt=fe.content;dr([ve,dt],0)}b=function(){var Je;if(!(!p.state.isVisible||c)){if(c=!0,q.offsetHeight,q.style.transition=p.props.moveTransition,z()&&p.props.animation){var Qn=I(),vn=Qn.box,ht=Qn.content;dr([vn,ht],Y),Is([vn,ht],"visible")}A(),E(),Rs(fr,p),(Je=p.popperInstance)==null||Je.forceUpdate(),v("onMount",[p]),p.props.animation&&z()&&he(Y,function(){p.state.isShown=!0,v("onShown",[p])})}},Re()}}function Ks(){var S=!p.state.isVisible,R=p.state.isDestroyed,H=!p.state.isEnabled,X=ur(p.props.duration,1,ke.duration);if(!(S||R||H)&&(v("onHide",[p],!1),p.props.onHide(p)!==!1)){if(p.state.isVisible=!1,p.state.isShown=!1,c=!1,u=!1,z()&&(q.style.visibility="hidden"),_(),U(),g(!0),z()){var Y=I(),fe=Y.box,ve=Y.content;p.props.animation&&(dr([fe,ve],X),Is([fe,ve],"hidden"))}A(),E(),p.props.animation?z()&&ie(X,p.unmount):p.unmount()}}function Qs(S){K().addEventListener("mousemove",w),Rs(Yn,w),w(S)}function Zs(){p.state.isVisible&&p.hide(),p.state.isMounted&&(fn(),Be().forEach(function(S){S._tippy.unmount()}),q.parentNode&&q.parentNode.removeChild(q),fr=fr.filter(function(S){return S!==p}),p.state.isMounted=!1,v("onHidden",[p]))}function eo(){p.state.isDestroyed||(p.clearDelayTimeouts(),p.unmount(),cn(),delete t._tippy,p.state.isDestroyed=!0,v("onDestroy",[p]))}}function an(t,e){e===void 0&&(e={});var n=ke.plugins.concat(e.plugins||[]);Al();var r=Object.assign({},e,{plugins:n}),s=_l(t);if(0)var o,u;var l=s.reduce(function(a,c){var d=c&&jl(c,r);return d&&a.push(d),a},[]);return Gn(t)?l[0]:l}an.defaultProps=ke;an.setDefaultProps=Rl;an.currentInput=$e;var jf=Object.assign({},Qt,{effect:function(e){var n=e.state,r={popper:{position:n.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};Object.assign(n.elements.popper.style,r.popper),n.styles=r,n.elements.arrow&&Object.assign(n.elements.arrow.style,r.arrow)}});an.setDefaultProps({render:Js});var Ys=an;ql.labsTaken=function(){function t(){return $(".labs_taken_partial").length>0?$(".labs_taken_partial").data("translation"):(console.log("Warning: could not find labs_taken translations"),{})}function e(s,o,u){let l,a=t();if(l="<p><strong>"+a.not_available+"</strong></p>",s.total_score!=null){for(l="<div id='assessment-popover'>",i=0;i<s.step_points.length;i++){if(l+="<div class='row'>",l+="<div class='assessment-steps'>",l+="<div class='row'>",l+="<span class='span1 step-no'>"+(i+1)+"</span>",l+="<span class='span2 step-title'>"+s.step_titles[i]+"</span>",s.completion_only==!0){let d="icon-remove";s.step_points[i]!=""&&s.step_points[i]==s.step_scores[i]&&(d="icon-ok"),l+="<span class='span1 step-score'><i class='"+d+"'></i></span>"}else s.step_points[i]==""?l+="<span class='span1 step-score'>"+s.step_scores[i]+"</span>":l+="<span class='span1 step-score'>"+s.step_scores[i]+"/"+s.step_points[i]+"</span>";l+="</div></div></div>"}l+="<div class='row'>",l+="<div class='assessment-steps'>",l+="<div class='row'>",l+="<span class='span2 total-score'>",s.completion_only==!0?l+=a.complete:l+=a.total,l+="</span>",l+="<span class='span1 step-final'>",s.completion_only==!0?l+=s.completed_steps+"/"+s.total_steps:l+=s.total_score+"/"+s.perfect_score,l+="</span></div></div></div>"}Ys(document.querySelector("#lab-instance-tooltip-"+$(this).data("labinstance")),{trigger:"manual",allowHTML:!0,content:l,interactive:!0,placement:"right"}).show()}function n(s){let o=$(this).data("labinstance");return $.ajax({url:"/lab_instances/assessment/"+o+".json",context:this,error:function(u,l,a){console.log("Assessment Details ajax fail: ["+l+"/"+a+"]")},success:e}),!1}function r(){$(".labs_taken_partial").length>0&&$('[data-toggle="popover"]').on("click",n)}return{init:r}}();clickCheckbox=function(t){let e="program_group_learning_plans_"+t;document.getElementById(e).hasAttribute("checked")?document.getElementById(e).removeAttribute("checked"):document.getElementById(e).setAttribute("checked","true")};ql.learningPlanEdit=(()=>{function t(){ql.sortable.init(".learnable-position-field");let r=document.querySelectorAll("ql-activity-card ql-toggle-button");for(button of r)button.addEventListener("click",e)}function e(r){let s=this.dataset.itemid,o=document.querySelector(`.destroy-${s}-field`);o&&(o.value==="false"?(o.value="true",this.parentElement.disabled=!0):(o.value="false",this.parentElement.disabled=!1))}function n(r){if(r.files&&r.files[0]){let s=new FileReader,o=document.querySelector("ql-activity-card");s.onload=u=>{o.setAttribute("imagesrc",u.target.result)},s.readAsDataURL(r.files[0])}}return{init:t,update_image_preview:n}})();ql.learningTree={info:function(){function t(){let e=document.querySelector("#drawer-container"),n=document.querySelector("#learning-tree-info-drawer");n.addEventListener("toggle",r=>{r.target===n&&(r.detail.on?e.classList.add("info-drawer-opened"):e.classList.remove("info-drawer-opened"))});for(let r of document.querySelectorAll(".js-close-learning-tree-info"))r.addEventListener("click",()=>{n.hide()})}return{init:t}}()};ql.list=function(){function t(){document.querySelectorAll(".js-list-item").forEach(r=>{$expandToggle=r.querySelector(".js-list-item-expand"),$expandToggle.addEventListener("click",e,!1)})}function e(n){$listItem=this.closest(".js-list-item"),$listItemDetails=$listItem.querySelector(".js-list-item-details"),$listItem.classList.toggle("is-expanded");let r=this.offsetHeight+$listItemDetails.offsetHeight;$listItem.style.height=`${r}px`}return{init:t}}();ql.MaterialDialog=function(t,e){this.dialog=t,this.dismissers=$(this.dialog).find("[data-dismiss]"),this.isOpen=e||!1,this.listen(),this.upgrade(),this.render()};ql.MaterialDialog.prototype.upgrade=function(){$(this.dialog).addClass("is-upgraded")};ql.MaterialDialog.prototype.listen=function(){for(let t=0;t<this.dismissers.length;t++)this.dismissers[t].addEventListener("click",this.close.bind(this))};ql.MaterialDialog.prototype.close=function(){this.isOpen=!1,this.render()};ql.MaterialDialog.prototype.open=function(){this.isOpen=!0,this.render()};ql.MaterialDialog.prototype.render=function(){this.isOpen?$(this.dialog).addClass("is-open"):$(this.dialog).removeClass("is-open")};ql.MaterialInput=function(t){this.input=t,this.wrapper=this.input.parentElement.parentElement,this.isFilled=!!this.input.value,this.isValid=!0,this.listen(),this.upgrade()};ql.MaterialInput.prototype.listen=function(){this.input.addEventListener("input",this.setAndRender.bind(this)),this.input.addEventListener("blur",this.setAndRender.bind(this))};ql.MaterialInput.prototype.upgrade=function(){$(this.input).addClass("is-upgraded")};ql.MaterialInput.prototype.setAndRender=function(){this.setAttributes(),this.isFilled?$(this.input).addClass("is-filled"):$(this.input).removeClass("is-filled"),this.isValid?$(this.wrapper).removeClass("has-error"):$(this.wrapper).addClass("has-error")};ql.MaterialInput.prototype.setAttributes=function(){this.setIsFilled(),this.setIsValid()};ql.MaterialInput.prototype.setIsFilled=function(){this.isFilled=!!this.input.value};ql.MaterialInput.prototype.setIsValid=function(){this.isValid=this.input.validity.valid};ql.initMaterialInputs=function(t){if(t=t||[],t.length)var e=t.find(".md-input__input");else var e=document.getElementsByClassName("md-input__input");for(let n=0;n<e.length;n++)$(e[n]).hasClass("is-upgraded")||new ql.MaterialInput(e[n])};var Bl=`:root {
  --game-color: #E52592;
  --classroom-color: #01877E;
  --external-course-color: #D56E0C;
  --certification-color: #C5221F;
}

abbr[title],
abbr[data-original-title] {
  border-bottom: none !important;
}

label abbr[title] {
  color: var(--primary-text-on-surface-color);
}

hr {
  border: 0;
  border-top: 1px solid var(--hairline-color);
  display: block;
  height: 1px;
  margin: 24px 0;
  padding: 0;
}

mark {
  background-color: #F9AB00;
  border-radius: 2px;
  color: inherit;
  padding: 2px 0px;
}

p, li {
  font: var(--md-sys-typescale-body-large);
}

._small-label_1gdx7_37,
._label--small_1gdx7_38 {
  font: var(--md-sys-typescale-body-medium);
  text-decoration: none;
}

strong {
  font-weight: 700;
}

._mdl-typography--small-title_1gdx7_47 {
  color: #202124;
  font-size: 15px;
  font-weight: 400;
}

._text--blue_1gdx7_53 {
  color: var(--primary-text-on-surface-color);
}

._text--center_1gdx7_57 {
  text-align: center;
}

._text--capitalize_1gdx7_61 {
  text-transform: capitalize;
}

._text--code_1gdx7_65 {
  font-family: "Roboto Mono", monospace;
}

._text--copy_1gdx7_69 {
  font-family: var(--md-ref-typeface-plain);
}

._text--error_1gdx7_73 {
  color: var(--warn-color);
}

._text--free_1gdx7_77 {
  color: var(--success-color);
  font-weight: 700;
  text-transform: uppercase;
}

._text--gray_1gdx7_83 {
  color: rgba(0, 0, 0, 0.54);
}

._text--light_1gdx7_87 {
  color: var(--light-text-on-surface-color) !important;
}

._text--right_1gdx7_91 {
  text-align: right;
}

._text--sign_1gdx7_95 {
  font-family: "Oswald", sans-serif;
}

._text--small_1gdx7_99 {
  font-size: 14px !important;
}

._text--large_1gdx7_103 {
  font-size: 20px !important;
}

._text--success_1gdx7_107 {
  color: var(--success-color) !important;
}

._text--yellow_1gdx7_111 {
  color: #F9AB00;
}

._text--red_1gdx7_115 {
  color: #D93025;
}

._text--green_1gdx7_119 {
  color: #34A853;
}

u {
  text-decoration: none;
}

._material-icons_1gdx7_127 {
  font-family: "Material Icons";
  font-weight: normal;
  font-style: normal;
  font-size: 24px; /* Preferred icon size */
  display: inline-block;
  line-height: 1;
  text-transform: none;
  letter-spacing: normal;
  word-wrap: normal;
  white-space: nowrap;
  direction: ltr;
  /* Support for all WebKit browsers. */
  -webkit-font-smoothing: antialiased;
  /* Support for Safari and Chrome. */
  text-rendering: optimizeLegibility;
  /* Support for Firefox. */
  -moz-osx-font-smoothing: grayscale;
  /* Support for IE. */
  font-feature-settings: "liga";
}

._ellipsis_1gdx7_149 {
  text-overflow: ellipsis;
  white-space: nowrap;
  overflow: hidden;
}

._text--rtl_1gdx7_155 {
  direction: rtl;
}

._body-wrapper_1gdx7_159 {
  max-width: 800px;
}

._text--button_1gdx7_163 {
  font: var(--md-sys-typescale-label-large);
}`;document.head.appendChild(document.createElement("style")).appendChild(document.createTextNode(Bl));var ln={mobile:"(max-width: 600px)",tablet:"(max-width: 965px)",smallMonitor:"(max-width: 1263px)",largeMonitor:"(min-width: 1264px)",smallLabel:"_small-label_1gdx7_37",labelSmall:"_label--small_1gdx7_38",mdlTypographySmallTitle:"_mdl-typography--small-title_1gdx7_47",textBlue:"_text--blue_1gdx7_53",textCenter:"_text--center_1gdx7_57",textCapitalize:"_text--capitalize_1gdx7_61",textCode:"_text--code_1gdx7_65",textCopy:"_text--copy_1gdx7_69",textError:"_text--error_1gdx7_73",textFree:"_text--free_1gdx7_77",textGray:"_text--gray_1gdx7_83",textLight:"_text--light_1gdx7_87",textRight:"_text--right_1gdx7_91",textSign:"_text--sign_1gdx7_95",textSmall:"_text--small_1gdx7_99",textLarge:"_text--large_1gdx7_103",textSuccess:"_text--success_1gdx7_107",textYellow:"_text--yellow_1gdx7_111",textRed:"_text--red_1gdx7_115",textGreen:"_text--green_1gdx7_119",materialIcons:"_material-icons_1gdx7_127",ellipsis:"_ellipsis_1gdx7_149",textRtl:"_text--rtl_1gdx7_155",bodyWrapper:"_body-wrapper_1gdx7_159",textButton:"_text--button_1gdx7_163"};ql.media={mobile:window.matchMedia(ln.mobile),tablet:window.matchMedia(ln.tablet),smallMonitor:window.matchMedia(ln.smallMonitor),largeMonitor:window.matchMedia(ln.largeMonitor)};retrieve_selected_emails=function(t){if($(t)[0].value)return;let e="";$(".selectable:checked").each((n,r)=>{e=e.concat("<input name='selected_emails[]' value="+r.value+" hidden='True'></input>")}),t&&($(e).insertBefore($(t)[0]),$(t)[0].remove())};ql.modals=function(){function t(){$(".modal[data-show]").modal("show"),$(".modal[data-modal-shown-path]").on("show.bs.modal",function(){$.get(this.dataset.modalShownPath)}).modal("show"),document.addEventListener("openModal",e)}function e(n){if(modal=document.getElementById(n.detail.modal),!modal)throw new Error(`Modal with id ${n.detail.modal} not found.`);typeof modal.open=="function"?modal.open():$(modal).modal("show")}return{init:t}}();ql.activityReportModal=function(){function t(e){let n=e.split("_")[0];$("#activity_report_date_range_picker").flatpickr({mode:"range",locale:n,onChange:function(r){if(r.length===2){let s=this.formatDate(r[0],"Y-m-d"),o=this.formatDate(r[1],"Y-m-d");$("#activity_report_date_range").val(`${s}_${o}`)}}})}return{init:t}}();initCheckboxOpenModal=function(){$(".js-enable-checkbox-open-modal").on("click",t=>{if($(t.currentTarget).find('input[type="checkbox"]').attr("newCheck")){$(t.currentTarget).find('input[type="checkbox"]').attr("checked")?$(t.currentTarget).find('input[type="checkbox"]').removeAttr("checked"):$(t.currentTarget).find('input[type="checkbox"]').attr("checked","true");return}if($(t.currentTarget).find('input[type="checkbox"]').attr("checked")){let e=$(t.currentTarget).find('input[type="checkbox"]').prop("id"),n=document.getElementById("deactivate-modal"),r=n.getElementsByClassName("js-enable-checkbox-open-modal-submit")[0];$(t.currentTarget).attr("on","true"),r.setAttribute("checkboxId",e),n.open()}else $(t.currentTarget).find('input[type="checkbox"]')&&($(t.currentTarget).find('input[type="checkbox"]').attr("newCheck","true"),$(t.currentTarget).find('input[type="checkbox"]').attr("checked","true"))}),$(".js-enable-checkbox-open-modal-submit").on("click",t=>{let e=$(t.currentTarget).attr("checkboxId");document.getElementById(e).setAttribute("newCheck","true"),document.getElementById("deactivate-modal").close(),document.getElementById(e).click()})};ql.myAccount={validateInputField:function(t,e,n,r){t.validity.valid?e.style.display="none":(e.textContent=t.validationMessage,e.style.display="block",n.disabled=!1,r.preventDefault())},validateChangeEmail:function(t){let e=document.querySelector("#user_email"),n=document.querySelector("#change-email-current-password"),r=document.querySelector("#change-email-new-email-error"),s=document.querySelector("#change-email-current-password-error"),o=t.target.querySelector(".button"),u=e.validity.valid&&n.validity.valid;return o.disabled=!0,this.validateInputField(e,r,o,t),this.validateInputField(n,s,o,t),u},validateChangePassword:function(t){let e=document.querySelector("#change-password-current-password"),n=document.querySelector("#user_password"),r=document.querySelector("#user_password_confirmation"),s=document.querySelector("#change-password-current-password-error"),o=document.querySelector("#change-password-new-password-error"),u=document.querySelector("#change-password-confirm-password-error"),l=t.target.querySelector(".button"),a=e.validity.valid&&n.validity.valid&&r.validity.valid;return l.disabled=!0,this.validateInputField(e,s,l,t),this.validateInputField(n,o,l,t),this.validateInputField(r,u,l,t),a}};ql.navPanel=function(){let t;function e(){t=document.querySelector(".js-nav-panel"),document.querySelectorAll(".js-nav-toggle").forEach(s=>s.addEventListener("click",n))}function n(r){r.preventDefault(),t.classList.toggle("is-open"),ql.track("Side navigation toggled",{category:"Navigation"})}return{init:e}}();ql.navigation=function(){let t;function e(){t=document.querySelectorAll(".js-navigation-button"),t.forEach(r=>{r.addEventListener("click",n,!1)})}function n(r){ql.track("Navigation link clicked",{category:"Navigation",label:this.title})}return{init:e}}();ql.initNewLabWindowListener=function(){$(window).resize(()=>{ql.setHorizontal()})};ql.setHorizontal=function(){$(window).width()<600?($(".md-input").removeClass("md-input--horizontal"),$(".js-permissions-select").removeClass("permissions-select__container--horizontal"),$(".js-labs-resources").removeClass("labs__resources--horizontal")):($(".md-input").addClass("md-input--horizontal"),$(".js-student-resources .md-input").removeClass("md-input--horizontal"),$(".js-permissions-select").addClass("permissions-select__container--horizontal"),$(".js-labs-resources").addClass("labs__resources--horizontal"))};ql.initNewStudentResourceListener=function(){$(document).on("nested:fieldAdded",t=>{let e=t.field.find(".md-input__input");for(let n=0;n<e.length;n++)new ql.MaterialInput(e[n])})};ql.initInstructionRemovedListener=function(){$(document).on("nested:fieldRemoved",t=>{t.field.next(".js-add-instruction").click()})};ql.initNewLabLocale=function(){ql.initNewLabLocaleButtonListener(),ql.initNewLabLocaleSubmitListener()};ql.initNewLabLocaleButtonListener=function(){$(".js-new-lab-locale-button").on("ajax:success",(t,e,n,r)=>{$(".js-new-lab-locale").html(r.responseText),ql.initMaterialInputs($(".js-new-lab-locale")),ql.newLabLocaleDialog=new ql.MaterialDialog($(".js-dialog"),!0)})};ql.initNewLabLocaleSubmitListener=function(){$(document).on("ajax:success","form",(t,e,n,r)=>{ql.newLabLocaleDialog.close(),$(".js-lab-locales-table").find(".flex-table__row:nth-child(1)").after(r.responseText),$(".js-lab-locales-table").find(".flex-table__row:nth-child(2)").addClass("is-new")}).on("ajax:error","form",(t,e,n,r)=>{console.log("aww")})};ql.organizations=(()=>{let t,e;function n(){t=document.querySelector(".metadata-pairs"),e=t.firstElementChild.cloneNode(!0),document.querySelector(".js-add-item").addEventListener("click",r)}function r(){let o=e.cloneNode(!0),u=new Date().getTime();o.id=`metadata-pair-${u}`,o.children[0].firstElementChild.value="",o.children[0].firstElementChild.id=`metadata-array-key-${u}`,o.children[0].firstElementChild.setAttribute("aria-label",`metadata-array-key-${u}`),o.children[1].firstElementChild.value="",o.children[1].firstElementChild.id=`metadata-array-value-${u}`,o.children[1].firstElementChild.setAttribute("aria-label",`metadata-array-value-${u}`),o.children[2].firstElementChild.setAttribute("onclick",`ql.organizations.removePair('${o.id}')`),t.appendChild(o)}function s(o){let u=document.getElementById(o);u.parentNode.removeChild(u)}return{init:n,removePair:s}})();ql.pagination=function(){let t="";function e(){n(),r()}function n(){t=document.querySelectorAll(".js-pagination select")}function r(){t.forEach(o=>{o.addEventListener("change",s)})}function s(o){if(o.preventDefault(),this.value&&"URLSearchParams"in window){let u=new URLSearchParams(window.location.search);u.set(this.name,this.value),window.location.search=u.toString()}}return{init:e}}();var Dl=function(){$(".js-purchase-option").first().prop("checked",!0)},Ol=function(){$(".js-purchase-option").change(function(){$(".js-purchase-option").siblings(".js-purchase-option-details").removeClass("is-selected"),$(this).siblings(".js-purchase-option-details").addClass("is-selected"),Kn(),$(this).hasClass("js-other-credit")||$(".js-other-credit").prop("disabled",!0)})},Fl=function(){$(".js-other-option").change(()=>{$(".js-other-credit").prop("disabled",!1).focus()})},Hl=function(){$(".js-other-credit").on("keyup mouseup change",function(){$(".js-other-option").val($(this).val()),Kn()})};initCreditsQuantityInputListener=function(){$(".js-credits-quantity-input").on("keyup mouseup change",function(){let t=$(".js-payments-paths").data("calculate-total-path"),e=$(this).val().trim();$.get(t,{quantity:e,product_code:"credit",round:!0},null,"json").success(r=>{$(".js-payment-total").html(r.price),$(".js-payment-total").data("price_in_cents",r.price_in_cents),r.discount?$(".js-payment-discount").html(r.discount):$(".js-payment-discount").html("")})})};var Nl=function(){$(".js-add-promo-code-button").click(t=>{t.preventDefault();let e=$(".js-purchase-option:checked"),n=e.val().trim(),r=e.data("product-code"),s=$(".js-promo-code").val().trim(),o=$(".js-payments-paths").data("validate-promo-code-path");if(s==null||s==") && (quantity == null || quantity == ")return!1;$.get(o,{uuid:s,credits:n,product_code:r},null,"html").success(l=>{$(".js-payment-details").html(l),$("#payment_details_modal").modal("show"),Xs(),Kn()})})},Xs=function(){$("#redeem_now").click(()=>{redeemNowUrl=$(".js-payments-paths").data("redeem-now-path"),promoCode=$(".js-promo-code").val().trim(),$.post(redeemNowUrl,{uuid:promoCode}).fail(t=>{alert("Redeem call failed: "+t.responseText)}).done(t=>{window.location.href=t})})},Kn=function(){let t=$(".js-purchase-option:checked"),e=t.val().trim(),n=t.data("product-code"),r=$(".js-promo-code").val().trim(),s=t.data("course-id"),o=$(".js-payments-paths").data("calculate-total-path");$.get(o,{quantity:e,product_code:n,promo_code:r,course_id:s},null,"json").success(l=>{l.full_price.subtotal?($(".js-payment-sub-total").html(l.full_price.subtotal),$(".js-payment-tax").html(l.full_price.tax),$(".js-payment-total").html(l.full_price.total),$(".js-payment-total").data("price_in_cents",l.price_in_cents)):($(".js-payment-total").html(l.price),$(".js-payment-total").data("price_in_cents",l.price_in_cents))})};initStripeButton=function(){if($(".js-stripe-button").length){let e=$(".js-stripe-button").data("currency"),n=e==="usd"||e==="cny",r=StripeCheckout.configure({key:$(".js-stripe-button").data("key"),currency:$(".js-stripe-button").data("currency"),alipay:n,locale:"auto",token:function(s){let o=$(".js-purchase-option:checked"),u=o.val().trim(),l=o.data("product-code"),a=$(".js-promo-code").val().trim(),c=$(".js-stripe-button").data("process-path"),d=o.data("courseId");$.post(c,{stripeEmail:s.email,stripeToken:s.id,quantity:u,promo_code:a,product_code:l,course_id:d,referrer:$(".js-stripe-button").data("referrer").trim()}).fail(b=>{console.log("Stripe call failed: "+b)}).done(b=>{window.location.href=b})}});$(".js-stripe-button").on("click",s=>{s.preventDefault();let o=$(".js-purchase-option:checked"),u=o.val().trim(),l=o.data("product-code"),a=$(".js-promo-code").val().trim(),c=o.data("course-id"),d=$(".js-payments-paths").data("validate-path");$.post(d,{quantity:u,promo_code:a,product_code:l,course_id:c}).fail(f=>{$(".js-payment-details").html(f.responseText),$("#payment_details_modal").modal("show"),Xs()}).done(f=>{let b=$(".js-payments-paths").data("calculate-total-path");$.get(b,{quantity:u,promo_code:a,product_code:l,course_id:c},null,"json").success(y=>{console.log(Vl(u,l)),typeof analytics<"u"&&(analytics.track("payment",{product_code:l,promo_code:a,currency:e,quantity:u,amount:y.price_in_cents}),console.log("payment event sent")),r.open({description:y.title,amount:y.price_in_cents})})})}),$(window).on("popstate",()=>{r.close()})}let t=$(".js-change-credit-card");if(t.length){let e=StripeCheckout.configure({key:t.data("key"),locale:"auto",token:function(n){let r=t.data("process-path");$.post(r,{stripeToken:n.id,referrer:t.data("referrer").trim()}).fail(o=>{console.log("Stripe call failed: "+o)}).done(o=>{window.location.href=o})}});t.on("click",n=>{n.preventDefault(),e.open({description:"Update Card Details",panelLabel:"Update Card Details"}),$(window).on("popstate",()=>{e.close()})})}};var Vl=function(t,e){return t==1?t+" "+e:t+" "+e+"s"};initPayments=function(){Dl(),Kn(),Ol(),Fl(),Hl(),Nl(),initStripeButton()};ql.promptResponseForm=function(){function t(e,n){let r=document.getElementById(`prompt-${e}-tab-group`);if(r){let s=r.shadowRoot.querySelectorAll("ql-tab"),o=r.shadowRoot.querySelectorAll("slot"),u=document.getElementById(`prompt-${e}-response-type-input`);if(s.length!=o.length||u===null)return;s.forEach((l,a)=>{l.addEventListener("click",c=>{u.value=n[a],o.forEach((d,f)=>{let b=d.assignedElements()[0].querySelector(`.prompt-${e}-input`);a!=f?(b.value="",b.required=!1):b.required=!0})})})}}return{initTab:t}}();ql.peerReviewSubmission=function(){function t(r,s){let o=document.getElementById(r),u=Array.from(document.getElementsByClassName(s));o&&(u.forEach(l=>{l.addEventListener("chosenOption",a=>{e(o,u)}),l.addEventListener("changedResponse",a=>{e(o,u)})}),o.addEventListener("click",l=>{o.disabled=!0,u.forEach(a=>a.submit())}))}function e(r,s){r.disabled=!n(s)}function n(r){return r.every(s=>s.isReadyForSubmission())}return{init:t}}();ql.drawer=function(){function t(e){let n=document.getElementById(e);n&&n.toggle()}return{toggle:t}}();ql.Permissions=function(t){let e=this;this.button=t,this.menu=new ql.PermissionsMenu($('ul[for="'+this.button.attr("id")+'"]')),this.overlay=$('aside[for="'+this.button.attr("id")+'"]'),this.permissions=this.button.data("permissions"),this.menu.setPermissions=function(n){e.setPermissions(n)},this.button.click(n=>{e.menu.isVisible=!0,e.render()}),this.overlay.click(n=>{e.menu.isVisible=!1,e.render()}),this.render()};ql.Permissions.prototype.setPermissions=function(t){let e=this.permissions.indexOf(t);e>=0?this.permissions.splice(e,1):this.permissions.push(t),$(".js-permissions-input").val(this.permissions.join(`\r
`)),this.render()};ql.Permissions.prototype.render=function(){let t=[];for(let e=0;e<this.permissions.length;e++)t.push("<span>"+this.permissions[e]+"</span>");this.button.find("#permissions-display").html(t),this.menu.render()};ql.PermissionsMenu=function(t){let e=this;this.element=t,this.isVisible=!1,this.setPermissions="",this.categories=[];let n=this.element.children("li");for(let r=0;r<n.length;r++)this.categories.push(new ql.PermissionsMenuCategory($(n[r]))),this.categories[r].setPermissions=function(s){e.setPermissions(s)}};ql.PermissionsMenu.prototype.render=function(){this.isVisible?this.element.addClass("is-visible"):this.element.removeClass("is-visible");for(let t=0;t<this.categories.length;t++)this.categories[t].render()};ql.PermissionsMenuCategory=function(t){let e=this;this.element=t,this.isSelected=!1,this.setPermissions="",this.items=[];let n=this.element.find("[data-permission]");for(let r=0;r<n.length;r++)this.items.push(new ql.PermissionsMenuItem($(n[r]))),this.items[r].setPermissions=function(s){e.setPermissions(s)}};ql.PermissionsMenuCategory.prototype.setSelected=function(){this.isSelected=!1;for(let t=0;t<this.items.length;t++)this.items[t].isSelected&&(this.isSelected=!0)};ql.PermissionsMenuCategory.prototype.render=function(){this.setSelected(),this.isSelected?this.element.addClass("is-selected"):this.element.removeClass("is-selected");for(let t=0;t<this.items.length;t++)this.items[t].render()};ql.PermissionsMenuItem=function(t){let e=this;this.element=t,this.isSelected=this.element[0].hasAttribute("data-selected"),this.permission=t.data("permission"),this.setPermissions="",this.element.click(n=>{e.isSelected=!e.isSelected,e.setPermissions(e.permission)})};ql.PermissionsMenuItem.prototype.render=function(){this.isSelected?this.element.addClass("is-selected"):this.element.removeClass("is-selected")};ql.initPublishModal=function(){$("#publish_modal").on("show.bs.modal",()=>{ql.updatePublishModal(),setInterval(ql.updatePublishModal,5*1e3)}).modal()};ql.updatePublishModal=function(){console.log("updating publish modal");let t=$(".js-status").data("lab-id"),e=$(".js-status").data("url");$.get(e).done(r=>{r.status=="done"?window.location.href="/labs/"+t+"/snapshots/new":($("#snapshotJobModal .status").html("["+r.id+"] "+r.status),r.message!=null&&$("#snapshotJobModal .message").html(r.message))})};ql.initClassroomSnapshotModal=function(){let t=document.getElementById("snapshotJobModal");t&&t.dataset.show==="true"&&(document.getElementById("show_classroom_snapshot_modal").click(),setInterval(Wl,7*1e3))};function Wl(){let e=document.getElementById("snapshotJobModal").dataset.classroomTemplateId;$.get("/authoring/classroom_templates/"+e+"/publish/status.json").done(r=>{r.status=="done"?window.location.href="/authoring/classroom_templates/"+e+"/snapshots/new":($("#snapshotJobModal .status").html("["+e+"] "+r.status),r.message!=null&&$("#snapshotJobModal .message").html(r.message))})}ql.quest={analytics:function(){function t(){let e={questName:gon.learning_path_name,label:gon.learning_path_name,category:"Quest",deployment:gon.deployment},n=document.querySelectorAll(".js-quest-enroll-button"),r=document.querySelectorAll(".js-quest-unenroll-button");document.querySelectorAll(".js-catalog-item-title a").forEach(o=>o.addEventListener("click",u=>{ql.track("clicked_quest_activity_link",{label:u.target.innerText,type:u.target.dataset.type})},!1));for(let o of n)o.addEventListener("click",()=>{ql.track("clicked_quest_enroll_button",e)});for(let o of r)r.addEventListener("click",()=>{ql.track("clicked_quest_unenroll_button",e)})}return{init:t}}()};var Ul=function(){jQuery.ui.autocomplete.prototype._resizeMenu=function(){this.menu.element.outerWidth(this.element.outerWidth())},$(".js-autocomplete").length>0&&$.getJSON("/searches/autocomplete.json",t=>{window.SEARCH_AUTOCOMPLETE_DISABLED||(t=t.map($.trim).sort((e,n)=>e.localeCompare(n)),$(".js-autocomplete").autocomplete({source:t,select:function(e,n){$(this).val(n.item.value),$(this).parents("form").submit()}}))})};ql.initSearch=function(){Ul();let t=document.getElementById("keywords");t&&t.addEventListener("keydown",e=>{e.isComposing||e.key!=="Enter"||ql.track("searched",{label:e.target.value})})};ql.searchAutocomplete=function(){let t,e;function n(){return document.getElementById("autocomplete-menu")}function r(){return Array.from(n().querySelectorAll("li"))}function s(){return document.getElementById("autocomplete")}function o(){return document.getElementById("autocomplete-loading-icon")}function u(){return document.getElementById("autocomplete-no-results")}function l(){n().classList.add("hide")}function a(){n().classList.remove("hide")}function c(){o().style.display="none"}function d(){o().style.display="flex"}function f(){u().style.display="none"}function b(){u().style.display="flex"}function y(){C(),f();let q=document.querySelector(".js-search-form");if(!q)return;let T=q.querySelector("input[name='keywords']");if(!T||!T.value)return;let F="/typeahead/autocomplete.json",N=q.querySelector("input[name='locale']"),V=w(F,T,N);e?.abort(),e=$.getJSON(V).done(J=>{k(J)}).always(()=>{c()}),d()}function w(q,T,F){let N=T?T.value:"",V=F?F.value:"",J=new URLSearchParams({keywords:N,locale:V});return`${q}?${J.toString()}`}function k(q){let T=s(),F=n();if(!T||!Array.isArray(q)||q.length===0){b();return}let N=document.createElement("ul");N.setAttribute("id","autocomplete-menu"),N.classList.add("elevation-3"),t=-1;for(let V of q){let J=V.label,z=V.type,W=V.catalog_item_label,K=V.url;if(J===null)continue;let I=document.createElement("li");I.classList.add("ql-body-small");let m=z?`<ql-chip class='content-chip ${z}'>${W}</ql-chip>`:"",g=K?`onClick="this.querySelector('a').click();"`:`onClick="document.getElementById('autocomplete').value = '${J}'; ql.searchFilter();"`,v=K?`href='${K}'`:"";I.innerHTML=`<div ${g}>${m}<a ${v}>${J}</a></div>`,N.appendChild(I)}F&&F.replaceWith(N),N.addEventListener("mouseover",V=>{t=-1,M()})}function C(){let q=r();for(let T of q)T.parentNode.removeChild(T);l()}function j(q,T){let F;return()=>{clearTimeout(F),F=setTimeout(q,T)}}function B(q){if(!q)return!1;if(M(),t>=q.length&&(t=q.length-1),t<=-1){t=-1;return}q[t].classList.add("autocomplete-active");let T=q[t].parentNode,F=q[t].offsetTop-T.offsetTop;T.scrollTo({top:F,behavior:"smooth"})}function M(){let q=Array.from(document.querySelectorAll(".autocomplete-active"));for(let T of q)T.classList.remove("autocomplete-active")}function p(q){let T=r();if(T.length!==0){if(q.key==="ArrowDown")t++,B(T);else if(q.key==="ArrowUp")t--,B(T);else if(q.key==="Enter"&&t>-1&&t<T.length){q.preventDefault();let F=T[t].querySelector("a"),N=T[t].querySelector("div");F&&F.href!==""?F.click():N&&N.onclick!==null&&N.click()}}}function D(){let q=s();q.addEventListener("input",j(y,500)),document.addEventListener("click",T=>{[n(),q,u(),o()].includes(T.target)||(l(),f(),e?.abort())}),q.addEventListener("focus",()=>{r().length>0&&a()}),q.addEventListener("keydown",T=>{p(T)})}return{init:D}}();ql.searchHeader=function(){function e(){document.querySelector(".toolbar-actions").style.display="none";let l=document.querySelector(".toolbar-tabs");for(let a of l.children)a.style.display="none";window.innerWidth<965&&(document.querySelector(".toolbar-title").style.display="none",document.querySelector(".toolbar-navigation").style.display="none")}function n(){if(document.querySelector(".toolbar-actions").style.display="flex",window.innerWidth>=965){let l=document.querySelector(".toolbar-tabs");for(let a of l.children)a.style.display="inline-block"}window.innerWidth<965&&(document.querySelector(".toolbar-title").style.display="flex",document.querySelector(".toolbar-navigation").style.display="block")}function r(l){e(),document.querySelector(".search-bar-container").style.display="inline-block",document.querySelector(".header-search-input").focus();let a=document.createElement("div");a.classList.add("search-overlay"),document.getElementById("jump-content").appendChild(a)}function s(l){n(),document.querySelector(".search-bar-container").style.display="none",document.querySelector(".header-search-input").value="",document.querySelector(".search-overlay").remove()}function o(l){document.querySelector(".header-search-form").submit()}function u(){let l=document.querySelector(".header-search-button"),a=document.querySelector(".exit-search-button"),c=document.querySelector(".search-bar-button");l.addEventListener("click",r),a.addEventListener("click",s),c.addEventListener("click",o)}return{init:u}}();ql.selectAll=function(){let t,e;function n(s,o){t=document.querySelector(s),e=document.querySelectorAll(o),t&&t.addEventListener("click",r,!1)}function r(s){e.forEach(o=>{o.checked=t.checked})}return{init:n}}();ql.snippetImageLocaleEdit=(()=>{function t(){for(let e of document.querySelectorAll(".js-image-input"))e.addEventListener("change",n=>{let r=n.target||window.event.srcElement,s=r.files;if(FileReader&&s&&s.length>0){let o=new FileReader;o.onload=function(){r.labels[0].querySelector("img").src=o.result},o.readAsDataURL(s[0])}})}return{init:t}})();ql.snippetListLocaleEdit=(()=>{let t;function e(){document.querySelector(".js-item-count").innerText=t}function n(){for(let[o,u]of itemLists.entries()){let l=document.createElement("li"),a=document.createElement("textarea"),c=new Date().getTime();a.id=`snippet_snippet_list_locales_attributes_${o}_snippet_list_locale_items_attributes_${c}_snippet_text`,a.name=`snippet[snippet_list_locales_attributes][${o}][snippet_list_locale_items_attributes][${c}][snippet_text]`,a.classList.add("text","optional"),l.appendChild(a),u.appendChild(l)}t++,e()}function r(){if(!(t<=0)){for(let o of itemLists){let u=o.querySelectorAll("li:not(.destroyed)"),l=u[u.length-1];if(l){let a=l.querySelector(".input-destroy");a?(a.value="1",l.style.display="none",l.classList.add("destroyed")):o.removeChild(l)}}t--,e()}}function s(){itemLists=Array.from(document.querySelectorAll(".list-locale-items")),t=itemLists[0].querySelectorAll("li").length,document.querySelector(".js-add-item").addEventListener("click",n),document.querySelector(".js-remove-item").addEventListener("click",r)}return{init:s}})();ql.sortable=(()=>{function t(e,n=null){$(".js-sortable").sortable({placeholder:"sortable-placeholder",tolerance:"pointer",update:()=>{let r=Array.from(document.querySelectorAll(e));for(let[s,o]of r.entries())o.value=s;n&&n()}})}return{init:t}})();ql.studentsAssessmentReport=function(){function t(e){let n=document.getElementById("students-assessment-report-download-button");App.cable.subscriptions.create({channel:"StudentsAssessmentChannel",classroomId:e},{initialized(){let r=document.getElementById("students-assessment-report-generate-button");r&&(this.generate=this.generate.bind(this),r.addEventListener("click",this.generate,!1))},generate(){n.loading=!0,this.perform("start_job"),document.querySelector("#students-assessment-report-modal").open()},received(r){n.href=r,n.loading=!1}})}return{init:t}}();ql.surveys=function(){return{}}();ql.aiFeaturesSurvey=function(){let t={CANCEL:"feedbackCancelled",SUBMIT:"feedbackSubmitted"};function e(){let n=document.querySelector("ql-ai-feedback"),r=s=>{switch(s.type){case t.CANCEL:document.querySelector("#skills_survey_modal").close();break;case t.SUBMIT:window.location.reload();break}};n&&(n.addEventListener(t.CANCEL,r),n.addEventListener(t.SUBMIT,r))}return{init:e}}();initFirstTabActive=function(){$(".js-tab").first().addClass("is-active"),$(".js-tab-content").first().addClass("is-active")};initTabListener=function(){$(".js-tab").click(function(){let t=$(this).data("tab");$(".js-tab").removeClass("is-active"),$(this).addClass("is-active"),$(".js-tab-content").removeClass("is-active"),$(".js-tab-content[data-tab='"+t+"']").addClass("is-active")})};initTabs=function(){initTabListener()};ql.toggleButtons=function(){let t="is-toggled",e="local-storage-id";function r(){document.querySelectorAll(".toggle-button").forEach(f=>{f.hasAttribute("for")?(f.addEventListener("click",o,!1),f.addEventListener("keyup",s,!1)):f.disabled=!0})}function s(d){d.keyCode===13&&o.bind(this)()}function o(){this.classList.contains(t)?l(this):u(this)}function u(d){c(d,"on"),d.classList.add(t);let f=a(d);f&&f.classList.add(t)}function l(d){c(d,"off"),d.classList.remove(t);let f=a(d);f&&f.classList.remove(t)}function a(d){return document.getElementById(d.getAttribute("for"))}function c(d,f){d.hasAttribute(e)&&(document.cookie=`toggleButton.${d.getAttribute(e)}= ${f}`)}return{init:r}}();initTooltips=function(){$('[data-toggle="tooltip"]').tooltip()};window.trans={};initLabTranslations=function(t){trans=t};initPaymentTranslations=function(t){trans=t};ql.trixEditor=function(){return{init(t){document.querySelectorAll(".trix-input--dialog").forEach(e=>e.setAttribute("placeholder",t)),document.addEventListener("trix-attachment-add",e=>{e.attachment.remove()})}}}();document.addEventListener("turbo:before-cache",function(){componentHandler?.downgradeElements(document.querySelectorAll("[data-upgraded]"))});document.addEventListener("turbo:render",function(){componentHandler?.upgradeDom()});})();
/*! Bundled license information:

clipboard/dist/clipboard.js:
  (*!
   * clipboard.js v2.0.11
   * https://clipboardjs.com/
   *
   * Licensed MIT © Zeno Rocha
   *)

@hotwired/turbo/dist/turbo.es2017-esm.js:
  (*!
  Turbo 8.0.4
  Copyright © 2024 37signals LLC
   *)
*/
